{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///./assets/js/frontend/checkout/utils.js","webpack:///./assets/js/frontend/edd-ajax.js","webpack:///./assets/js/frontend/checkout/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","getCreditCardIcon","type","width","edd_load_gateway","payment_mode","show","html","nonce","data","url","edd_scripts","ajaxurl","indexOf","post","action","edd_payment_mode","response","hide","trigger","document","ready","$","addClass","body","on","event","$this","this","item","id","cart_item","ajax","dataType","xhrFields","withCredentials","success","removed","parseInt","position_in_cart","has_purchase_links","window","location","each","find","parent","remove","cart_item_counter","attr","length","removeAttr","quantities_enabled","text","cart_quantity","taxes_enabled","subtotal","tax","total","cart_wrapper","removeClass","append","empty_cart_message","fail","console","log","done","e","preventDefault","form","closest","prop","container","parents","last","download","variable_price","price_mode","item_price_ids","free_items","val","alert","select_option","stopPropagation","index","item_price","submit","download_id","price_ids","post_data","serialize","store_redirect","redirect_to_checkout","item_redirect","checkout_page","cart","target","insertBefore","css","toggle","is","parent_form","slideUp","fadeIn","setTimeout","fadeOut","checkout_response","loading","complete_purchase_val","edd_global_vars","purchase_loading","after","edd_ajax","edd_user_login","edd_user_pass","edd_login_nonce","trim","before","change","is_checkout","chosen_gateway","ajax_needed","default_gateway","update_state_field","$form","field_name","state_inputs","getElementById","postData","country","text_field","replaceWith","recalculate_taxes","eddPurchaseform","checkValidity","checkout_error_anchor","ajax_tax_count","state","$edd_cc_address","billing_country","card_address","card_address_2","card_city","card_state","card_zip","current_ajax_count","tax_response","tax_data","postdata","EDD_Checkout","$body","$edd_cart_amount","$checkout_form_wrap","apply_discount","discount_code","edd_discount_loader","enter_discount","code","discount_response","msg","total_plain","inputs","slideDown","remove_discount","zero","decimal_separator","currency_sign","reload","discounts","update_item_quantities","quantity","options","edd_cc_address","taxes","init","card_number","card_cvc","card_expiry","payment","field","card_field","validateCreditCard","result","$card_type","card_type","length_valid","luhn_valid","name_field","no_gateway","keyCode","focus","amazon","Login","logout","edd_amazon","checkoutUri"],"mappings":"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","file":"assets/js/edd-ajax.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 68);\n","module.exports = jQuery;","/**\n * Generate markup for a credit card icon based on a passed type.\n *\n * @param {string} type Credit card type.\n * @return HTML markup.\n */\nexport const getCreditCardIcon = ( type ) => {\n\tlet width;\n\tlet name = type;\n\n\tswitch ( type ) {\n\t\tcase 'amex':\n\t\t\tname = 'americanexpress';\n\t\t\twidth = 32;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\twidth = 50;\n\t\t\tbreak;\n\t}\n\n\treturn `\n    <svg\n      width=${ width }\n      height=${ 32 }\n      class=\"payment-icon icon-${ name }\"\n      role=\"img\"\n    >\n      <use\n        href=\"#icon-${ name }\"\n        xlink:href=\"#icon-${ name }\">\n      </use>\n    </svg>`;\n};\n","/* global edd_scripts, edd_global_vars */\n\n/**\n * Internal dependencies.\n */\nimport { recalculate_taxes } from './checkout';\n\njQuery( document ).ready( function( $ ) {\n\t// Hide unneeded elements. These are things that are required in case JS breaks or isn't present\n\t$( '.edd-no-js' ).hide();\n\t$( 'a.edd-add-to-cart' ).addClass( 'edd-has-js' );\n\n\t// Send Remove from Cart requests\n\t$( document.body ).on( 'click.eddRemoveFromCart', '.edd-remove-from-cart', function( event ) {\n\t\tconst $this = $( this ),\n\t\t\titem = $this.data( 'cart-item' ),\n\t\t\taction = $this.data( 'action' ),\n\t\t\tid = $this.data( 'download-id' ),\n\t\t\tnonce = $this.data( 'nonce' ),\n\t\t\tdata = {\n\t\t\t\taction: action,\n\t\t\t\tcart_item: item,\n\t\t\t\tnonce: nonce,\n\t\t\t};\n\n\t\t $.ajax( {\n\t\t\ttype: 'POST',\n\t\t\tdata: data,\n\t\t\tdataType: 'json',\n\t\t\turl: edd_scripts.ajaxurl,\n\t\t\txhrFields: {\n\t\t\t\twithCredentials: true,\n\t\t\t},\n\t\t\tsuccess: function( response ) {\n\t\t\t\tif ( response.removed ) {\n\t\t\t\t\tif ( ( parseInt( edd_scripts.position_in_cart, 10 ) === parseInt( item, 10 ) ) || edd_scripts.has_purchase_links ) {\n\t\t\t\t\t\twindow.location = window.location;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Remove the selected cart item\n\t\t\t\t\t$( '.edd-cart' ).each( function() {\n\t\t\t\t\t\t$( this ).find( \"[data-cart-item='\" + item + \"']\" ).parent().remove();\n\t\t\t\t\t} );\n\n\t\t\t\t\t//Reset the data-cart-item attributes to match their new values in the EDD session cart array\n\t\t\t\t\t$( '.edd-cart' ).each( function() {\n\t\t\t\t\t\tlet cart_item_counter = 0;\n\t\t\t\t\t\t$( this ).find( '[data-cart-item]' ).each( function() {\n\t\t\t\t\t\t\t$( this ).attr( 'data-cart-item', cart_item_counter );\n\t\t\t\t\t\t\tcart_item_counter = cart_item_counter + 1;\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Check to see if the purchase form(s) for this download is present on this page\n\t\t\t\t\tif ( $( '[id^=edd_purchase_' + id + ']' ).length ) {\n\t\t\t\t\t\t$( '[id^=edd_purchase_' + id + '] .edd_go_to_checkout' ).hide();\n\t\t\t\t\t\t$( '[id^=edd_purchase_' + id + '] a.edd-add-to-cart' ).show().removeAttr( 'data-edd-loading' );\n\t\t\t\t\t\tif ( edd_scripts.quantities_enabled === '1' ) {\n\t\t\t\t\t\t\t$( '[id^=edd_purchase_' + id + '] .edd_download_quantity_wrapper' ).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$( 'span.edd-cart-quantity' ).text( response.cart_quantity );\n\t\t\t\t\t$( document.body ).trigger( 'edd_quantity_updated', [ response.cart_quantity ] );\n\t\t\t\t\tif ( edd_scripts.taxes_enabled ) {\n\t\t\t\t\t\t$( '.cart_item.edd_subtotal span' ).html( response.subtotal );\n\t\t\t\t\t\t$( '.cart_item.edd_cart_tax span' ).html( response.tax );\n\t\t\t\t\t}\n\n\t\t\t\t\t$( '.cart_item.edd_total span' ).html( response.total );\n\n\t\t\t\t\tif ( response.cart_quantity === 0 ) {\n\t\t\t\t\t\t$( '.cart_item.edd_subtotal,.edd-cart-number-of-items,.cart_item.edd_checkout,.cart_item.edd_cart_tax,.cart_item.edd_total' ).hide();\n\t\t\t\t\t\t$( '.edd-cart' ).each( function() {\n\t\t\t\t\t\t\tconst cart_wrapper = $( this ).parent();\n\t\t\t\t\t\t\tif ( cart_wrapper ) {\n\t\t\t\t\t\t\t\tcart_wrapper.addClass( 'cart-empty' );\n\t\t\t\t\t\t\t\tcart_wrapper.removeClass( 'cart-not-empty' );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t$( this ).append( '<li class=\"cart_item empty\">' + edd_scripts.empty_cart_message + '</li>' );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\t$( document.body ).trigger( 'edd_cart_item_removed', [ response ] );\n\t\t\t\t}\n\t\t\t},\n\t\t} ).fail( function( response ) {\n\t\t\tif ( window.console && window.console.log ) {\n\t\t\t\tconsole.log( response );\n\t\t\t}\n\t\t} ).done( function( response ) {\n\n\t\t} );\n\n\t\treturn false;\n\t} );\n\n\t// Send Add to Cart request\n\t$( document.body ).on( 'click.eddAddToCart', '.edd-add-to-cart', function( e ) {\n\t\te.preventDefault();\n\n\t\tvar $this = $( this ),\n\t\t\tform = $this.closest( 'form' );\n\n\t\t// Disable button, preventing rapid additions to cart during ajax request\n\t\t$this.prop( 'disabled', true );\n\n\t\tconst $spinner = $this.find( '.edd-loading' );\n\t\tconst container = $this.closest( 'div' );\n\n\t\t// Show the spinner\n\t\t$this.attr( 'data-edd-loading', '' );\n\n\t\tvar form = $this.parents( 'form' ).last();\n\t\tconst download = $this.data( 'download-id' );\n\t\tconst variable_price = $this.data( 'variable-price' );\n\t\tconst price_mode = $this.data( 'price-mode' );\n\t\tconst nonce = $this.data( 'nonce' );\n\t\tconst item_price_ids = [];\n\t\tlet free_items = true;\n\n\t\tif ( variable_price === 'yes' ) {\n\t\t\tif ( form.find( '.edd_price_option_' + download + '[type=\"hidden\"]' ).length > 0 ) {\n\t\t\t\titem_price_ids[ 0 ] = $( '.edd_price_option_' + download, form ).val();\n\t\t\t\tif ( form.find( '.edd-submit' ).data( 'price' ) && form.find( '.edd-submit' ).data( 'price' ) > 0 ) {\n\t\t\t\t\tfree_items = false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( ! form.find( '.edd_price_option_' + download + ':checked', form ).length ) {\n\t\t\t\t\t // hide the spinner\n\t\t\t\t\t$this.removeAttr( 'data-edd-loading' );\n\t\t\t\t\talert( edd_scripts.select_option );\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t$this.prop( 'disabled', false );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tform.find( '.edd_price_option_' + download + ':checked', form ).each( function( index ) {\n\t\t\t\t\titem_price_ids[ index ] = $( this ).val();\n\n\t\t\t\t\t// If we're still only at free items, check if this one is free also\n\t\t\t\t\tif ( true === free_items ) {\n\t\t\t\t\t\tconst item_price = $( this ).data( 'price' );\n\t\t\t\t\t\tif ( item_price && item_price > 0 ) {\n\t\t\t\t\t\t\t// We now have a paid item, we can't use add_to_cart\n\t\t\t\t\t\t\tfree_items = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} else {\n\t\t\titem_price_ids[ 0 ] = download;\n\t\t\tif ( $this.data( 'price' ) && $this.data( 'price' ) > 0 ) {\n\t\t\t\tfree_items = false;\n\t\t\t}\n\t\t}\n\n\t\t// If we've got nothing but free items being added, change to add_to_cart\n\t\tif ( free_items ) {\n\t\t\tform.find( '.edd_action_input' ).val( 'add_to_cart' );\n\t\t}\n\n\t\tif ( 'straight_to_gateway' === form.find( '.edd_action_input' ).val() ) {\n\t\t\tform.submit();\n\t\t\treturn true; // Submit the form\n\t\t}\n\n\t\tconst action = $this.data( 'action' );\n\t\tconst data = {\n\t\t\taction: action,\n\t\t\tdownload_id: download,\n\t\t\tprice_ids: item_price_ids,\n\t\t\tpost_data: $( form ).serialize(),\n\t\t\tnonce: nonce,\n\t\t};\n\n\t\t$.ajax( {\n\t\t\ttype: 'POST',\n\t\t\tdata: data,\n\t\t\tdataType: 'json',\n\t\t\turl: edd_scripts.ajaxurl,\n\t\t\txhrFields: {\n\t\t\t\twithCredentials: true,\n\t\t\t},\n\t\t\tsuccess: function( response ) {\n\t\t\t\tconst store_redirect = edd_scripts.redirect_to_checkout === '1';\n\t\t\t\tconst item_redirect = form.find( '#edd_redirect_to_checkout' ).val() === '1';\n\n\t\t\t\tif ( ( store_redirect && item_redirect ) || ( ! store_redirect && item_redirect ) ) {\n\t\t\t\t\twindow.location = edd_scripts.checkout_page;\n\t\t\t\t} else {\n\t\t\t\t\t// Add the new item to the cart widget\n\t\t\t\t\tif ( edd_scripts.taxes_enabled === '1' ) {\n\t\t\t\t\t\t$( '.cart_item.edd_subtotal' ).show();\n\t\t\t\t\t\t$( '.cart_item.edd_cart_tax' ).show();\n\t\t\t\t\t}\n\n\t\t\t\t\t$( '.cart_item.edd_total' ).show();\n\t\t\t\t\t$( '.cart_item.edd_checkout' ).show();\n\n\t\t\t\t\tif ( $( '.cart_item.empty' ).length ) {\n\t\t\t\t\t\t$( '.cart_item.empty' ).hide();\n\t\t\t\t\t}\n\n\t\t\t\t\t$( '.widget_edd_cart_widget .edd-cart' ).each( function( cart ) {\n\t\t\t\t\t\tconst target = $( this ).find( '.edd-cart-meta:first' );\n\t\t\t\t\t\t$( response.cart_item ).insertBefore( target );\n\n\t\t\t\t\t\tconst cart_wrapper = $( this ).parent();\n\t\t\t\t\t\tif ( cart_wrapper ) {\n\t\t\t\t\t\t\tcart_wrapper.addClass( 'cart-not-empty' );\n\t\t\t\t\t\t\tcart_wrapper.removeClass( 'cart-empty' );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Update the totals\n\t\t\t\t\tif ( edd_scripts.taxes_enabled === '1' ) {\n\t\t\t\t\t\t$( '.edd-cart-meta.edd_subtotal span' ).html( response.subtotal );\n\t\t\t\t\t\t$( '.edd-cart-meta.edd_cart_tax span' ).html( response.tax );\n\t\t\t\t\t}\n\n\t\t\t\t\t$( '.edd-cart-meta.edd_total span' ).html( response.total );\n\n\t\t\t\t\t// Update the cart quantity\n\t\t\t\t\tconst items_added = $( '.edd-cart-item-title', response.cart_item ).length;\n\n\t\t\t\t\t$( 'span.edd-cart-quantity' ).each( function() {\n\t\t\t\t\t\t$( this ).text( response.cart_quantity );\n\t\t\t\t\t\t$( document.body ).trigger( 'edd_quantity_updated', [ response.cart_quantity ] );\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Show the \"number of items in cart\" message\n\t\t\t\t\tif ( $( '.edd-cart-number-of-items' ).css( 'display' ) === 'none' ) {\n\t\t\t\t\t\t$( '.edd-cart-number-of-items' ).show( 'slow' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( variable_price === 'no' || price_mode !== 'multi' ) {\n\t\t\t\t\t\t// Switch purchase to checkout if a single price item or variable priced with radio buttons\n\t\t\t\t\t\t$( 'a.edd-add-to-cart', container ).toggle();\n\t\t\t\t\t\t$( '.edd_go_to_checkout', container ).css( 'display', 'inline-block' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( price_mode === 'multi' ) {\n\t\t\t\t\t\t// remove spinner for multi\n\t\t\t\t\t\t$this.removeAttr( 'data-edd-loading' );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Update all buttons for same download\n\t\t\t\t\tif ( $( '.edd_download_purchase_form' ).length && ( variable_price === 'no' || ! form.find( '.edd_price_option_' + download ).is( 'input:hidden' ) ) ) {\n\t\t\t\t\t\tconst parent_form = $( '.edd_download_purchase_form *[data-download-id=\"' + download + '\"]' ).parents( 'form' );\n\t\t\t\t\t\t$( 'a.edd-add-to-cart', parent_form ).hide();\n\t\t\t\t\t\tif ( price_mode !== 'multi' ) {\n\t\t\t\t\t\t\tparent_form.find( '.edd_download_quantity_wrapper' ).slideUp();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$( '.edd_go_to_checkout', parent_form ).show().removeAttr( 'data-edd-loading' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( response !== 'incart' ) {\n\t\t\t\t\t\t// Show the added message\n\t\t\t\t\t\t$( '.edd-cart-added-alert', container ).fadeIn();\n\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t$( '.edd-cart-added-alert', container ).fadeOut();\n\t\t\t\t\t\t}, 3000 );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Re-enable the add to cart button\n\t\t\t\t\t$this.prop( 'disabled', false );\n\n\t\t\t\t\t$( document.body ).trigger( 'edd_cart_item_added', [ response ] );\n\t\t\t\t}\n\t\t\t},\n\t\t} ).fail( function( response ) {\n\t\t\tif ( window.console && window.console.log ) {\n\t\t\t\tconsole.log( response );\n\t\t\t}\n\t\t} ).done( function( response ) {\n\n\t\t} );\n\n\t\treturn false;\n\t} );\n\n\t// Show the login form on the checkout page\n\t$( '#edd_checkout_form_wrap' ).on( 'click', '.edd_checkout_register_login', function() {\n\t\tconst $this = $( this ),\n\t\t\tdata = {\n\t\t\t\taction: $this.data( 'action' ),\n\t\t\t\tnonce: $this.data( 'nonce' ),\n\t\t\t};\n\n\t\t// Show the ajax loader\n\t\t$( '.edd-cart-ajax' ).show();\n\n\t\t$.post( edd_scripts.ajaxurl, data, function( checkout_response ) {\n\t\t\t$( '#edd_checkout_login_register' ).html( edd_scripts.loading );\n\t\t\t$( '#edd_checkout_login_register' ).html( checkout_response );\n\t\t\t// Hide the ajax loader\n\t\t\t$( '.edd-cart-ajax' ).hide();\n\t\t} );\n\t\treturn false;\n\t} );\n\n\t// Process the login form via ajax\n\t$( document ).on( 'click', '#edd_purchase_form #edd_login_fields input[type=submit]', function( e ) {\n\t\te.preventDefault();\n\n\t\tconst complete_purchase_val = $( this ).val();\n\n\t\t$( this ).val( edd_global_vars.purchase_loading );\n\n\t\t$( this ).after( '<span class=\"edd-loading-ajax edd-loading\"></span>' );\n\n\t\tconst data = {\n\t\t\taction: 'edd_process_checkout_login',\n\t\t\tedd_ajax: 1,\n\t\t\tedd_user_login: $( '#edd_login_fields #edd_user_login' ).val(),\n\t\t\tedd_user_pass: $( '#edd_login_fields #edd_user_pass' ).val(),\n\t\t\tedd_login_nonce: $( '#edd_login_nonce' ).val(),\n\t\t};\n\n\t\t$.post( edd_global_vars.ajaxurl, data, function( data ) {\n\t\t\tif ( $.trim( data ) === 'success' ) {\n\t\t\t\t$( '.edd_errors' ).remove();\n\t\t\t\twindow.location = edd_scripts.checkout_page;\n\t\t\t} else {\n\t\t\t\t$( '#edd_login_fields input[type=submit]' ).val( complete_purchase_val );\n\t\t\t\t$( '.edd-loading-ajax' ).remove();\n\t\t\t\t$( '.edd_errors' ).remove();\n\t\t\t\t$( '#edd-user-login-submit' ).before( data );\n\t\t\t}\n\t\t} );\n\t} );\n\n\t// Load the fields for the selected payment method\n\t$( 'select#edd-gateway, input.edd-gateway' ).change( function( e ) {\n\t\tconst payment_mode = $( '#edd-gateway option:selected, input.edd-gateway:checked' ).val();\n\n\t\tif ( payment_mode === '0' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tedd_load_gateway( payment_mode );\n\n\t\treturn false;\n\t} );\n\n\t// Auto load first payment gateway\n\tif ( edd_scripts.is_checkout === '1' ) {\n\t\tlet chosen_gateway = false;\n\t\tlet ajax_needed = false;\n\n\t\tif ( $( 'select#edd-gateway, input.edd-gateway' ).length ) {\n\t\t\tchosen_gateway = $( \"meta[name='edd-chosen-gateway']\" ).attr( 'content' );\n\t\t\tajax_needed = true;\n\t\t}\n\n\t\tif ( ! chosen_gateway ) {\n\t\t\tchosen_gateway = edd_scripts.default_gateway;\n\t\t}\n\n\t\tif ( ajax_needed ) {\n\t\t\t// If we need to ajax in a gateway form, send the requests for the POST.\n\t\t\tsetTimeout( function() {\n\t\t\t\tedd_load_gateway( chosen_gateway );\n\t\t\t}, 200 );\n\t\t} else {\n\t\t\t// The form is already on page, just trigger that the gateway is loaded so further action can be taken.\n\t\t\t$( 'body' ).trigger( 'edd_gateway_loaded', [ chosen_gateway ] );\n\t\t}\n\t}\n\n\t// Process checkout\n\t$( document ).on( 'click', '#edd_purchase_form #edd_purchase_submit [type=submit]', function( e ) {\n\t\tconst eddPurchaseform = document.getElementById( 'edd_purchase_form' );\n\n\t\tif ( typeof eddPurchaseform.checkValidity === 'function' && false === eddPurchaseform.checkValidity() ) {\n\t\t\treturn;\n\t\t}\n\n\t\te.preventDefault();\n\n\t\tconst complete_purchase_val = $( this ).val();\n\n\t\t$( this ).val( edd_global_vars.purchase_loading );\n\n\t\t$( this ).prop( 'disabled', true );\n\n\t\t$( this ).after( '<span class=\"edd-loading-ajax edd-loading\"></span>' );\n\n\t\t$.post( edd_global_vars.ajaxurl, $( '#edd_purchase_form' ).serialize() + '&action=edd_process_checkout&edd_ajax=true', function( data ) {\n\t\t\tif ( $.trim( data ) === 'success' ) {\n\t\t\t\t$( '.edd_errors' ).remove();\n\t\t\t\t$( '.edd-error' ).hide();\n\t\t\t\t$( eddPurchaseform ).submit();\n\t\t\t} else {\n\t\t\t\t$( '#edd-purchase-button' ).val( complete_purchase_val );\n\t\t\t\t$( '.edd-loading-ajax' ).remove();\n\t\t\t\t$( '.edd_errors' ).remove();\n\t\t\t\t$( '.edd-error' ).hide();\n\t\t\t\t$( edd_global_vars.checkout_error_anchor ).before( data );\n\t\t\t\t$( '#edd-purchase-button' ).prop( 'disabled', false );\n\n\t\t\t\t$( document.body ).trigger( 'edd_checkout_error', [ data ] );\n\t\t\t}\n\t\t} );\n\t} );\n\n\t// Update state field\n\t$( document.body ).on( 'change', '#edd_cc_address input.card_state, #edd_cc_address select, #edd_address_country', update_state_field );\n\n\tfunction update_state_field() {\n\t\tconst $this = $( this );\n\t\tlet $form;\n\t\tconst is_checkout = typeof edd_global_vars !== 'undefined';\n\t\tlet field_name = 'card_state';\n\t\tif ( $( this ).attr( 'id' ) === 'edd_address_country' ) {\n\t\t\tfield_name = 'edd_address_state';\n\t\t}\n\n\t\tlet state_inputs = document.getElementById( field_name );\n\n\t\tif ( 'card_state' !== $this.attr( 'id' ) && null != state_inputs ) {\n\t\t\tconst nonce = $( this ).data( 'nonce' );\n\n\t\t\t// If the country field has changed, we need to update the state/province field\n\t\t\tconst postData = {\n\t\t\t\taction: 'edd_get_shop_states',\n\t\t\t\tcountry: $this.val(),\n\t\t\t\tfield_name: field_name,\n\t\t\t\tnonce: nonce,\n\t\t\t};\n\n\t\t\t$.ajax( {\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: postData,\n\t\t\t\turl: edd_scripts.ajaxurl,\n\t\t\t\txhrFields: {\n\t\t\t\t\twithCredentials: true,\n\t\t\t\t},\n\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\tif ( is_checkout ) {\n\t\t\t\t\t\t$form = $( '#edd_purchase_form' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$form = $this.closest( 'form' );\n\t\t\t\t\t}\n\n\t\t\t\t\tconst state_inputs = 'input[name=\"card_state\"], select[name=\"card_state\"], input[name=\"edd_address_state\"], select[name=\"edd_address_state\"]';\n\n\t\t\t\t\tif ( 'nostates' === $.trim( response ) ) {\n\t\t\t\t\t\tconst text_field = '<input type=\"text\" id=\"' + field_name + '\" name=\"card_state\" class=\"card-state edd-input required\" value=\"\"/>';\n\t\t\t\t\t\t$form.find( state_inputs ).replaceWith( text_field );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$form.find( state_inputs ).replaceWith( response );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( is_checkout ) {\n\t\t\t\t\t\t$( document.body ).trigger( 'edd_cart_billing_address_updated', [ response ] );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t} ).fail( function( data ) {\n\t\t\t\tif ( window.console && window.console.log ) {\n\t\t\t\t\tconsole.log( data );\n\t\t\t\t}\n\t\t\t} ).done( function( data ) {\n\t\t\t\tif ( is_checkout ) {\n\t\t\t\t\trecalculate_taxes();\n\t\t\t\t}\n\t\t\t} );\n\t\t} else if ( is_checkout ) {\n\t\t\trecalculate_taxes();\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t// Backwards compatibility. Assign function to global namespace.\n\twindow.update_state_field = update_state_field;\n\n\t// If is_checkout, recalculate sales tax on postalCode change.\n\t$( document.body ).on( 'change', '#edd_cc_address input[name=card_zip]', function() {\n\t\tif ( typeof edd_global_vars !== 'undefined' ) {\n\t\t\trecalculate_taxes();\n\t\t}\n\t} );\n} );\n\n// Load a payment gateway\nfunction edd_load_gateway( payment_mode ) {\n\t// Show the ajax loader\n\tjQuery( '.edd-cart-ajax' ).show();\n\tjQuery( '#edd_purchase_form_wrap' ).html( '<span class=\"edd-loading-ajax edd-loading\"></span>' );\n\n\tconst nonce = jQuery( '#edd-gateway-' + payment_mode ).data( payment_mode + '-nonce' );\n\tlet url = edd_scripts.ajaxurl;\n\n\tif ( url.indexOf( '?' ) > 0 ) {\n\t\turl = url + '&';\n\t} else {\n\t\turl = url + '?';\n\t}\n\n\turl = url + 'payment-mode=' + payment_mode;\n\n\tjQuery.post( url, { action: 'edd_load_gateway', edd_payment_mode: payment_mode, nonce: nonce },\n\t\tfunction( response ) {\n\t\t\tjQuery( '#edd_purchase_form_wrap' ).html( response );\n\t\t\tjQuery( '.edd-no-js' ).hide();\n\t\t\tjQuery( 'body' ).trigger( 'edd_gateway_loaded', [ payment_mode ] );\n\t\t}\n\t);\n}\n\n// Backwards compatibility. Assign function to global namespace.\nwindow.edd_load_gateway = edd_load_gateway;\n","/**\n * Internal dependencies.\n */\nimport { getCreditCardIcon } from './utils.js';\n\n/* global edd_global_vars */\n\nlet ajax_tax_count = 0;\n\n/**\n * Recalulate taxes.\n *\n * @param {string} state State to calculate taxes for.\n * @return {Promise}\n */\nexport function recalculate_taxes( state ) {\n\tif ( '1' != edd_global_vars.taxes_enabled ) {\n\t\treturn;\n\t} // Taxes not enabled\n\n\tconst $edd_cc_address = jQuery( '#edd_cc_address' );\n\n\tconst billing_country = $edd_cc_address.find( '#billing_country' ).val(),\n\t\tcard_address = $edd_cc_address.find( '#card_address' ).val(),\n\t\tcard_address_2 = $edd_cc_address.find( '#card_address_2' ).val(),\n\t\tcard_city = $edd_cc_address.find( '#card_city' ).val(),\n\t\tcard_state = $edd_cc_address.find( '#card_state' ).val(),\n\t\tcard_zip = $edd_cc_address.find( '#card_zip' ).val();\n\n\tif ( ! state ) {\n\t\tstate = card_state;\n\t}\n\n\tconst postData = {\n\t\taction: 'edd_recalculate_taxes',\n\t\tcard_address: card_address,\n\t\tcard_address_2: card_address_2,\n\t\tcard_city: card_city,\n\t\tcard_zip: card_zip,\n\t\tstate: state,\n\t\tbilling_country: billing_country,\n\t\tnonce: jQuery( '#edd-checkout-address-fields-nonce' ).val(),\n\t};\n\n\tjQuery( '#edd_purchase_submit [type=submit]' ).after( '<span class=\"edd-loading-ajax edd-recalculate-taxes-loading edd-loading\"></span>' );\n\n\tconst current_ajax_count = ++ajax_tax_count;\n\n\treturn jQuery.ajax( {\n\t\ttype: 'POST',\n\t\tdata: postData,\n\t\tdataType: 'json',\n\t\turl: edd_global_vars.ajaxurl,\n\t\txhrFields: {\n\t\t\twithCredentials: true,\n\t\t},\n\t\tsuccess: function( tax_response ) {\n\t\t\t// Only update tax info if this response is the most recent ajax call.\n\t\t\t// Avoids bug with form autocomplete firing multiple ajax calls at the same time and not\n\t\t\t// being able to predict the call response order.\n\t\t\tif ( current_ajax_count === ajax_tax_count ) {\n\t\t\t\tjQuery( '#edd_checkout_cart_form' ).replaceWith( tax_response.html );\n\t\t\t\tjQuery( '.edd_cart_amount' ).html( tax_response.total );\n\t\t\t\tconst tax_data = new Object();\n\t\t\t\ttax_data.postdata = postData;\n\t\t\t\ttax_data.response = tax_response;\n\t\t\t\tjQuery( 'body' ).trigger( 'edd_taxes_recalculated', [ tax_data ] );\n\t\t\t}\n\t\t\tjQuery( '.edd-recalculate-taxes-loading' ).remove();\n\t\t},\n\t} ).fail( function( data ) {\n\t\tif ( window.console && window.console.log ) {\n\t\t\tconsole.log( data );\n\t\t\tif ( current_ajax_count === ajax_tax_count ) {\n\t\t\t\tjQuery( 'body' ).trigger( 'edd_taxes_recalculated', [ tax_data ] );\n\t\t\t}\n\t\t}\n\t} );\n}\n\n// Backwards compatibility. Assign function to global namespace.\nwindow.recalculate_taxes = recalculate_taxes;\n\nwindow.EDD_Checkout = ( function( $ ) {\n\t'use strict';\n\n\tlet $body,\n\t\t$form,\n\t\t$edd_cart_amount,\n\t\tbefore_discount,\n\t\t$checkout_form_wrap;\n\n\tfunction init() {\n\t\t$body = $( document.body );\n\t\t$form = $( '#edd_purchase_form' );\n\t\t$edd_cart_amount = $( '.edd_cart_amount' );\n\t\tbefore_discount = $edd_cart_amount.text();\n\t\t$checkout_form_wrap = $( '#edd_checkout_form_wrap' );\n\n\t\t$body.on( 'edd_gateway_loaded', function( e ) {\n\t\t\tedd_format_card_number( $form );\n\t\t} );\n\n\t\t$body.on( 'keyup change', '.edd-do-validate .card-number', function() {\n\t\t\tedd_validate_card( $( this ) );\n\t\t} );\n\n\t\t$body.on( 'blur change', '.card-name', function() {\n\t\t\tconst name_field = $( this );\n\n\t\t\tname_field.validateCreditCard( function( result ) {\n\t\t\t\tif ( result.card_type != null ) {\n\t\t\t\t\tname_field.removeClass( 'valid' ).addClass( 'error' );\n\t\t\t\t\t$( '#edd-purchase-button' ).attr( 'disabled', 'disabled' );\n\t\t\t\t} else {\n\t\t\t\t\tname_field.removeClass( 'error' ).addClass( 'valid' );\n\t\t\t\t\t$( '#edd-purchase-button' ).removeAttr( 'disabled' );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t\t// Make sure a gateway is selected\n\t\t$body.on( 'submit', '#edd_payment_mode', function() {\n\t\t\tconst gateway = $( '#edd-gateway option:selected' ).val();\n\t\t\tif ( gateway == 0 ) {\n\t\t\t\talert( edd_global_vars.no_gateway );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\n\t\t// Add a class to the currently selected gateway on click\n\t\t$body.on( 'click', '#edd_payment_mode_select input', function() {\n\t\t\t$( '#edd_payment_mode_select label.edd-gateway-option-selected' ).removeClass( 'edd-gateway-option-selected' );\n\t\t\t$( '#edd_payment_mode_select input:checked' ).parent().addClass( 'edd-gateway-option-selected' );\n\t\t} );\n\n\t\t// Validate and apply a discount\n\t\t$checkout_form_wrap.on( 'click', '.edd-apply-discount', apply_discount );\n\n\t\t// Prevent the checkout form from submitting when hitting Enter in the discount field\n\t\t$checkout_form_wrap.on( 'keypress', '#edd-discount', function( event ) {\n\t\t\tif ( event.keyCode == '13' ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\n\t\t// Apply the discount when hitting Enter in the discount field instead\n\t\t$checkout_form_wrap.on( 'keyup', '#edd-discount', function( event ) {\n\t\t\tif ( event.keyCode == '13' ) {\n\t\t\t\t$checkout_form_wrap.find( '.edd-apply-discount' ).trigger( 'click' );\n\t\t\t}\n\t\t} );\n\n\t\t// Remove a discount\n\t\t$body.on( 'click', '.edd_discount_remove', remove_discount );\n\n\t\t// When discount link is clicked, hide the link, then show the discount input and set focus.\n\t\t$body.on( 'click', '.edd_discount_link', function( e ) {\n\t\t\te.preventDefault();\n\t\t\t$( '.edd_discount_link' ).parent().hide();\n\t\t\t$( '#edd-discount-code-wrap' ).show().find( '#edd-discount' ).focus();\n\t\t} );\n\n\t\t// Hide / show discount fields for browsers without javascript enabled\n\t\t$body.find( '#edd-discount-code-wrap' ).hide();\n\t\t$body.find( '#edd_show_discount' ).show();\n\n\t\t// Update the checkout when item quantities are updated\n\t\t$body.on( 'change', '.edd-item-quantity', update_item_quantities );\n\n\t\t$body.on( 'click', '.edd-amazon-logout #Logout', function( e ) {\n\t\t\te.preventDefault();\n\t\t\tamazon.Login.logout();\n\t\t\twindow.location = edd_amazon.checkoutUri;\n\t\t} );\n\t}\n\n\tfunction edd_validate_card( field ) {\n\t\tconst card_field = field;\n\t\tcard_field.validateCreditCard( function( result ) {\n\t\t\tconst $card_type = $( '.card-type' );\n\n\t\t\tif ( result.card_type == null ) {\n\t\t\t\t$card_type.removeClass().addClass( 'off card-type' );\n\t\t\t\tcard_field.removeClass( 'valid' );\n\t\t\t\tcard_field.addClass( 'error' );\n\t\t\t} else {\n\t\t\t\t$card_type.removeClass( 'off' );\n\t\t\t\t$card_type.html( getCreditCardIcon( result.card_type.name ) );\n\t\t\t\t$card_type.addClass( result.card_type.name );\n\t\t\t\tif ( result.length_valid && result.luhn_valid ) {\n\t\t\t\t\tcard_field.addClass( 'valid' );\n\t\t\t\t\tcard_field.removeClass( 'error' );\n\t\t\t\t} else {\n\t\t\t\t\tcard_field.removeClass( 'valid' );\n\t\t\t\t\tcard_field.addClass( 'error' );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tfunction edd_format_card_number( form ) {\n\t\tconst card_number = form.find( '.card-number' ),\n\t\t\tcard_cvc = form.find( '.card-cvc' ),\n\t\t\tcard_expiry = form.find( '.card-expiry' );\n\n\t\tif ( card_number.length && 'function' === typeof card_number.payment ) {\n\t\t\tcard_number.payment( 'formatCardNumber' );\n\t\t\tcard_cvc.payment( 'formatCardCVC' );\n\t\t\tcard_expiry.payment( 'formatCardExpiry' );\n\t\t}\n\t}\n\n\tfunction apply_discount( event ) {\n\t\tevent.preventDefault();\n\n\t\tconst $this = $( this ),\n\t\t\tdiscount_code = $( '#edd-discount' ).val(),\n\t\t\tedd_discount_loader = $( '#edd-discount-loader' );\n\n\t\tif ( discount_code == '' || discount_code == edd_global_vars.enter_discount ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst postData = {\n\t\t\taction: 'edd_apply_discount',\n\t\t\tcode: discount_code,\n\t\t\tform: $( '#edd_purchase_form' ).serialize(),\n\t\t};\n\n\t\t$( '#edd-discount-error-wrap' ).html( '' ).hide();\n\t\tedd_discount_loader.show();\n\n\t\t$.ajax( {\n\t\t\ttype: 'POST',\n\t\t\tdata: postData,\n\t\t\tdataType: 'json',\n\t\t\turl: edd_global_vars.ajaxurl,\n\t\t\txhrFields: {\n\t\t\t\twithCredentials: true,\n\t\t\t},\n\t\t\tsuccess: function( discount_response ) {\n\t\t\t\tif ( discount_response ) {\n\t\t\t\t\tif ( discount_response.msg == 'valid' ) {\n\t\t\t\t\t\t$( '.edd_cart_discount' ).html( discount_response.html );\n\t\t\t\t\t\t$( '.edd_cart_discount_row' ).show();\n\n\t\t\t\t\t\t$( '.edd_cart_amount' ).each( function() {\n\t\t\t\t\t\t\t// Format discounted amount for display.\n\t\t\t\t\t\t\t$( this ).text( discount_response.total );\n\t\t\t\t\t\t\t// Set data attribute to new (unformatted) discounted amount.'\n\t\t\t\t\t\t\t$( this ).data( 'total', discount_response.total_plain );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t$( '#edd-discount', $checkout_form_wrap ).val( '' );\n\n\t\t\t\t\t\trecalculate_taxes();\n\n\t\t\t\t\t\tconst inputs = $( '#edd_cc_fields .edd-input, #edd_cc_fields .edd-select,#edd_cc_address .edd-input, #edd_cc_address .edd-select,#edd_payment_mode_select .edd-input, #edd_payment_mode_select .edd-select' );\n\n\t\t\t\t\t\tif ( '0.00' == discount_response.total_plain ) {\n\t\t\t\t\t\t\t$( '#edd_cc_fields,#edd_cc_address,#edd_payment_mode_select' ).slideUp();\n\t\t\t\t\t\t\tinputs.removeAttr( 'required' );\n\t\t\t\t\t\t\t$( 'input[name=\"edd-gateway\"]' ).val( 'manual' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif ( ! inputs.is( '.card-address-2' ) ) {\n\t\t\t\t\t\t\t\tinputs.attr( 'required', 'required' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t$( '#edd_cc_fields,#edd_cc_address' ).slideDown();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$body.trigger( 'edd_discount_applied', [ discount_response ] );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$( '#edd-discount-error-wrap' ).html( '<span class=\"edd_error\">' + discount_response.msg + '</span>' );\n\t\t\t\t\t\t$( '#edd-discount-error-wrap' ).show();\n\t\t\t\t\t\t$body.trigger( 'edd_discount_invalid', [ discount_response ] );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif ( window.console && window.console.log ) {\n\t\t\t\t\t\tconsole.log( discount_response );\n\t\t\t\t\t}\n\t\t\t\t\t$body.trigger( 'edd_discount_failed', [ discount_response ] );\n\t\t\t\t}\n\t\t\t\tedd_discount_loader.hide();\n\t\t\t},\n\t\t} ).fail( function( data ) {\n\t\t\tif ( window.console && window.console.log ) {\n\t\t\t\tconsole.log( data );\n\t\t\t}\n\t\t} );\n\n\t\treturn false;\n\t}\n\n\tfunction remove_discount( event ) {\n\t\tconst $this = $( this ),\n\t\t\tpostData = {\n\t\t\t\taction: 'edd_remove_discount',\n\t\t\t\tcode: $this.data( 'code' ),\n\t\t\t};\n\n\t\t$.ajax( {\n\t\t\ttype: 'POST',\n\t\t\tdata: postData,\n\t\t\tdataType: 'json',\n\t\t\turl: edd_global_vars.ajaxurl,\n\t\t\txhrFields: {\n\t\t\t\twithCredentials: true,\n\t\t\t},\n\t\t\tsuccess: function( discount_response ) {\n\t\t\t\tconst zero = '0' + edd_global_vars.decimal_separator + '00';\n\n\t\t\t\t$( '.edd_cart_amount' ).each( function() {\n\t\t\t\t\tif ( edd_global_vars.currency_sign + zero == $( this ).text() || zero + edd_global_vars.currency_sign == $( this ).text() ) {\n\t\t\t\t\t\t// We're removing a 100% discount code so we need to force the payment gateway to reload\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Format discounted amount for display.\n\t\t\t\t\t$( this ).text( discount_response.total );\n\t\t\t\t\t// Set data attribute to new (unformatted) discounted amount.'\n\t\t\t\t\t$( this ).data( 'total', discount_response.total_plain );\n\t\t\t\t} );\n\n\t\t\t\t$( '.edd_cart_discount' ).html( discount_response.html );\n\n\t\t\t\tif ( discount_response.discounts && 0 === discount_response.discounts.length ) {\n\t\t\t\t\t$( '.edd_cart_discount_row' ).hide();\n\t\t\t\t}\n\n\t\t\t\trecalculate_taxes();\n\n\t\t\t\t$( '#edd_cc_fields,#edd_cc_address' ).slideDown();\n\n\t\t\t\t$body.trigger( 'edd_discount_removed', [ discount_response ] );\n\t\t\t},\n\t\t} ).fail( function( data ) {\n\t\t\tif ( window.console && window.console.log ) {\n\t\t\t\tconsole.log( data );\n\t\t\t}\n\t\t} );\n\n\t\treturn false;\n\t}\n\n\tfunction update_item_quantities( event ) {\n\t\tconst $this = $( this ),\n\t\t\tquantity = $this.val(),\n\t\t\tkey = $this.data( 'key' ),\n\t\t\tdownload_id = $this.closest( '.edd_cart_item' ).data( 'download-id' ),\n\t\t\toptions = $this.parent().find( 'input[name=\"edd-cart-download-' + key + '-options\"]' ).val();\n\n\t\tconst edd_cc_address = $( '#edd_cc_address' );\n\t\tconst billing_country = edd_cc_address.find( '#billing_country' ).val(),\n\t\t\tcard_state = edd_cc_address.find( '#card_state' ).val();\n\n\t\tconst postData = {\n\t\t\taction: 'edd_update_quantity',\n\t\t\tquantity: quantity,\n\t\t\tdownload_id: download_id,\n\t\t\toptions: options,\n\t\t\tbilling_country: billing_country,\n\t\t\tcard_state: card_state,\n\t\t};\n\n\t\t//edd_discount_loader.show();\n\n\t\t$.ajax( {\n\t\t\ttype: 'POST',\n\t\t\tdata: postData,\n\t\t\tdataType: 'json',\n\t\t\turl: edd_global_vars.ajaxurl,\n\t\t\txhrFields: {\n\t\t\t\twithCredentials: true,\n\t\t\t},\n\t\t\tsuccess: function( response ) {\n\t\t\t\t$( '.edd_cart_subtotal_amount' ).each( function() {\n\t\t\t\t\t$( this ).text( response.subtotal );\n\t\t\t\t} );\n\n\t\t\t\t$( '.edd_cart_tax_amount' ).each( function() {\n\t\t\t\t\t$( this ).text( response.taxes );\n\t\t\t\t} );\n\n\t\t\t\t$( '.edd_cart_amount' ).each( function() {\n\t\t\t\t\t$( this ).text( response.total );\n\t\t\t\t\t$body.trigger( 'edd_quantity_updated', [ response ] );\n\t\t\t\t} );\n\t\t\t},\n\t\t} ).fail( function( data ) {\n\t\t\tif ( window.console && window.console.log ) {\n\t\t\t\tconsole.log( data );\n\t\t\t}\n\t\t} );\n\n\t\treturn false;\n\t}\n\n\t// Expose some functions or variables to window.EDD_Checkout object\n\treturn {\n\t\tinit: init,\n\t\trecalculate_taxes: recalculate_taxes,\n\t};\n}( window.jQuery ) );\n\n// init on document.ready\nwindow.jQuery( document ).ready( EDD_Checkout.init );\n"],"sourceRoot":""}