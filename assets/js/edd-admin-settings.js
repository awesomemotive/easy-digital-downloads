(()=>{var e={238:(e,t,n)=>{var a=n(1669);a(document).ready((function(e){if("undefined"==typeof eddPayPalConnectVars)return;let t=document.getElementById("edd-paypal-commerce-errors");if(t&&t.length){for(;t.firstChild;)t.removeChild(t.firstChild);t.classList.remove("notice notice-error")}if(eddPayPalConnectVars.isConnected){let t=document.getElementById("edd-paypal-commerce-reconnect");t&&t.addEventListener("click",(function(n){n.preventDefault();let a=e("#edd-paypal-commerce-errors");a.empty().removeClass("notice notice-error"),t.classList.add("updating-message"),t.disabled=!0,e.post(ajaxurl,{action:"edd_paypal_commerce_reconnect",_ajax_nonce:t.dataset.nonce}).done((function(){})).fail((function(e){console.log("Reconnect failure",e.data),t.classList.remove("updating-message"),t.disabled=!1,a.html("<p>"+e.data+"</p>").addClass("notice notice-error")}))})),function t(){let n=document.getElementById("edd-paypal-commerce-connect-wrap");n&&e.post(ajaxurl,{action:"edd_paypal_commerce_get_account_info",_ajax_nonce:n.getAttribute("data-nonce")},(function(a){let d="<p>"+eddPayPalConnectVars.defaultError+"</p>";a.success?(d=a.data.account_status,a.data.actions&&a.data.actions.length&&(d+='<p class="edd-paypal-connect-actions">'+a.data.actions.join(" ")+"</p>"),a.data.disconnect_links&&a.data.disconnect_links.length&&(document.getElementById("edd-paypal-disconnect").innerHTML=a.data.disconnect_links.join(" "))):a.data&&a.data.message&&(d=a.data.message),n.innerHTML=d,n.classList.remove("notice-success","notice-warning","notice-error","loading");var s=a.success&&a.data.status?"notice-"+a.data.status:"notice-error";n.classList.add(s);let o=document.getElementById("edd-paypal-commerce-get-help");"success"===a.data.status?(o.classList.add("edd-hidden"),o.classList.remove("button","button-secondary")):(o.classList.remove("edd-hidden"),o.classList.add("button","button-secondary")),function(){let n=document.querySelectorAll(".edd-paypal-connect-action");n&&n.length&&n.forEach((function(n){n.addEventListener("click",(function(n){n.preventDefault();let a=n.target;a.disabled=!0,a.classList.add("updating-message");let d=document.getElementById("edd-paypal-commerce-connect-wrap");d&&d.length&&d.remove(),e.post(ajaxurl,{action:a.dataset.action,_ajax_nonce:a.dataset.nonce}).done((function(){t()})).fail((function(e){console.log("Failure",e.data),a.disabled=!1,a.classList.remove("updating-message"),d.html("<p>"+e.data+"</p>").addClass("edd-paypal-actions-error-wrap")}))}))}))}()}))}()}else{if(document.getElementById("edd-paypal-commerce-link")){let e=document.createElement("script");e.id="edd-paypal-commerce-onboarding",e.src="https://www.paypal.com/webapps/merchantboarding/js/lib/lightbox/partner.js",document.body.appendChild(e),setTimeout((()=>{"undefined"!==window.PAYPAL.apps.Signup&&window.PAYPAL.apps.Signup.render()}),1e3)}window.eddPayPalOnboardingCallback=function(e,t){let n=document.getElementById("edd-paypal-commerce-link"),d=document.getElementById("edd-paypal-commerce-errors");a.post(ajaxurl,{action:"edd_paypal_commerce_get_access_token",auth_code:e,share_id:t,_ajax_nonce:n.dataset.nonce}).done((function(){n.classList.add("disabled","updating-message"),n.disabled=!0})).fail((function(e){d.innerHTML="<p>"+e.data+"</p>",d.classList.add("notice","notice-error");let t=document.getElementById("edd-paypal-commerce-get-help");t.classList.remove("edd-hidden"),t.classList.add("button","button-secondary")}))}}}))},1669:e=>{"use strict";e.exports=jQuery},7906:()=>{function e(e,t){document.querySelectorAll(".edd-requires__"+e).forEach((function(e){e.classList.remove("edd-hidden--required"),e.classList.toggle("edd-hidden",!t),e.classList.contains("edd-hidden")&&e.classList.add("edd-hidden--required")}))}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("[data-edd-requirement]").forEach((function(t){const n=t.getAttribute("data-edd-requirement");n&&e(n,t.checked)})),document.addEventListener("change",(function(t){const n=t.target;if("checkbox"!==n.type||!n.hasAttribute("data-edd-requirement"))return;const a=n.getAttribute("data-edd-requirement");a&&e(a,n.checked)}))}))}},t={};function n(a){var d=t[a];if(void 0!==d)return d.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}(()=>{"use strict";var e=n(1669);n(238),n(7906);var t=n(1669),a=n(1669);const d={init:function(){this.general(),this.misc(),this.gateways(),this.emails(),this.checkout()},general:function(){const e=t(".edd-color-picker");var n;e.length&&e.wpColorPicker(),window.formfield="",t(document.body).on("click",".edd_settings_upload_button",(function(e){e.preventDefault();const a=t(this);window.formfield=t(a.data("input")),n||((n=wp.media.frames.file_frame=wp.media({title:a.data("uploader_title"),library:{type:"image"},button:{text:a.data("uploader_button_text")},multiple:!1})).on("menu:render:default",(function(e){e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.unset("playlist"),e.unset("video-playlist"),e.set({})})),n.on("select",(function(){n.state().get("selection").each((function(e,t){e=e.toJSON(),window.formfield.val(e.url)}))}))),n.open()})),window.formfield=""},misc:function(){const e=t('select[name="edd_settings[download_method]"]'),n=e.parent().parent().next(),a=t('input[name="edd_settings[allow_tracking]"]');"direct"===e.val()&&(n.css("opacity","0.4"),n.find("input").prop("checked",!1).prop("disabled",!0)),e.on("change",(function(){"direct"===t(this).val()?(n.css("opacity","0.4"),n.find("input").prop("checked",!1).prop("disabled",!0)):(n.find("input").prop("disabled",!1),n.css("opacity","1"))})),a.on("change",(function(){t(".allow_tracking.edd-heart").toggleClass("edd-hidden")}))},gateways:function(){t('#edd-payment-gateways input[type="checkbox"]').on("change",(function(){const e=t(this).data("gateway-key"),n=t("#edd_settings\\[default_gateway\\]"),a=n.find('option[value="'+e+'"]');a.prop("disabled",(function(e,t){return!t})),a.prop("selected")&&a.prop("selected",!1),n.trigger("chosen:updated")})),this.emptyCartBehavior()},emptyCartBehavior:function(){const e=t("#edd_settings\\[empty_cart_behavior\\]");function n(){const n=e.val(),a=t("#edd_settings_empty_cart_message").closest("tr"),d=t("#edd_settings\\[empty_cart_redirect_page\\]").closest("tr"),s=t("#edd_settings\\[empty_cart_redirect_url\\]").closest("tr");a.addClass("edd-hidden"),d.addClass("edd-hidden"),s.addClass("edd-hidden"),"message"===n?a.removeClass("edd-hidden"):"redirect_page"===n?d.removeClass("edd-hidden"):"redirect_url"===n&&s.removeClass("edd-hidden")}e.length&&("undefined"!=typeof edd_vars&&void 0!==edd_vars.is_pro?edd_vars.is_pro?(n(),e.on("change",n)):(n(),e.on("change",(function(){const e=t(this).val();"redirect_page"===e||"redirect_url"===e?(t(this).val("message"),n(),"undefined"!=typeof edd_promo_admin&&edd_promo_admin.show_notice("empty-cart-behavior")):n()}))):(n(),e.on("change",n)))},emails:function(){t("#edd-recapture-connect").on("click",(function(n){var a;n.preventDefault(),t(this).html(edd_vars.wait+' <span class="edd-loading"></span>'),document.body.style.cursor="wait",a={action:"edd_recapture_remote_install",nonce:document.getElementById("edd-recapture-connect-nonce").value},e.post(ajaxurl,a,(function(e){!e.success&&e.data&&confirm(e.data.error)?location.reload():window.location.href="https://recapture.io/register"}))}));const n=t('select[name="edd_settings[email_summary_recipient]"]'),a=n.val(),d=t('textarea[name="edd_settings[email_summary_custom_recipients]"]').parents("tr"),s=t("#edd-send-test-summary-save-changes-notice"),o=t("#edd-send-test-summary"),c=t("#edd-send-test-summary-notice");n.on("change",(function(){d.toggleClass("hidden"),o.removeClass("hidden updated-message"),c.empty(),s.empty(),a!==n.val()&&(o.addClass("hidden"),s.html('<div class="notice notice-info"><p>'+edd_vars.test_email_save_changes+"</p></div>"))})),o.on("click",(function(e){e.preventDefault(),t.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{action:"edd_send_test_email_summary"},beforeSend:function(){c.empty(),o.addClass("updating-message").prop("disabled",!0)},success:function(e){"error"==e.status?c.html('<div class="updated '+e.status+'"><p>'+e.message+"</p></div>"):(o.addClass("updated-message"),setTimeout((function(){o.removeClass("updated-message")}),3e3))}}).fail((function(e){window.console&&window.console.log&&console.log(e)})).done((function(e){o.removeClass("updating-message").prop("disabled",!1)}))}))},checkout:function(){const e=document.getElementById("edd_settings[logged_in_only]"),t=document.getElementById("edd_settings[show_register_form]");if(!e||!t)return;const n=()=>{t.querySelectorAll("option").forEach((n=>{n.disabled="auto"===e.value&&["registration","both"].includes(n.value),n.disabled&&n.value===t.value&&(t.value="none")}))};n(),e.addEventListener("change",n)}};a(document).ready((function(e){d.init()}))})()})();