(()=>{var e={311:e=>{"use strict";e.exports=jQuery}},t={};function i(n){var c=t[n];if(void 0!==c)return c.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}(()=>{var e=i(311),t=i(311),n={vars:{customer_card_wrap_editable:e("#edit-customer-info .editable"),customer_card_wrap_edit_item:e("#edit-customer-info .edit-item"),user_id:e('input[name="customerinfo[user_id]"]')},init:function(){this.edit_customer(),this.add_email(),this.user_search(),this.remove_user(),this.cancel_edit(),this.change_country(),this.delete_checked()},edit_customer:function(){e(document.body).on("click","#edit-customer",(function(e){e.preventDefault(),n.vars.customer_card_wrap_editable.hide(),n.vars.customer_card_wrap_edit_item.show().css("display","block")}))},add_email:function(){e(document.body).on("click","#add-customer-email",(function(t){t.preventDefault();const i=e(this),n=i.parent().parent().parent().parent(),c={edd_action:"customer-add-email",customer_id:n.find('input[name="customer-id"]').val(),email:n.find('input[name="additional-email"]').val(),primary:n.find('input[name="make-additional-primary"]').is(":checked"),_wpnonce:n.find('input[name="add_email_nonce"]').val()};n.parent().find(".notice-container").remove(),n.find(".spinner").css("visibility","visible"),i.attr("disabled",!0),e.post(ajaxurl,c,(function(e){setTimeout((function(){!0===e.success?window.location.href=e.redirect:(i.attr("disabled",!1),n.before('<div class="notice-container"><div class="notice notice-error inline"><p>'+e.message+"</p></div></div>"),n.find(".spinner").css("visibility","hidden"))}),342)}),"json")}))},user_search:function(){e(document.body).on("click.eddSelectUser",".edd_user_search_results a",(function(t){t.preventDefault();const i=e(this).data("userid");n.vars.user_id.val(i)}))},remove_user:function(){e(document.body).on("click","#disconnect-customer",(function(t){if(t.preventDefault(),confirm(edd_vars.disconnect_customer)){const t={edd_action:"disconnect-userid",customer_id:e('input[name="customerinfo[id]"]').val(),_wpnonce:e("#edit-customer-info #_wpnonce").val()};e.post(ajaxurl,t,(function(e){window.location.href=window.location.href}),"json")}}))},cancel_edit:function(){e(document.body).on("click","#edd-edit-customer-cancel",(function(t){t.preventDefault(),n.vars.customer_card_wrap_edit_item.hide(),n.vars.customer_card_wrap_editable.show(),e(".edd_user_search_results").html("")}))},change_country:function(){e('select[name="customerinfo[country]"]').change((function(){const t=e(this),i=e(':input[name="customerinfo[region]"]'),n={action:"edd_get_shop_states",country:t.val(),nonce:t.data("nonce"),field_name:"customerinfo[region]"};return e.post(ajaxurl,n,(function(e){console.log(e),"nostates"===e?i.replaceWith('<input type="text" name="'+n.field_name+'" value="" class="edd-edit-toggles medium-text"/>'):i.replaceWith(e)})),!1}))},delete_checked:function(){e("#edd-customer-delete-confirm").change((function(){const t=e("#edd-customer-delete-records"),i=e("#edd-delete-customer");e(this).prop("checked")?(t.attr("disabled",!1),i.attr("disabled",!1)):(t.attr("disabled",!0),t.prop("checked",!1),i.attr("disabled",!0))}))}};t(document).ready((function(e){n.init()}))})()})();