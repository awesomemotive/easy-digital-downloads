jQuery(document).ready(function(b){b("body").change("select[name=billing_country]",function(){if(b("select[name=billing_country]").val()=="US"){b("#card_state_other").css("display","none");b("#card_state_us").css("display","");b("#card_state_ca").css("display","none")}else{if(b("select[name=billing_country]").val()=="CA"){b("#card_state_other").css("display","none");b("#card_state_us").css("display","none");b("#card_state_ca").css("display","")}else{b("#card_state_other").css("display","");b("#card_state_us").css("display","none");b("#card_state_ca").css("display","none")}}});b("body").on("focusout",".edd-do-validate .card-number",function(){var c=b(this);c.validateCreditCard(function(d){if(d.card_type==null){b(".card-type").addClass("off");c.removeClass("valid");c.addClass("error")}else{b(".card-type").removeClass("off");b(".card-type").addClass(d.card_type.name);if(d.length_valid&&d.luhn_valid){c.addClass("valid");c.removeClass("error")}else{c.removeClass("valid");c.addClass("error")}}})});b("body").on("click","#edd_tax_opt_in",function(){var c={action:b(this).attr("checked")?"edd_local_tax_opt_in":"edd_local_tax_opt_out",nonce:edd_global_vars.checkout_nonce};b.ajax({type:"POST",data:c,dataType:"json",url:edd_global_vars.ajaxurl,success:function(d){b("#edd_checkout_cart").replaceWith(d.html);b(".edd_cart_amount").html(d.total)}}).fail(function(d){console.log(d)})});b("body").on("submit","#edd_payment_mode",function(){var c=b("#edd-gateway option:selected").val();if(c==0){alert(edd_global_vars.no_gateway);return false}});var a=b(".edd_cart_amount").text();b("#edd_checkout_form_wrap").on("change","#edd-email",function(c){b("#edd-discount").val("")});b("#edd_checkout_form_wrap").on("focusout","#edd-discount",function(d){var f=b(this),g=b("#edd-discount").val(),e=b("#edd-email").val();edd_user=b("#edd_user_login").val();if(g==""){return false}if(e==""&&e!="undefined"){alert(edd_global_vars.no_email);return false}if(e=="undefined"&&edd_user==""){alert(edd_global_vars.no_username);return false}var c={action:"edd_apply_discount",code:g,email:e,user:edd_user,nonce:edd_global_vars.checkout_nonce};b("#edd-discount-loader").show();b.ajax({type:"POST",data:c,dataType:"json",url:edd_global_vars.ajaxurl,success:function(h){if(h){if(h.msg=="valid"){b(".edd_cart_discount").html(h.html);b(".edd_cart_discount_row").show();b(".edd_cart_amount").text(h.total)}else{alert(h.msg)}}else{console.log(h)}b("#edd-discount-loader").hide()}}).fail(function(h){console.log(h)});return false})});