{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/js/admin/tools/index.js"],"names":["EDD_Tools","init","revoke_api_key","regenerate_api_key","create_api_key","recount_stats","$","document","body","on","e","confirm","edd_vars","input","css","user_id","val","length","export_form","selected_type","data","submit_button","products","find","remove","removeClass","attr","hide","show","append","notice_wrap","html","reset_stats_warn","addClass","checked","is","removeAttr","submit","selection","is_confirmed","has_errors","batch_export_no_class","selected_download","batch_export_no_reqs","jQuery","ready"],"mappings":"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","file":"assets/js/edd-admin-tools.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./assets/js/admin/tools/index.js\");\n","/**\n * Tools screen JS\n */\nconst EDD_Tools = {\n\n\tinit: function() {\n\t\tthis.revoke_api_key();\n\t\tthis.regenerate_api_key();\n\t\tthis.create_api_key();\n\t\tthis.recount_stats();\n\t},\n\n\trevoke_api_key: function() {\n\t\t$( document.body ).on( 'click', '.edd-revoke-api-key', function( e ) {\n\t\t\treturn confirm( edd_vars.revoke_api_key );\n\t\t} );\n\t},\n\tregenerate_api_key: function() {\n\t\t$( document.body ).on( 'click', '.edd-regenerate-api-key', function( e ) {\n\t\t\treturn confirm( edd_vars.regenerate_api_key );\n\t\t} );\n\t},\n\tcreate_api_key: function() {\n\t\t$( document.body ).on( 'submit', '#api-key-generate-form', function( e ) {\n\t\t\tconst input = $( 'input[type=\"text\"][name=\"user_id\"]' );\n\n\t\t\tinput.css( 'border-color', '#ddd' );\n\n\t\t\tconst user_id = input.val();\n\t\t\tif ( user_id.length < 1 || user_id === 0 ) {\n\t\t\t\tinput.css( 'border-color', '#ff0000' );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\t},\n\trecount_stats: function() {\n\t\t$( document.body ).on( 'change', '#recount-stats-type', function() {\n\t\t\tconst export_form = $( '#edd-tools-recount-form' ),\n\t\t\t\tselected_type = $( 'option:selected', this ).data( 'type' ),\n\t\t\t\tsubmit_button = $( '#recount-stats-submit' ),\n\t\t\t\tproducts = $( '#tools-product-dropdown' );\n\n\t\t\t// Reset the form\n\t\t\texport_form.find( '.notice-wrap' ).remove();\n\t\t\tsubmit_button.removeClass( 'button-disabled' ).attr( 'disabled', false );\n\t\t\tproducts.hide();\n\t\t\t$( '.edd-recount-stats-descriptions span' ).hide();\n\n\t\t\tif ( 'recount-download' === selected_type ) {\n\t\t\t\tproducts.show();\n\t\t\t\tproducts.find( '.edd-select-chosen' ).css( 'width', 'auto' );\n\t\t\t} else if ( 'reset-stats' === selected_type ) {\n\t\t\t\texport_form.append( '<div class=\"notice-wrap\"></div>' );\n\t\t\t\tconst notice_wrap = export_form.find( '.notice-wrap' );\n\t\t\t\tnotice_wrap.html( '<div class=\"notice notice-warning\"><p><input type=\"checkbox\" id=\"confirm-reset\" name=\"confirm_reset_store\" value=\"1\" /> <label for=\"confirm-reset\">' + edd_vars.reset_stats_warn + '</label></p></div>' );\n\n\t\t\t\t$( '#recount-stats-submit' ).addClass( 'button-disabled' ).attr( 'disabled', 'disabled' );\n\t\t\t} else {\n\t\t\t\tproducts.hide();\n\t\t\t\tproducts.val( 0 );\n\t\t\t}\n\n\t\t\t$( '#' + selected_type ).show();\n\t\t} );\n\n\t\t$( document.body ).on( 'change', '#confirm-reset', function() {\n\t\t\tconst checked = $( this ).is( ':checked' );\n\t\t\tif ( checked ) {\n\t\t\t\t$( '#recount-stats-submit' ).removeClass( 'button-disabled' ).removeAttr( 'disabled' );\n\t\t\t} else {\n\t\t\t\t$( '#recount-stats-submit' ).addClass( 'button-disabled' ).attr( 'disabled', 'disabled' );\n\t\t\t}\n\t\t} );\n\n\t\t$( '#edd-tools-recount-form' ).submit( function( e ) {\n\t\t\tconst selection = $( '#recount-stats-type' ).val(),\n\t\t\t\texport_form = $( this ),\n\t\t\t\tselected_type = $( 'option:selected', this ).data( 'type' );\n\n\t\t\tif ( 'reset-stats' === selected_type ) {\n\t\t\t\tconst is_confirmed = $( '#confirm-reset' ).is( ':checked' );\n\t\t\t\tif ( is_confirmed ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\thas_errors = true;\n\t\t\t}\n\n\t\t\texport_form.find( '.notice-wrap' ).remove();\n\t\t\texport_form.append( '<div class=\"notice-wrap\"></div>' );\n\n\t\t\tvar notice_wrap = export_form.find( '.notice-wrap' ),\n\t\t\t\thas_errors = false;\n\n\t\t\tif ( null === selection || 0 === selection ) {\n\t\t\t\t// Needs to pick a method edd_vars.batch_export_no_class\n\t\t\t\tnotice_wrap.html( '<div class=\"updated error\"><p>' + edd_vars.batch_export_no_class + '</p></div>' );\n\t\t\t\thas_errors = true;\n\t\t\t}\n\n\t\t\tif ( 'recount-download' === selected_type ) {\n\t\t\t\tconst selected_download = $( 'select[name=\"download_id\"]' ).val();\n\t\t\t\tif ( selected_download === 0 ) {\n\t\t\t\t\t// Needs to pick download edd_vars.batch_export_no_reqs\n\t\t\t\t\tnotice_wrap.html( '<div class=\"updated error\"><p>' + edd_vars.batch_export_no_reqs + '</p></div>' );\n\t\t\t\t\thas_errors = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( has_errors ) {\n\t\t\t\texport_form.find( '.button-disabled' ).removeClass( 'button-disabled' );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\t},\n};\n\njQuery( document ).ready( function( $ ) {\n\tEDD_Tools.init();\n} );\n"],"sourceRoot":""}