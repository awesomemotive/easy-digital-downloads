!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=55)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var o=n(12),i=n(25);t.exports=n(3)?function(t,e,n){return o.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){var o=n(20)("wks"),i=n(7),r=n(0).Symbol,c="function"==typeof r;(t.exports=function(t){return o[t]||(o[t]=c&&r[t]||(c?r:i)("Symbol."+t))}).store=o},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+o).toString(36))}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var o=n(24);t.exports=function(t,e,n){if(o(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,i){return t.call(e,n,o,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var o=n(0),i=n(2),r=n(14),c=n(7)("src"),a=Function.toString,s=(""+a).split("toString");n(4).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,n,a){var l="function"==typeof n;l&&(r(n,"name")||i(n,"name",e)),t[e]!==n&&(l&&(r(n,c)||i(n,c,t[e]?""+t[e]:s.join(String(e)))),t===o?t[e]=n:a?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[c]||a.call(this)})},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var o=n(17),i=n(32),r=n(31),c=Object.defineProperty;e.f=n(3)?Object.defineProperty:function(t,e,n){if(o(t),e=r(e,!0),o(n),i)try{return c(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var o=n(11);t.exports=function(t){return Object(o(t))}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var o=n(0),i=n(4),r=n(2),c=n(10),a=n(9),s=function(t,e,n){var l,u,d,f,h=t&s.F,p=t&s.G,m=t&s.S,v=t&s.P,g=t&s.B,w=p?o:m?o[e]||(o[e]={}):(o[e]||{}).prototype,x=p?i:i[e]||(i[e]={}),b=x.prototype||(x.prototype={});for(l in p&&(n=e),n)d=((u=!h&&w&&void 0!==w[l])?w:n)[l],f=g&&u?a(d,o):v&&"function"==typeof d?a(Function.call,d):d,w&&c(w,l,d,t&s.U),x[l]!=d&&r(x,l,f),v&&b[l]!=d&&(b[l]=d)};o.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){"use strict";var o=n(15),i=n(30)(5),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),o(o.P+o.F*r,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(18)("find")},function(t,e,n){var o=n(1);t.exports=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var o=n(5)("unscopables"),i=Array.prototype;void 0==i[o]&&n(2)(i,o,{}),t.exports=function(t){i[o][t]=!0}},function(t,e){t.exports=!1},function(t,e,n){var o=n(4),i=n(0),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:o.version,mode:n(19)?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:n)(t)}},function(t,e,n){var o=n(21),i=Math.min;t.exports=function(t){return t>0?i(o(t),9007199254740991):0}},function(t,e,n){var o=n(8);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==o(t)?t.split(""):Object(t)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var o=n(1),i=n(0).document,r=o(i)&&o(i.createElement);t.exports=function(t){return r?i.createElement(t):{}}},function(t,e,n){var o=n(8);t.exports=Array.isArray||function(t){return"Array"==o(t)}},function(t,e,n){var o=n(1),i=n(27),r=n(5)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),o(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var o=n(28);t.exports=function(t,e){return new(o(t))(e)}},function(t,e,n){var o=n(9),i=n(23),r=n(13),c=n(22),a=n(29);t.exports=function(t,e){var n=1==t,s=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d,h=e||a;return function(e,a,p){for(var m,v,g=r(e),w=i(g),x=o(a,p,3),b=c(w.length),y=0,_=n?h(e,b):s?h(e,0):void 0;b>y;y++)if((f||y in w)&&(v=x(m=w[y],y,g),t))if(n)_[y]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return y;case 2:_.push(m)}else if(u)return!1;return d?-1:l||u?u:_}}},function(t,e,n){var o=n(1);t.exports=function(t,e){if(!o(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!o(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!o(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!o(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports=!n(3)&&!n(6)(function(){return 7!=Object.defineProperty(n(26)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var o={disable_search_threshold:13,search_contains:!0,inherit_select_classes:!0,single_backstroke_delete:!1,placeholder_text_single:edd_vars.one_option,placeholder_text_multiple:edd_vars.one_or_more_option,no_results_text:edd_vars.no_results_text},i=function(t){var e=o;return t.data("search-type")&&delete e.disable_search_threshold,e}},,,function(t,e,n){var o=n(12).f,i=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in i||n(3)&&o(i,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},function(t,e,n){var o=n(40);t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){o(t,e,n[e])})}return t}},,,function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},,,,,,,,,,,,,,,function(t,e,n){"use strict";n.r(e);n(36);var o=Backbone.Model.extend({defaults:{id:"",country:"",region:"",global:!0,amount:0,status:"active",unsaved:!1,selected:!1},formattedAmount:function(){var t=0;return this.get("amount")&&(t=parseFloat(this.get("amount")).toFixed(2)),"".concat(t,"%")}}),i=Backbone.Collection.extend({model:o,initialize:function(){this.showAll=!1,this.selected=[]}}),r=wp.Backbone.View.extend({template:wp.template("edd-admin-tax-rates-table-meta"),events:{'change [type="checkbox"]':"selectAll"},selectAll:function(t){var e=this,n=t.target.checked;_.each(this.collection.models,function(t){t.set("selected",n),e.collection.selected.push(t.cid)})}}),c=wp.Backbone.View.extend({tagName:"tr",className:"edd-tax-rate-row edd-tax-rate-row--is-empty",template:wp.template("edd-admin-tax-rates-table-row-empty")}),a=n(37),s=n.n(a),l=wp.Backbone.View.extend({tagName:"tr",className:function(){return"edd-tax-rate-row edd-tax-rate-row--"+this.model.get("status")},template:wp.template("edd-admin-tax-rates-table-row"),events:{"click .remove":"removeRow","click .activate":"activateRow","click .deactivate":"deactivateRow",'change [type="checkbox"]':"selectRow"},initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){this.$el.html(this.template(s()({},this.model.toJSON(),{formattedAmount:this.model.formattedAmount()}))),this.$el.attr("class",_.result(this,"className"))},removeRow:function(t){t.preventDefault(),this.collection.remove(this.model)},activateRow:function(t){t.preventDefault(),this.model.set("status","active")},deactivateRow:function(t){t.preventDefault(),this.model.set("status","inactive")},selectRow:function(t){var e=this;t.target.checked?this.collection.selected.push(this.model.cid):this.collection.selected=_.reject(this.collection.selected,function(t){return t===e.model.cid})}}),u=wp.Backbone.View.extend({tagName:"tbody",initialize:function(){this.listenTo(this.collection,"add",this.render),this.listenTo(this.collection,"remove",this.render),this.listenTo(this.collection,"filtered change",this.filtered)},render:function(){var t=this;if(this.views.remove(),0===this.collection.models.length)return this.views.add(new c);_.each(this.collection.models,function(e){t.views.add(new l({collection:t.collection,model:e}))})},filtered:function(){this.collection.where({status:"inactive"}).length!==this.collection.models.length||this.collection.showAll?this.render():this.views.add(new c)}}),d=(n(16),n(33)),f=wp.Backbone.View.extend({initialize:function(t){_.extend(this,t)},render:function(){this.global||("nostates"===this.states?this.setElement('<input type="text" id="tax_rate_region" />'):(this.$el.html(this.states),this.$el.find("select").each(function(){var t=$(this);t.chosen(Object(d.a)(t))})))}}),h=wp.Backbone.View.extend({tagName:"tfoot",className:"add-new",template:wp.template("edd-admin-tax-rates-table-add"),events:{"click button":"addTaxRate","change #tax_rate_country":"setCountry","keyup #tax_rate_region":"setRegion","change #tax_rate_region":"setRegion",'change input[type="checkbox"]':"setGlobal","keyup #tax_rate_amount":"setAmount","change #tax_rate_amount":"setAmount"},initialize:function(){this.model=new o({global:!0,unsaved:!0}),this.listenTo(this.model,"change:country",this.updateRegion),this.listenTo(this.model,"change:global",this.updateRegion)},render:function(){this.$el.html(this.template()),this.$el.find("select").each(function(){var t=$(this);t.chosen(Object(d.a)(t))})},updateRegion:function(){var t=this,e={action:"edd_get_shop_states",country:this.model.get("country"),nonce:eddTaxRates.nonce,field_name:"tax_rate_region"};$.post(ajaxurl,e,function(e){t.views.set("#tax_rate_region_wrapper",new f({states:e,global:t.model.get("global")}))})},setCountry:function(t){this.model.set("country",t.target.options[t.target.selectedIndex].value)},setRegion:function(t){var e=!1;e=t.target.value?t.target.value:t.target.options[t.target.selectedIndex].value,this.model.set("region",e)},setGlobal:function(t){this.model.set("global",t.target.checked)},setAmount:function(t){this.model.set("amount",t.target.value)},addTaxRate:function(t){t.preventDefault(),this.collection.add(_.extend(this.model.attributes,{id:this.model.cid})),this.render(),this.initialize()}}),p=wp.Backbone.View.extend({tagName:"table",className:"wp-list-table widefat fixed tax-rates",id:"edd_tax_rates",render:function(){this.views.add(new r({tagName:"thead",collection:this.collection})),this.views.add(new u({collection:this.collection})),this.views.add(new h({collection:this.collection})),this.views.add(new r({tagName:"tfoot",collection:this.collection})),this.collection.trigger("filtered")}}),m=wp.Backbone.View.extend({template:wp.template("edd-admin-tax-rates-table-bulk-actions"),events:{"click .edd-admin-tax-rates-table-filter":"filter","change .edd-admin-tax-rates-table-hide input":"showHide"},filter:function(t){var e=this;t.preventDefault();var n=document.getElementById("edd-admin-tax-rates-table-bulk-actions");_.each(this.collection.selected,function(t){e.collection.get({cid:t}).set("status",n.value)}),this.collection.trigger("filtered")},showHide:function(t){this.collection.showAll=t.target.checked,document.getElementById("edd_tax_rates").classList.toggle("has-inactive",this.collection.showAll),this.collection.trigger("filtered")}}),v=wp.Backbone.View.extend({el:"#edd-admin-tax-rates",initialize:function(){this.listenTo(this.collection,"add change",this.makeDirty),document.querySelector(".edd-settings-form #submit").addEventListener("click",this.makeClean)},render:function(){this.views.add(new m({collection:this.collection})),this.views.add(new p({collection:this.collection}))},makeDirty:function(){window.onbeforeunload=this.confirmUnload},makeClean:function(){window.onbeforeunload=null},confirmUnload:function(t){return t.preventDefault(),""}});document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("edd-tax-disabled-notice");t&&(t.classList.add("notice"),t.classList.add("notice-warning"));var e=new v({collection:new i}),n=[];_.each(eddTaxRates.rates,function(t){return n.push({id:t.id,country:t.name,region:t.description,global:"country"===t.scope,amount:t.amount,status:t.status})}),e.collection.set(n,{silent:!0}),e.render()})}]);