(()=>{var e={72:()=>{Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){let t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},1227:()=>{wp.domReady((()=>{document.querySelector(".edds-requirements-not-met")&&(document.querySelector(".edd-settings-wrap .submit").style.display="none")})),wp.domReady((()=>{const e=document.getElementById("edds-payment-gateways-stripe-unmet-requirements");if(!e)return;const t=document.querySelector('label[for="edd_settings[gateways][stripe]"]');t.parentNode.insertBefore(e,t.nextSibling);const n=document.getElementById("edd_settings[gateways][stripe]");n.disabled=!0,n.checked=!1,e.insertBefore(n,e.querySelector("p")),e.insertBefore(t,e.querySelector("p"))}))},1669:e=>{"use strict";e.exports=jQuery},2481:()=>{Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,s=new Array(n);n--;)s[n]=[t[n],e[t[n]]];return s})},4370:()=>{const e=document.querySelectorAll(".edd-stripe-payment-method-toggle");e.forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault(),function(e){for(var t,n=document.querySelectorAll(".edd-stripe-payment-method"),s=0;s<n.length;s++)n[s].style.display="none";for(t=e?document.querySelectorAll(".edd-stripe-payment-method--"+e):n,s=0;s<t.length;s++)t[s].style.display="block"}(this.dataset.toggle),e.forEach((function(e){e.classList.remove("active")})),this.classList.add("active")}))}))},4550:()=>{String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)})},7639:()=>{[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}))}},t={};function n(s){var d=t[s];if(void 0!==d)return d.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,n),o.exports}(()=>{"use strict";n(1227),n(4550),n(72),n(2481),n(7639);var e=n(1669);n(1669),wp.domReady((()=>{const t=document.getElementById("edds-stripe-connect-account"),n=document.getElementById("edds-stripe-disconnect-reconnect");if(t&&!t.hasAttribute("data-onboarding-wizard"))return function(t,n){const s={type:"POST",dataType:"json",xhrFields:{withCredentials:!0},url:window.edd_scripts&&window.edd_scripts.ajaxurl||window.ajaxurl,data:{action:"edds_stripe_connect_account_info",...n}},d=e.Deferred((function(t){t.jqXHR=e.ajax(s).done((function(e){"1"!==e&&1!==e||(e={success:!0}),"object"==typeof e&&void 0!==typeof e.success?t[e.success?"resolveWith":"rejectWith"](this,[e.data]):t.rejectWith(this,[e])})).fail((function(){t.rejectWith(this,arguments)}))})),o=d.promise();return o.abort=function(){return d.jqXHR.abort(),this},o}(0,{...t.dataset}).done((e=>{t.classList.remove("loading"),t.innerHTML=e.message,t.classList.add(`notice-${e.status}`),n.classList.remove("loading"),e.actions&&(n.innerHTML=e.actions);const s=document.getElementById("edd_settings[stripe_statement_descriptor]"),d=document.getElementById("edd_settings[stripe_statement_descriptor_prefix]");if(s.classList.remove("edd-text-loading"),d.classList.remove("edd-text-loading"),e.account){const t=e.account.settings.payments.statement_descriptor||"",n=e.account.settings.card_payments.statement_descriptor_prefix||"";s.value=t||"",d.value=n||""}})).fail((e=>{t.innerHTML=e.message,t.classList.add("notice-error")}))})),n(4370);var t=n(1669);let s,d;t(document).ready((function(){s=document.getElementById("edd_settings[test_mode]"),s&&(d=document.getElementById("edd_settings[stripe_connect_test_mode_toggle_notice]"),o.init()),t(".edds-api-key-toggle button").on("click",(function(e){e.preventDefault(),t(".edds-api-key-toggle, .edds-api-key-row").toggleClass("edd-hidden")}));const e=t(".stripe-elements-mode select");e&&e.on("change",(function(){t(".card-elements-feature").toggleClass("edd-hidden"),t(".payment-elements-feature").toggleClass("edd-hidden")}));const n=document.getElementById("edd_settings[stripe_include_purchase_summary_in_statement_descriptor]");n&&n.addEventListener("change",(function(){t(".statement-descriptor-prefix").toggleClass("edd-hidden")}))}));const o={init(){this.listeners()},listeners(){const e=this;s.addEventListener("change",(function(){if(edd_stripe_admin.stripe_enabled){if(this.checked)if("false"===edd_stripe_admin.test_key_exists)e.showNotice(d,"warning"),e.addHiddenMarker();else{e.hideNotice(d);const t=document.getElementById("edd-test-mode-toggled");t&&t.parentNode.removeChild(t)}if(!this.checked)if("false"===edd_stripe_admin.live_key_exists)e.showNotice(d,"warning"),e.addHiddenMarker();else{e.hideNotice(d);const t=document.getElementById("edd-test-mode-toggled");t&&t.parentNode.removeChild(t)}}}))},addHiddenMarker(){const e=document.getElementById("submit");e&&e.parentNode.insertAdjacentHTML("beforeend",'<input type="hidden" class="edd-hidden" id="edd-test-mode-toggled" name="edd-test-mode-toggled" />')},showNotice(e=!1,t="error"){if(!e)return;if("object"!=typeof e)return;e.className="notice inline notice-"+t;let n=document.getElementById("edd_settings[gateways][stripe]");n&&(n.checked=!1,n.disabled=!0)},hideNotice(e=!1){if(!e)return;if("object"!=typeof e)return;e.className="edd-hidden";let t=document.getElementById("edd_settings[gateways][stripe]");t&&(t.disabled=!1)}}})()})();