(()=>{var e={1669:e=>{"use strict";e.exports=jQuery},4232:()=>{const e=document.querySelector(".edd-download-editor__sections");function t(){const t=e.querySelectorAll(".edd-has-handle-actions");t.length&&(d(),t.forEach((function(e){e.querySelector(".edd__handle-actions-order--higher").addEventListener("click",(function(){const e=this.closest(".edd-has-handle-actions"),t=e.previousElementSibling;t&&t.classList.contains("edd-has-handle-actions")&&(this.disabled=!0,t.insertAdjacentElement("beforebegin",e),d())})),e.querySelector(".edd__handle-actions-order--lower").addEventListener("click",(function(){const e=this.closest(".edd-has-handle-actions"),t=e.nextElementSibling;t&&t.classList.contains("edd-has-handle-actions")&&(this.disabled=!0,e.insertAdjacentElement("beforebegin",t),d())}))})))}function d(){document.querySelectorAll(".edd-handle-actions__group").forEach((function(e){const t=e.querySelectorAll(".edd-has-handle-actions");if(!t.length)return;t.forEach((function(e){e.querySelector(".edd__handle-actions-order--higher").disabled=!1,e.querySelector(".edd__handle-actions-order--lower").disabled=!1,e.querySelector(".edd__handle-actions-order").classList.remove("edd-hidden")}));const d=t[0];d.querySelector(".edd__handle-actions-order--higher").disabled=!0,t[t.length-1].querySelector(".edd__handle-actions-order--lower").disabled=!0,1===t.length&&d.querySelector(".edd__handle-actions-order").classList.add("edd-hidden")}))}e&&t(),["edd_repeatable_row_change","edd_download_type_changed"].forEach((function(e){document.addEventListener(e,(function(e){t()}),!1)}))},4930:()=>{document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("_edd_product_type");e&&e.addEventListener("change",(function(e){const t=e.target.value,d=document.getElementById("edd_product_files"),n=document.getElementById("edd_download_editor__files-nav-item"),a=document.getElementById("edd_variable_pricing");n.classList.add("ajax--loading");const i=new FormData;i.append("action","edd_swap_download_type"),i.append("product_type",t),i.append("post_id",edd_vars.post_id),i.append("has_variable_pricing",a&&a.checked),fetch(ajaxurl,{method:"POST",body:i}).then((e=>e.json())).then((e=>{if(e.success){d.innerHTML=e.data.html;const a=n.querySelector(".label");a&&(a.textContent=e.data.label),document.dispatchEvent(new CustomEvent("edd_download_type_changed",{detail:{productType:t}}))}})).catch((e=>console.error("Error:",e))).finally((()=>{n.classList.remove("ajax--loading")}))}))}))},5815:()=>{const e=document.getElementById("edd_variable_pricing"),t=document.getElementById("edd_download_editor__variable-pricing"),d="edd-section-content__row",n="."+d;if(e&&(i(e.checked),e.addEventListener("change",(function(){i(this.checked)}))),t){a(),t.addEventListener("click",(function(e){if((e.target.classList.contains("edd-button__add--variation")||e.target.closest(".edd-button__add--variation"))&&o.call(e.target,e),e.target.classList.contains("edd-section-content__remove")&&(r.call(e.target,e),s()),e.target.classList.contains("edd-button__edit")){const t=e.target.closest(n);t.classList.toggle("open"),t.classList.toggle("closed")}e.target.classList.contains("edd-button__toggle-expand-custom")&&(e.preventDefault(),t.querySelectorAll(n).forEach((function(e){e.classList.add("open"),e.classList.remove("closed")}))),e.target.classList.contains("edd-button__toggle-collapse-custom")&&(e.preventDefault(),t.querySelectorAll(n).forEach((function(e){e.classList.remove("open"),e.classList.add("closed")})))})),t.addEventListener("change",(function(e){"_edd_default_price_id"===e.target.name&&(e.target.checked?t.querySelectorAll('input[name="_edd_default_price_id"]').forEach((function(t){t!==e.target&&(t.checked=!1)})):e.target.checked=!0)}));const e=document.getElementById("edd-admin-notice-pricechanges");e&&e.addEventListener("click",(function(e){e.target.classList.contains("edd-section-content__remove")&&(r.call(e.target,e),s())}))}function a(){const e=t.querySelectorAll(n);e.length&&(c(),e.forEach((function(e){e.querySelector(".edd__handle-actions-order--higher").addEventListener("click",(function(){const e=this.closest(n),t=e.previousElementSibling;t&&t.classList.contains(d)&&(this.disabled=!0,t&&t.insertAdjacentElement("beforebegin",e),c())})),e.querySelector(".edd__handle-actions-order--lower").addEventListener("click",(function(){const e=this.closest(n),t=e.nextElementSibling;t&&t.classList.contains(d)&&(this.disabled=!0,t&&e.insertAdjacentElement("beforebegin",t),c())}))})))}function i(e){document.querySelectorAll(".edd-bundled-product-row, .edd-repeatable-row-standard-fields").forEach((function(t){e?t.classList.add("has-variable-pricing"):t.classList.remove("has-variable-pricing")})),s()}function o(e){e.preventDefault();const d=t.querySelector(".edd-button__add--variation");d.disabled=!0;const i=t.querySelectorAll(n),o=new FormData;o.append("action","edd_clone_variation"),o.append("timestamp",d.dataset.timestamp),o.append("token",d.dataset.token),o.append("download_id",edd_vars.post_id);let r=0;i.forEach((function(e){const t=e.querySelector(".edd-section__id"),d=parseInt(t.value);d>r&&(r=d)})),o.append("section",parseInt(r)+1),fetch(ajaxurl,{method:"POST",body:o}).then((function(e){return e.json()})).then((function(e){e.success&&(i[i.length-1].insertAdjacentHTML("afterend",e.data),d.disabled=!1,s(),c(),a())}))}function r(e){if(e.preventDefault(),this.classList.contains("edd-promo-notice__trigger"))return;let d=this.closest(n);if(!d){const e=this.getAttribute("data-id");e&&(d=t.querySelector('.edd-section__id[value="'+e+'"]').closest(n))}d.remove()}function s(){if(!t)return;const e=t.querySelectorAll(".edd-section-content__remove");1===e.length?e[0].classList.add("edd-hidden"):e.forEach((function(e){e.classList.remove("edd-hidden")}))}function c(){const e=t.querySelectorAll(n);if(!e.length)return;e.forEach((function(e){e.querySelector(".edd__handle-actions-order--higher").disabled=!1,e.querySelector(".edd__handle-actions-order--lower").disabled=!1}));const d=e[0];d.querySelector(".edd__handle-actions-order--higher").disabled=!0,e[e.length-1].querySelector(".edd__handle-actions-order--lower").disabled=!0,1===e.length?d.querySelector(".edd__handle-actions-order").classList.add("edd-hidden"):d.querySelector(".edd__handle-actions-order").classList.remove("edd-hidden")}},6744:()=>{document.addEventListener("click",(function(e){if(!e.target.classList.contains("edd-button__copy"))return;const t=e.target.getAttribute("data-clipboard-target"),d=document.querySelector(t);d.select(),d.setSelectionRange(0,99999),navigator.clipboard.writeText(d.value);const n=e.target.innerText;e.target.classList.add("updated-message"),e.target.innerText=edd_vars.copy_success,setTimeout((function(){e.target.classList.remove("updated-message"),e.target.innerText=n}),2e3)}))},7034:()=>{!function(){"use strict";function e(e){const t=e.querySelectorAll("input");Array.from(t).some((e=>e.disabled))?e.classList.add("edd-disabled"):e.classList.remove("edd-disabled")}function t(){const t=new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"disabled"===t.attributeName){const d=t.target.closest(".edd-amount-type-wrapper");d&&e(d)}}))}));function d(){document.querySelectorAll(".edd-amount-type-wrapper").forEach((d=>{e(d),d.querySelectorAll("input").forEach((e=>{t.observe(e,{attributes:!0,attributeFilter:["disabled"]})}))}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}()},7186:(e,t,d)=>{d(1669)(document).ready((function(e){e("body").on("click","#the-list .editinline",(function(){let t=e(this).closest("tr").attr("id");t=t.replace("post-","");const d=e("#post-"+t).find(".column-price .downloadprice-"+t).val();d!==e("#post-"+t+".column-price .downloadprice-"+t).val()?e(".regprice","#edd-download-data").val(d).attr("disabled",!1):e(".regprice","#edd-download-data").val(edd_vars.quick_edit_warning).attr("disabled","disabled")}))}))}},t={};function d(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,d),i.exports}(()=>{"use strict";var e=d(1669);const t={disable_search_threshold:13,search_contains:!0,inherit_select_classes:!0,single_backstroke_delete:!1,placeholder_text_single:edd_vars.one_option,placeholder_text_multiple:edd_vars.one_or_more_option,no_results_text:edd_vars.no_results_text};var n=d(1669),a=d(1669);const i=function(e){e.tooltip({content:function(){return n(this).prop("title")},tooltipClass:"edd-ui-tooltip",position:{my:"bottom",at:"top-10",collision:"flipfit"},hide:{duration:200},show:{duration:200}})};function o(e,t){const d=document.querySelectorAll("[data-edd-supports-"+e+"]");t.length||(t="false"),d.forEach((function(d){if(d.classList.contains("edd-hidden--required"))return;const n=d.getAttribute("data-edd-supports-"+e);n.split(",").includes(t)||t.length&&"false"!==t&&"any"===n?d.classList.remove("edd-hidden"):d.classList.add("edd-hidden")}))}function r(e,t){document.querySelectorAll("[data-edd-requires-"+e+"]").forEach((function(d){d.classList.remove("edd-hidden--required"),"true"===d.getAttribute("data-edd-requires-"+e)?d.classList.toggle("edd-hidden",!t):d.classList.toggle("edd-hidden",t),d.classList.contains("edd-hidden")&&d.classList.add("edd-hidden--required")}))}a(document).ready((function(e){i(e(".edd-help-tip"))})),d(7186),d(5815),d(4930),d(6744),document.querySelectorAll(".edd-requirement").forEach((function(e){const t=e.getAttribute("data-edd-requirement");t&&r(t,e.checked)})),document.addEventListener("change",(function(e){if(!e.target.classList.contains("edd-requirement"))return;const t=e.target.getAttribute("data-edd-requirement");t&&r(t,e.target.checked)})),document.querySelectorAll(".edd-supports").forEach((function(e){const t=e.getAttribute("data-edd-supported");t&&o(t,e.value)})),document.addEventListener("change",(function(e){if(!e.target.classList.contains("edd-supports"))return;const t=e.target.getAttribute("data-edd-supported");t&&o(t,e.target.value)})),d(4232),d(7034);var s=d(1669),c=d(1669),l={init:function(){this.add(),this.move(),this.remove(),this.files(),this.updatePrices(),this.showAdvanced()},clone_repeatable:function(e){let t=1,d=1;e.parent().find(".edd_repeatable_row").each((function(){const e=s(this).data("key");parseInt(e)>d&&(d=e)})),t=d+=1;const n=e.clone();return n.removeClass("edd_add_blank"),n.attr("data-key",t),n.find("input, select, textarea").val("").each((function(){let e=s(this),d=e.attr("name"),n=e.attr("id");d&&(d=d.replace(/\[(\d+)\]/,"["+parseInt(t)+"]"),e.attr("name",d)),e.attr("data-key",t),void 0!==n&&(n=n.replace(/(\d+)/,parseInt(t)),e.attr("id",n))})),n.find("select").each((function(){s(this).val(e.find('select[name="'+s(this).attr("name")+'"]').val())})),n.find('input[type="checkbox"]').each((function(){s(this).is(":checked")&&s(this).prop("checked",!1),s(this).val(1)})),n.find("span.edd_price_id").each((function(){s(this).text(parseInt(t))})),n.find("input.edd_repeatable_index").each((function(){s(this).val(parseInt(s(this).data("key")))})),n.find("span.edd_file_id").each((function(){s(this).text(parseInt(t))})),n.find(".edd_repeatable_condition_field").each((function(){s(this).find("option:eq(0)").prop("selected","selected")})),n.find("label").each((function(){var e=s(this).attr("for");e&&s(this).attr("for",e.replace(/(\d+)/,parseInt(t)))})),n.find(".search-choice").remove(),n.find(".chosen-container").remove(),i(n.find(".edd-help-tip")),l.triggerRowChange(n),n},add:function(){s(document.body).on("click",".edd_add_repeatable",(function(e){e.preventDefault();const t=s(this).closest(".edd_repeatable_table").find(".edd_repeatable_row").last(),d=l.clone_repeatable(t);d.insertAfter(t).find("input, textarea, select").filter(":visible").eq(0).focus(),l.initChosen(d),l.triggerRowChange(d)}))},move:function(){s(".edd_repeatable_table .edd-repeatables-wrap").sortable({axis:"y",handle:".edd-draghandle-anchor",items:".edd_repeatable_row",cursor:"move",tolerance:"pointer",containment:"parent",distance:2,opacity:.7,scroll:!0,update:function(){let e=0;s(this).find(".edd_repeatable_row").each((function(){s(this).find("input.edd_repeatable_index").each((function(){s(this).val(e)})),e++})),l.triggerRowChange(s(this))},start:function(e,t){t.placeholder.height(t.item.height()-2)}})},remove:function(){s(document.body).on("click",".edd-remove-row, .edd_remove_repeatable",(function(e){e.preventDefault();let t,d,n,a=s(this).parents(".edd_repeatable_row"),i=a.parent().find(".edd_repeatable_row").length,o=s(this).data("type"),r="div.edd_repeatable_"+o+"s";if(t=s(this).is(".ui-sortable .edd_repeatable_row:first-child .edd-remove-row, .ui-sortable .edd_repeatable_row:first-child .edd_remove_repeatable")?a.next(".edd_repeatable_row"):a.prev(".edd_repeatable_row"),d=t.find("select, input, textarea, button").filter(":visible"),n=d.eq(0),"price"===o){const e=a.data("key");s('.edd_repeatable_condition_field option[value="'+e+'"]').remove()}if(i>1)s("input, select",a).val(""),a.fadeOut("fast").remove(),n.focus();else switch(o){case"price":alert(edd_vars.one_price_min);break;case"file":s("input, select",a).val("");break;default:alert(edd_vars.one_field_min)}s(r).each((function(e){s(this).find("input, select").each((function(){let t=s(this).attr("name");t=t.replace(/\[(\d+)\]/,"["+e+"]"),s(this).attr("name",t).attr("id",t)}))})),l.triggerRowChange(t)}))},files:function(){var e;window.formfield="",s(document.body).on("click",".edd_upload_file_button",(function(t){t.preventDefault();const d=s(this);window.formfield=d.closest(".edd_repeatable_upload_wrapper"),e||((e=wp.media.frames.file_frame=wp.media({title:d.data("uploader-title"),frame:"post",state:"insert",button:{text:d.data("uploader-button-text")},multiple:"0"!==s(this).data("multiple")})).on("menu:render:default",(function(e){e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.unset("playlist"),e.unset("video-playlist"),e.set({})})),e.on("insert",(function(){e.state().get("selection").each((function(e,t){let d="image"===(e=e.toJSON()).type&&s(".attachment-display-settings .size option:selected").val(),n=e.url,a=e.title.length>0?e.title:e.filename;if(d&&void 0!==e.sizes[d]&&(n=e.sizes[d].url),"image"===e.type&&(a=d&&void 0!==e.sizes[d]?a+"-"+e.sizes[d].width+"x"+e.sizes[d].height:a+"-"+e.width+"x"+e.height),0===t)window.formfield.find(".edd_repeatable_attachment_id_field").val(e.id),window.formfield.find(".edd_repeatable_thumbnail_size_field").val(d),window.formfield.find(".edd_repeatable_upload_field").val(n),window.formfield.find(".edd_repeatable_name_field").val(a);else{const t=window.formfield,i=l.clone_repeatable(t);i.find(".edd_repeatable_attachment_id_field").val(e.id),i.find(".edd_repeatable_thumbnail_size_field").val(d),i.find(".edd_repeatable_upload_field").val(n),i.find(".edd_repeatable_name_field").val(a),i.insertAfter(t)}}))}))),e.open()})),s(".edd_repeatable_upload_field").on("focus",(function(){const e=s(this);e.data("originalFile",e.val())})).on("change",(function(){const e=s(this);e.data("originalFile")!==e.val()&&e.closest(".edd-repeatable-row-standard-fields").find(".edd_repeatable_attachment_id_field").val(0)})),window.formfield=""},updatePrices:function(){s("#edd_price_fields").on("blur",".edd_variable_prices_name",(function(){const e=s(this).parents(".edd_repeatable_row").data("key"),t=s(this).val(),d=s(".edd_repeatable_condition_field option[value="+e+"]");d.length>0?d.text(t):s(".edd_repeatable_condition_field").append(s("<option></option>").attr("value",e).text(t))}))},showAdvanced:function(){s(document.body).on("click",".toggle-custom-price-option-section",(function(e){e.preventDefault();const t=s(this),d=t.html()===edd_vars.show_advanced_settings;d?t.html(edd_vars.hide_advanced_settings):t.html(edd_vars.show_advanced_settings);const n=t.parents(".edd-repeatable-row-header");let a;n.siblings(".edd-custom-price-option-sections-wrap").slideToggle(),a=s(":input:not(input[type=button],input[type=submit],button):visible:first",d?n.siblings(".edd-custom-price-option-sections-wrap"):n.siblings(".edd-repeatable-row-standard-fields")),a.focus()}))},initChosen:function(d){d.find("select.edd-select-chosen").each((function(){var d;(d=s(this))instanceof e||(d=e(d)),d.chosen((d=>{d instanceof e||(d=e(d));let n=t;return d.data("search-type")&&delete n.disable_search_threshold,{...n,width:d.css("width")}})(d)),d.css("width","100%"),d.find(".chosen-search input").attr("placeholder",edd_vars.search_placeholder)}))},triggerRowChange:function(e){document.dispatchEvent(new CustomEvent("edd_repeatable_row_change",{detail:{row:e}}))}};c(document).ready((function(e){l.init()}))})()})();