{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./assets/js/admin/settings/tax-rates/models/tax-rate.js","webpack:///./assets/js/admin/settings/tax-rates/views/table-add.js","webpack:///./assets/js/admin/settings/tax-rates/views/region-field.js","webpack:///./assets/js/utils/chosen.js","webpack:///./assets/js/utils/jquery.js","webpack:///./assets/js/admin/settings/tax-rates/collections/tax-rates.js","webpack:///./assets/js/admin/settings/tax-rates/views/table-meta.js","webpack:///./assets/js/admin/settings/tax-rates/views/table-row-empty.js","webpack:///./assets/js/admin/settings/tax-rates/views/table-row.js","webpack:///./assets/js/admin/settings/tax-rates/views/table-rows.js","webpack:///./assets/js/admin/settings/tax-rates/views/table.js","webpack:///./assets/js/admin/settings/tax-rates/views/bulk-actions.js","webpack:///./assets/js/admin/settings/tax-rates/views/manager.js","webpack:///./assets/js/admin/settings/tax-rates/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","jQuery","obj","configurable","writable","TaxRate","Backbone","Model","extend","defaults","id","country","region","global","amount","status","unsaved","selected","formattedAmount","this","parseFloat","toFixed","TableAdd","wp","View","tagName","className","template","events","initialize","model","listenTo","updateRegion","render","apply","arguments","$el","find","each","el","$","chosen","getChosenVars","self","data","action","nonce","eddTaxRates","field_name","post","ajaxurl","response","views","set","RegionField","states","setCountry","event","target","options","selectedIndex","setRegion","setGlobal","checked","setAmount","maybeAddTaxRate","keyCode","addTaxRate","preventDefault","existingCountryWide","collection","filter","rate","i18n","length","alert","multipleCountryWide","replace","add","_","attributes","cid","setElement","html","chosenVars","disable_search_threshold","search_contains","inherit_select_classes","single_backstroke_delete","placeholder_text_single","edd_vars","one_option","placeholder_text_multiple","one_or_more_option","no_results_text","inputVars","width","css","jQueryReady","callback","TaxRates","Collection","showAll","TableMeta","selectAll","models","push","TableRowEmpty","TableRow","toJSON","attr","result","removeRow","remove","activateRow","deactivateRow","selectRow","reject","TableRows","filtered","where","Table","trigger","BulkActions","document","getElementById","showHide","classList","toggle","Manager","makeDirty","querySelector","addEventListener","makeClean","window","onbeforeunload","confirmUnload","noticeEl","manager","rates","description","scope","silent"],"mappings":"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","file":"assets/js/edd-admin-tax-rates.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 78);\n","module.exports = jQuery;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/* global Backbone */\n\n/**\n * Model a tax rate.\n */\nconst TaxRate = Backbone.Model.extend( {\n\tdefaults: {\n\t\tid: '',\n\t\tcountry: '',\n\t\tregion: '',\n\t\tglobal: true,\n\t\tamount: 0,\n\t\tstatus: 'active',\n\t\tunsaved: false,\n\t\tselected: false,\n\t},\n\n\t/**\n\t * Format a rate amount (adds a %)\n\t *\n\t * @todo This should support dynamic decimal types.\n\t */\n\tformattedAmount: function() {\n\t\tlet amount = 0;\n\n\t\tif ( this.get( 'amount' ) ) {\n\t\t\tamount = parseFloat( this.get( 'amount' ) ).toFixed( 2 );\n\t\t}\n\n\t\treturn `${ amount }%`;\n\t},\n} );\n\nexport default TaxRate;\n","/* global wp */\n\n/**\n * Internal dependencies.\n */\nimport TaxRate from './../models/tax-rate.js';\nimport RegionField from './../views/region-field.js';\nimport { getChosenVars } from 'utils/chosen.js';\n\n/**\n * Add a new rate \"form\".\n */\nconst TableAdd = wp.Backbone.View.extend( {\n\t// Use <tfoot>\n\ttagName: 'tfoot',\n\n\t// Set class.\n\tclassName: 'add-new',\n\n\t// See https://codex.wordpress.org/Javascript_Reference/wp.template\n\ttemplate: wp.template( 'edd-admin-tax-rates-table-add' ),\n\n\t// Watch events.\n\tevents: {\n\t\t'click button': 'addTaxRate',\n\t\t'keypress': 'maybeAddTaxRate',\n\n\t\t'change #tax_rate_country': 'setCountry',\n\n\t\t// Can be select or input.\n\t\t'keyup #tax_rate_region': 'setRegion',\n\t\t'change #tax_rate_region': 'setRegion',\n\n\t\t'change input[type=\"checkbox\"]': 'setGlobal',\n\n\t\t// Can be click increase or keyboard.\n\t\t'keyup #tax_rate_amount': 'setAmount',\n\t\t'change #tax_rate_amount': 'setAmount',\n\t},\n\n\t/**\n\t * Set initial state and bind changes to model.\n\t */\n\tinitialize: function() {\n\t\tthis.model = new TaxRate( {\n\t\t\tglobal: true,\n\t\t\tunsaved: true,\n\t\t} );\n\n\t\tthis.listenTo( this.model, 'change:country', this.updateRegion );\n\t\tthis.listenTo( this.model, 'change:global', this.updateRegion );\n\t},\n\n\t/**\n\t * Render. Only overwritten so we can reinit chosen once cleared.\n\t */\n\trender: function() {\n\t\twp.Backbone.View.prototype.render.apply( this, arguments );\n\n\t\tthis.$el.find( 'select' ).each( function() {\n\t\t\tconst el = $( this );\n\t\t\tel.chosen( getChosenVars( el ) );\n\t\t} );\n\n\t\treturn this;\n\t},\n\n\t/**\n\t * Show a list of states or an input field.\n\t */\n\tupdateRegion: function() {\n\t\tconst self = this;\n\n\t\tconst data = {\n\t\t\taction: 'edd_get_shop_states',\n\t\t\tcountry: this.model.get( 'country' ),\n\t\t\tnonce: eddTaxRates.nonce,\n\t\t\tfield_name: 'tax_rate_region',\n\t\t};\n\n\t\t$.post( ajaxurl, data, function( response ) {\n\t\t\tself.views.set( '#tax_rate_region_wrapper', new RegionField( {\n\t\t\t\tstates: response,\n\t\t\t\tglobal: self.model.get( 'global' ),\n\t\t\t} ) );\n\t\t} );\n\t},\n\n\t/**\n\t * Set a country value.\n\t *\n\t * @param {Object} event Event.\n\t */\n\tsetCountry: function( event ) {\n\t\tthis.model.set( 'country', event.target.options[ event.target.selectedIndex ].value );\n\t},\n\n\t/**\n\t * Set a region value.\n\t *\n\t * @param {Object} event Event.\n\t */\n\tsetRegion: function( event ) {\n\t\tlet value = false;\n\n\t\tif ( event.target.value ) {\n\t\t\tvalue = event.target.value;\n\t\t} else {\n\t\t\tvalue = event.target.options[ event.target.selectedIndex ].value;\n\t\t}\n\n\t\tthis.model.set( 'region', value );\n\t},\n\n\t/**\n\t * Set a global scope.\n\t *\n\t * @param {Object} event Event.\n\t */\n\tsetGlobal: function( event ) {\n\t\tthis.model.set( 'global', event.target.checked );\n\t},\n\n\t/**\n\t * Set an amount value.\n\t *\n\t * @param {Object} event Event.\n\t */\n\tsetAmount: function( event ) {\n\t\tthis.model.set( 'amount', event.target.value );\n\t},\n\n\t/**\n\t * Monitors keyepress for \"Enter\" key.\n\t *\n\t * We cannot use the `submit` event because we cannot nest <form>\n\t * elements inside the settings API.\n\t *\n\t * @param {Object} event Keypress event.\n\t */\n\tmaybeAddTaxRate: function( event ) {\n\t\tif ( 13 !== event.keyCode ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.addTaxRate( event );\n\t},\n\n\t/**\n\t * Add a single rate when the \"form\" is submitted.\n\t *\n\t * @param {Object} event Event.\n\t */\n\taddTaxRate: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tconst existingCountryWide = this.collection.filter( ( rate ) => (\n\t\t\t'' === this.model.get( 'region' ) && (\n\t\t\t\tthis.model.get( 'country' ) === rate.get( 'country' ) &&\n\t\t\t\ttrue === rate.get( 'global' ) &&\n\t\t\t\t'active' === rate.get( 'status' )\n\t\t\t)\n\t\t) );\n\n\t\tconst {\n\t\t\ti18n,\n\t\t} = eddTaxRates;\n\n\t\tif ( existingCountryWide.length > 0 ) {\n\t\t\talert( i18n.multipleCountryWide.replace( '%s', this.model.get( 'country' ) ) );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Merge cid as ID to make this a unique model.\n\t\tthis.collection.add( _.extend(\n\t\t\tthis.model.attributes,\n\t\t\t{\n\t\t\t\tid: this.model.cid,\n\t\t\t}\n\t\t) );\n\n\t\tthis.render();\n\t\tthis.initialize();\n\t},\n} );\n\nexport default TableAdd;\n","/* global wp, _ */\n\n/**\n * Internal dependencies.\n */\nimport { getChosenVars } from 'utils/chosen.js';\n\nconst RegionField = wp.Backbone.View.extend( {\n\t/**\n\t * Bind passed arguments.\n\t *\n\t * @param {Object} options Extra options passed.\n\t */\n\tinitialize: function( options ) {\n\t\t_.extend( this, options );\n\t},\n\n\t/**\n\t * Create a list of options.\n\t */\n\trender: function() {\n\t\tif ( this.global ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( 'nostates' === this.states ) {\n\t\t\tthis.setElement( '<input type=\"text\" id=\"tax_rate_region\" />' );\n\t\t} else {\n\t\t\tthis.$el.html( this.states );\n\t\t\tthis.$el.find( 'select' ).each( function() {\n\t\t\t\tconst el = $( this );\n\t\t\t\tel.chosen( getChosenVars( el ) );\n\t\t\t} );\n\t\t}\n\t},\n} );\n\nexport default RegionField;\n","/* global jQuery, edd_vars */\n\nexport const chosenVars = {\n\tdisable_search_threshold: 13,\n\tsearch_contains: true,\n\tinherit_select_classes: true,\n\tsingle_backstroke_delete: false,\n\tplaceholder_text_single: edd_vars.one_option,\n\tplaceholder_text_multiple: edd_vars.one_or_more_option,\n\tno_results_text: edd_vars.no_results_text,\n};\n\n/**\n * Determine the variables used to initialie Chosen on an element.\n *\n * @param {Object} el select element.\n * @return {Object} Variables for Chosen.\n */\nexport const getChosenVars = ( el ) => {\n\tif ( ! el instanceof jQuery ) {\n\t\tel = jQuery( el );\n\t}\n\n\tlet inputVars = chosenVars;\n\n\t// Ensure <select data-search-type=\"download\"> or similar can use search always.\n\t// These types of fields start with no options and are updated via AJAX.\n\tif ( el.data( 'search-type' ) ) {\n\t\tdelete inputVars.disable_search_threshold;\n\t}\n\n\treturn {\n\t\t...inputVars,\n\t\twidth: el.css( 'width' ),\n\t};\n}\n","/* global jQuery */\n\n/**\n * Safe wrapper for jQuery DOM ready.\n *\n * This should be used only when a script requires the use of jQuery.\n *\n * @param {Function} callback Function to call when ready.\n */\nexport const jQueryReady = function( callback ) {\n\t( function( $ ) {\n\t\t$( callback );\n\t}( jQuery ) );\n};\n","/* global Backbone */\n\n/**\n * Internal dependencies.\n */\nimport TaxRate from './../models/tax-rate.js';\n\n/**\n * A collection of multiple tax rates.\n */\nconst TaxRates = Backbone.Collection.extend( {\n\t// Map the model.\n\tmodel: TaxRate,\n\n\t/**\n\t * Set initial state.\n\t */\n\tinitialize: function() {\n\t\tthis.showAll = false;\n\t\tthis.selected = [];\n\t},\n} );\n\nexport default TaxRates;\n","/* global wp, _ */\n\n/**\n * Output a table header and footer.\n */\nconst TableMeta = wp.Backbone.View.extend( {\n\t// See https://codex.wordpress.org/Javascript_Reference/wp.template\n\ttemplate: wp.template( 'edd-admin-tax-rates-table-meta' ),\n\n\t// Watch events.\n\tevents: {\n\t\t'change [type=\"checkbox\"]': 'selectAll',\n\t},\n\n\t/**\n\t * Select all items in the collection.\n\t *\n\t * @param {Object} event Event.\n\t */\n\tselectAll: function( event ) {\n\t\tconst checked = event.target.checked;\n\n\t\t_.each( this.collection.models, ( model ) => {\n\t\t\t// Check individual models.\n\t\t\tmodel.set( 'selected', checked );\n\n\t\t\t// Add to global selection.\n\t\t\tthis.collection.selected.push( model.cid );\n\t\t} );\n\t},\n} );\n\nexport default TableMeta;\n","/* global wp */\n\n/**\n * Empty tax rates table.\n */\nconst TableRowEmpty = wp.Backbone.View.extend( {\n\t// Insert as a <tr>\n\ttagName: 'tr',\n\n\t// Set class.\n\tclassName: 'edd-tax-rate-row edd-tax-rate-row--is-empty',\n\n\t// See https://codex.wordpress.org/Javascript_Reference/wp.template\n\ttemplate: wp.template( 'edd-admin-tax-rates-table-row-empty' ),\n} );\n\nexport default TableRowEmpty;\n","/* global wp, _ */\n\n/**\n * A row inside a table of rates.\n */\nconst TableRow = wp.Backbone.View.extend( {\n\t// Insert as a <tr>\n\ttagName: 'tr',\n\n\t// Set class.\n\tclassName: function() {\n\t\treturn 'edd-tax-rate-row edd-tax-rate-row--' + this.model.get( 'status' );\n\t},\n\n\t// See https://codex.wordpress.org/Javascript_Reference/wp.template\n\ttemplate: wp.template( 'edd-admin-tax-rates-table-row' ),\n\n\t// Watch events.\n\tevents: {\n\t\t'click .remove': 'removeRow',\n\t\t'click .activate': 'activateRow',\n\t\t'click .deactivate': 'deactivateRow',\n\t\t'change [type=\"checkbox\"]': 'selectRow',\n\t},\n\n\t/**\n\t * Bind model to view.\n\t */\n\tinitialize: function() {\n\t\tthis.listenTo( this.model, 'change', this.render );\n\t},\n\n\t/**\n\t * Render\n\t */\n\trender: function() {\n\t\tthis.$el.html( this.template( {\n\t\t\t...this.model.toJSON(),\n\t\t\tformattedAmount: this.model.formattedAmount(),\n\t\t} ) );\n\n\t\t// Ensure the wrapper class has the new name.\n\t\tthis.$el.attr( 'class', _.result( this, 'className' ) );\n\t},\n\n\t/**\n\t * Remove a rate (can only be done if it has not been saved to the database).\n\t *\n\t * Don't use this.model.destroy() to avoid sending a DELETE request.\n\t *\n\t * @param {Object} event Event.\n\t */\n\tremoveRow: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tthis.collection.remove( this.model );\n\t},\n\n\t/**\n\t * Activate a rate.\n\t *\n\t * @param {Object} event Event.\n\t */\n\tactivateRow: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tthis.model.set( 'status', 'active' );\n\t},\n\n\t/**\n\t * Deactivate a rate.\n\t *\n\t * @param {Object} event Event.\n\t */\n\tdeactivateRow: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tthis.model.set( 'status', 'inactive' );\n\t},\n\n\t/**\n\t * Select or deselect for bulk actions.\n\t *\n\t * @param {Object} event Event.\n\t */\n\tselectRow: function( event ) {\n\t\tconst checked = event.target.checked;\n\n\t\tif ( ! checked ) {\n\t\t\tthis.collection.selected = _.reject( this.collection.selected, ( cid ) => {\n\t\t\t\treturn cid === this.model.cid;\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.collection.selected.push( this.model.cid );\n\t\t}\n\t},\n} );\n\nexport default TableRow;\n","/* global wp, _ */\n\n/**\n * Internal dependencies.\n */\nimport TableRowEmpty from './table-row-empty.js';\nimport TableRow from './table-row.js';\n\n/**\n * A bunch of rows inside a table of rates.\n */\nconst TableRows = wp.Backbone.View.extend( {\n\t// Insert as a <tbody>\n\ttagName: 'tbody',\n\n\t/**\n\t * Bind events to collection.\n\t */\n\tinitialize: function() {\n\t\tthis.listenTo( this.collection, 'add', this.render );\n\t\tthis.listenTo( this.collection, 'remove', this.render );\n\t\tthis.listenTo( this.collection, 'filtered change', this.filtered );\n\t},\n\n\t/**\n\t * Render a collection of rows.\n\t */\n\trender: function() {\n\t\t// Clear to handle sorting.\n\t\tthis.views.remove();\n\n\t\t// Show empty placeholder.\n\t\tif ( 0 === this.collection.models.length ) {\n\t\t\treturn this.views.add( new TableRowEmpty() );\n\t\t}\n\n\t\t// Add items.\n\t\t_.each( this.collection.models, ( rate ) => {\n\t\t\tthis.views.add( new TableRow( {\n\t\t\t\tcollection: this.collection,\n\t\t\t\tmodel: rate,\n\t\t\t} ) );\n\t\t} );\n\t},\n\n\t/**\n\t * Show an empty state if all items are deactivated.\n\t */\n\tfiltered: function() {\n\t\tconst disabledRates = this.collection.where( {\n\t\t\tstatus: 'inactive',\n\t\t} );\n\n\t\t// Check if all rows are invisible, and show the \"No Items\" row if so\n\t\tif ( disabledRates.length === this.collection.models.length && ! this.collection.showAll ) {\n\t\t\tthis.views.add( new TableRowEmpty() );\n\n\t\t// Possibly re-render the view\n\t\t} else {\n\t\t\tthis.render();\n\t\t}\n\t},\n} );\n\nexport default TableRows;\n","/* global wp */\n\n/**\n * Internal dependencies.\n */\nimport TableMeta from './table-meta.js';\nimport TableRows from './table-rows.js';\nimport TableAdd from './table-add.js';\n\n/**\n * Manage the tax rate rows in a table.\n */\nconst Table = wp.Backbone.View.extend( {\n\t// Render as a <table> tag.\n\ttagName: 'table',\n\n\t// Set class.\n\tclassName: 'wp-list-table widefat fixed tax-rates',\n\n\t// Set ID.\n\tid: 'edd_tax_rates',\n\n\t/**\n\t * Output a table with a header, body, and footer.\n\t */\n\trender: function() {\n\t\tthis.views.add( new TableMeta( {\n\t\t\ttagName: 'thead',\n\t\t\tcollection: this.collection,\n\t\t} ) );\n\n\t\tthis.views.add( new TableRows( {\n\t\t\tcollection: this.collection,\n\t\t} ) );\n\n\t\tthis.views.add( new TableAdd( {\n\t\t\tcollection: this.collection,\n\t\t} ) );\n\n\t\tthis.views.add( new TableMeta( {\n\t\t\ttagName: 'tfoot',\n\t\t\tcollection: this.collection,\n\t\t} ) );\n\n\t\t// Trigger the `filtered` action to show/hide rows accordingly\n\t\tthis.collection.trigger( 'filtered' );\n\t},\n} );\n\nexport default Table;\n","/* global wp, _ */\n\n/**\n * Apply bulk actions.\n */\nconst BulkActions = wp.Backbone.View.extend( {\n\t// See https://codex.wordpress.org/Javascript_Reference/wp.template\n\ttemplate: wp.template( 'edd-admin-tax-rates-table-bulk-actions' ),\n\n\t// Watch events.\n\tevents: {\n\t\t'click .edd-admin-tax-rates-table-filter': 'filter',\n\t\t'change .edd-admin-tax-rates-table-hide input': 'showHide',\n\t},\n\n\t/**\n\t * Bulk actions for selected items.\n\t *\n\t * Currently only supports changing the status.\n\t *\n\t * @param {Object} event Event.\n\t */\n\tfilter: function( event ) {\n\t\tevent.preventDefault();\n\n\t\t// @hack - need to access the DOM directly here because the dropdown is not tied to the button event.\n\t\tconst status = document.getElementById( 'edd-admin-tax-rates-table-bulk-actions' );\n\n\t\t_.each( this.collection.selected, ( cid ) => {\n\t\t\tconst model = this.collection.get( {\n\t\t\t\tcid: cid,\n\t\t\t} );\n\n\t\t\tmodel.set( 'status', status.value );\n\t\t} );\n\n\t\tthis.collection.trigger( 'filtered' );\n\t},\n\n\t/**\n\t * Toggle show active/inactive rates.\n\t *\n\t * @param {Object} event Event.\n\t */\n\tshowHide: function( event ) {\n\t\tthis.collection.showAll = event.target.checked;\n\n\t\t// @hack -- shouldn't access this table directly.\n\t\tdocument.getElementById( 'edd_tax_rates' ).classList.toggle( 'has-inactive', this.collection.showAll );\n\n\t\tthis.collection.trigger( 'filtered' );\n\t},\n} );\n\nexport default BulkActions;\n","/* global wp */\n\n/**\n * Internal dependencies.\n */\nimport Table from './table.js';\nimport BulkActions from './bulk-actions.js';\n\n/**\n * Manage tax rates.\n */\nconst Manager = wp.Backbone.View.extend( {\n\t// Append to this element.\n\tel: '#edd-admin-tax-rates',\n\n\t/**\n\t * Set bind changes to collection.\n\t */\n\tinitialize: function() {\n\t\tthis.listenTo( this.collection, 'add change', this.makeDirty );\n\n\t\t// Clear unload confirmation when submitting parent form.\n\t\tdocument.querySelector( '.edd-settings-form #submit' ).addEventListener( 'click', this.makeClean );\n\t},\n\n\t/**\n\t * Output the manager.\n\t */\n\trender: function() {\n\t\tthis.views.add( new BulkActions( {\n\t\t\tcollection: this.collection,\n\t\t} ) );\n\n\t\tthis.views.add( new Table( {\n\t\t\tcollection: this.collection,\n\t\t} ) );\n\t},\n\n\t/**\n\t * Collection has changed so warn the user before exiting.\n\t */\n\tmakeDirty: function() {\n\t\twindow.onbeforeunload = this.confirmUnload;\n\t},\n\n\t/**\n\t * When submitting the main form remove the dirty check.\n\t */\n\tmakeClean: function() {\n\t\twindow.onbeforeunload = null;\n\t},\n\n\t/**\n\t * Confirm page unload.\n\t *\n\t * @param {Object} event Close event.\n\t */\n\tconfirmUnload: function( event ) {\n\t\tevent.preventDefault();\n\n\t\treturn '';\n\t},\n} );\n\nexport default Manager;\n","/* global _, eddTaxRates */\n\n/**\n * Internal dependencies.\n */\nimport TaxRate from './models/tax-rate.js';\nimport TaxRates from './collections/tax-rates.js';\nimport Manager from './views/manager.js';\nimport { jQueryReady } from 'utils/jquery.js';\n\n/**\n * DOM ready.\n */\njQueryReady( () => {\n\t// Show notice if taxes are not enabled.\n\tconst noticeEl = document.getElementById( 'edd-tax-disabled-notice' );\n\n\tif ( noticeEl ) {\n\t\tnoticeEl.classList.add( 'notice' );\n\t\tnoticeEl.classList.add( 'notice-warning' );\n\t}\n\n\t// Start manager with a blank collection.\n\tconst manager = new Manager( {\n\t\tcollection: new TaxRates(),\n\t} );\n\n\tconst rates = [];\n\n\t// Normalize rate data.\n\t_.each( eddTaxRates.rates, ( rate ) => rates.push( {\n\t\tid: rate.id,\n\t\tcountry: rate.name,\n\t\tregion: rate.description,\n\t\tglobal: 'country' === rate.scope,\n\t\tamount: rate.amount,\n\t\tstatus: rate.status,\n\t} ) );\n\n\t// Add initial rates.\n\tmanager.collection.set( rates, {\n\t\tsilent: true,\n\t} );\n\n\t// Render manager.\n\tmanager.render();\n} );\n"],"sourceRoot":""}