function searchItems(items,searchTerm){var normalizedSearchTerm=normalizeTerm(searchTerm),matchSearch=function(string){return-1!==normalizeTerm(string).indexOf(normalizedSearchTerm)};return _.filter(items,function(item){return matchSearch(item.title)||_.some(item.keywords,matchSearch)})}function normalizeTerm(term){return term=(term=term.toLowerCase()).trim()}function setupEmailTags(){document.querySelectorAll(".edd-email-tags-list-button").forEach(function(node){node.addEventListener("click",function(){tb_remove(),window.send_to_editor(node.dataset.to_insert)})})}function filterEmailTags(){var filterInput=document.querySelector(".edd-email-tags-filter-search");tagItems=document.querySelectorAll(".edd-email-tags-list-item"),filterInput.addEventListener("keyup",function(event){var searchTerm=event.target.value,foundTags=searchItems(eddEmailTagsInserter.items,searchTerm);tagItems.forEach(function(node){var found=_.findWhere(foundTags,{tag:node.dataset.tag});node.style.display=found?"block":"none"})})}document.addEventListener("DOMContentLoaded",function(){document.querySelector(".edd-email-tags-inserter").addEventListener("click",tb_position),setupEmailTags(),filterEmailTags()});