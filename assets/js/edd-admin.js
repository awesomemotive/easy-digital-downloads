!function(e){var t={};function d(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,d),a.l=!0,a.exports}d.m=e,d.c=t,d.d=function(e,t,n){d.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},d.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="",d(d.s=62)}([function(e,t){var d=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)},function(e,t,d){var n=d(9),a=d(21);e.exports=d(2)?function(e,t,d){return n.f(e,t,a(1,d))}:function(e,t,d){return e[t]=d,e}},function(e,t,d){e.exports=!d(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,d){var n=d(18)("wks"),a=d(7),o=d(0).Symbol,i="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=i&&o[e]||(i?o:a)("Symbol."+e))}).store=n},function(e,t){var d=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=d)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var d=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++d+n).toString(36))}},function(e,t,d){"use strict";d.d(t,"a",function(){return n});var n={disable_search_threshold:13,search_contains:!0,inherit_select_classes:!0,single_backstroke_delete:!1,placeholder_text_single:edd_vars.one_option,placeholder_text_multiple:edd_vars.one_or_more_option,no_results_text:edd_vars.no_results_text}},function(e,t,d){var n=d(15),a=d(28),o=d(27),i=Object.defineProperty;t.f=d(2)?Object.defineProperty:function(e,t,d){if(n(e),t=o(t,!0),n(d),a)try{return i(e,t,d)}catch(e){}if("get"in d||"set"in d)throw TypeError("Accessors not supported!");return"value"in d&&(e[t]=d.value),e}},function(e,t){var d={}.toString;e.exports=function(e){return d.call(e).slice(8,-1)}},function(e,t,d){var n=d(20);e.exports=function(e,t,d){if(n(e),void 0===t)return e;switch(d){case 1:return function(d){return e.call(t,d)};case 2:return function(d,n){return e.call(t,d,n)};case 3:return function(d,n,a){return e.call(t,d,n,a)}}return function(){return e.apply(t,arguments)}}},function(e,t){var d={}.hasOwnProperty;e.exports=function(e,t){return d.call(e,t)}},function(e,t,d){var n=d(0),a=d(1),o=d(12),i=d(7)("src"),r=Function.toString,s=(""+r).split("toString");d(5).inspectSource=function(e){return r.call(e)},(e.exports=function(e,t,d,r){var c="function"==typeof d;c&&(o(d,"name")||a(d,"name",t)),e[t]!==d&&(c&&(o(d,i)||a(d,i,e[t]?""+e[t]:s.join(String(t)))),e===n?e[t]=d:r?e[t]?e[t]=d:a(e,t,d):(delete e[t],a(e,t,d)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[i]||r.call(this)})},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,d){var n=d(3);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var d=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:d)(e)}},function(e,t){e.exports=!1},function(e,t,d){var n=d(5),a=d(0),o=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:d(17)?"pure":"global",copyright:"Â© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t,d){var n=d(14);e.exports=function(e){return Object(n(e))}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,d){var n=d(3),a=d(0).document,o=n(a)&&n(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},function(e,t,d){var n=d(0),a=d(5),o=d(1),i=d(13),r=d(11),s=function(e,t,d){var c,l,u,p,f=e&s.F,_=e&s.G,m=e&s.S,v=e&s.P,h=e&s.B,w=_?n:m?n[t]||(n[t]={}):(n[t]||{}).prototype,y=_?a:a[t]||(a[t]={}),b=y.prototype||(y.prototype={});for(c in _&&(d=t),d)u=((l=!f&&w&&void 0!==w[c])?w:d)[c],p=h&&l?r(u,n):v&&"function"==typeof u?r(Function.call,u):u,w&&i(w,c,u,e&s.U),y[c]!=u&&o(y,c,p),v&&b[c]!=u&&(b[c]=u)};n.core=a,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,d){var n=d(4)("unscopables"),a=Array.prototype;void 0==a[n]&&d(1)(a,n,{}),e.exports=function(e){a[n][e]=!0}},function(e,t,d){var n=d(16),a=Math.min;e.exports=function(e){return e>0?a(n(e),9007199254740991):0}},function(e,t,d){var n=d(10);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,d){var n=d(3);e.exports=function(e,t){if(!n(e))return e;var d,a;if(t&&"function"==typeof(d=e.toString)&&!n(a=d.call(e)))return a;if("function"==typeof(d=e.valueOf)&&!n(a=d.call(e)))return a;if(!t&&"function"==typeof(d=e.toString)&&!n(a=d.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},function(e,t,d){e.exports=!d(2)&&!d(6)(function(){return 7!=Object.defineProperty(d(22)("div"),"a",{get:function(){return 7}}).a})},function(e,t,d){"use strict";var n=d(23),a=d(33)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),d(24)("find")},function(e,t,d){var n=d(10);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,d){var n=d(3),a=d(30),o=d(4)("species");e.exports=function(e){var t;return a(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!a(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,d){var n=d(31);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,d){var n=d(11),a=d(26),o=d(19),i=d(25),r=d(32);e.exports=function(e,t){var d=1==e,s=2==e,c=3==e,l=4==e,u=6==e,p=5==e||u,f=t||r;return function(t,r,_){for(var m,v,h=o(t),w=a(h),y=n(r,_,3),b=i(w.length),g=0,x=d?f(t,b):s?f(t,0):void 0;b>g;g++)if((p||g in w)&&(v=y(m=w[g],g,h),e))if(d)x[g]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return g;case 2:x.push(m)}else if(l)return!1;return u?-1:c||l?l:x}}},,,,function(e,t,d){var n=d(9).f,a=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in a||d(2)&&n(a,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},,,,,,,,,,,,,,,,,,,,,function(e,t,d){"use strict";var n=d(1),a=d(13),o=d(6),i=d(14),r=d(4);e.exports=function(e,t,d){var s=r(e),c=d(i,s,""[e]),l=c[0],u=c[1];o(function(){var t={};return t[s]=function(){return 7},7!=""[e](t)})&&(a(String.prototype,e,l),n(RegExp.prototype,s,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)}))}},function(e,t,d){d(58)("replace",2,function(e,t,d){return[function(n,a){"use strict";var o=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,o,a):d.call(String(o),n,a)},d]})},function(e,t,d){"use strict";var n=d(6);e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,d){"use strict";var n=d(23),a=d(20),o=d(19),i=d(6),r=[].sort,s=[1,2,3];n(n.P+n.F*(i(function(){s.sort(void 0)})||!i(function(){s.sort(null)})||!d(60)(r)),"Array",{sort:function(e){return void 0===e?r.call(o(this)):r.call(o(this),a(e))}})},function(e,t,d){"use strict";d.r(t);d(61),d(37),d(59),d(29);var n=d(8);jQuery(document).ready(function(e){var t,d=!1;e(".edd_user_search_results").mousedown(function(){d=!0}),a(e(".edd-help-tip"));var o={};e(".edd-select-chosen").chosen(n.a),e(".edd-select-chosen .chosen-search input").each(function(){if(!e(this).attr("placeholder")){var t=e(this).parent().parent().parent().prev("select.edd-select-chosen").data("search-placeholder");t&&(console.log(t),e(this).attr("placeholder",t))}}),e(".chosen-choices").on("click",function(){var t=e(this).parent().prev().data("search-placeholder");void 0===t&&(t=edd_vars.type_to_search),e(this).children("li").children("input").attr("placeholder",t)}),e(".edd-vertical-sections.use-js .section-content").hide(),e(".edd-vertical-sections.use-js .section-content:first-child").show(),e(".edd-vertical-sections.use-js .section-nav :first-child").attr("aria-selected","true"),e(".which-section").text(e(".section-nav :first-child a").text()),e(".edd-vertical-sections.use-js .section-nav li a").on("click",function(t){t.preventDefault();var d=e(this),n=d.attr("href"),a=d.parents(".edd-vertical-sections");a.find(".section-content").hide(),a.find(n).show(),a.find(".section-title").attr("aria-selected","false"),d.parent().attr("aria-selected","true"),a.find("div.chosen-container").css("width","100%"),e(".which-section").text(d.text())}),e(".edd-advanced-filters-button").on("click",function(t){t.preventDefault(),e("#edd-advanced-filters").toggleClass("open")});var i={init:function(){this.add(),this.move(),this.remove(),this.type(),this.prices(),this.files(),this.updatePrices()},clone_repeatable:function(t){var d=highest=1;return t.parent().find(".edd_repeatable_row").each(function(){var t=e(this).data("key");parseInt(t)>highest&&(highest=t)}),d=highest+=1,clone=t.clone(),clone.removeClass("edd_add_blank"),clone.attr("data-key",d),clone.find("input, select, textarea").val("").each(function(){var t=e(this),n=t.attr("name"),a=t.attr("id");n&&(n=n.replace(/\[(\d+)\]/,"["+parseInt(d)+"]"),t.attr("name",n)),t.attr("data-key",d),void 0!==a&&(a=a.replace(/(\d+)/,parseInt(d)),t.attr("id",a))}),clone.find("select").each(function(){e(this).val(t.find('select[name="'+e(this).attr("name")+'"]').val())}),clone.find('input[type="checkbox"]').each(function(){e(this).is(":checked")&&e(this).prop("checked",!1),e(this).val(1)}),clone.find("span.edd_price_id").each(function(){e(this).text(parseInt(d))}),clone.find("span.edd_file_id").each(function(){e(this).text(parseInt(d))}),clone.find(".edd_repeatable_default_input").each(function(){e(this).val(parseInt(d)).removeAttr("checked")}),clone.find(".edd_repeatable_condition_field").each(function(){e(this).find("option:eq(0)").prop("selected","selected")}),clone.find(".search-choice").remove(),clone.find(".chosen-container").remove(),a(clone.find(".edd-help-tip")),clone},add:function(){e(document.body).on("click",".submit .edd_add_repeatable",function(t){t.preventDefault();var d=e(this).parent().parent().prev(".edd_repeatable_row"),a=i.clone_repeatable(d);a.insertAfter(d).find("input, textarea, select").filter(":visible").eq(0).focus(),a.find(".edd-select-chosen").chosen(n.a),a.find(".edd-select-chosen").css("width","100%"),a.find(".edd-select-chosen .chosen-search input").attr("placeholder",edd_vars.search_placeholder)})},move:function(){e(".edd_repeatable_table .edd-repeatables-wrap").sortable({handle:".edd-draghandle-anchor",items:".edd_repeatable_row",opacity:.6,cursor:"move",axis:"y",update:function(){var t=0;e(this).find(".edd_repeatable_row").each(function(){e(this).find("input.edd_repeatable_index").each(function(){e(this).val(t)}),t++})}})},remove:function(){e(document.body).on("click",".edd-remove-row, .edd_remove_repeatable",function(t){t.preventDefault();var d,n=e(this).parents(".edd_repeatable_row"),a=n.parent().find(".edd_repeatable_row").length,o=e(this).data("type"),i="div.edd_repeatable_"+o+"s";if(d=(e(this).is(".ui-sortable .edd_repeatable_row:first-child .edd-remove-row, .ui-sortable .edd_repeatable_row:first-child .edd_remove_repeatable")?n.next(".edd_repeatable_row"):n.prev(".edd_repeatable_row")).find("select, input, textarea, button").filter(":visible").eq(0),"price"===o){var r=n.data("key");e('.edd_repeatable_condition_field option[value="'+r+'"]').remove()}if(a>1)e("input, select",n).val(""),n.fadeOut("fast").remove(),d.focus();else switch(o){case"price":alert(edd_vars.one_price_min);break;case"file":e("input, select",n).val("");break;default:alert(edd_vars.one_field_min)}e(i).each(function(t){e(this).find("input, select").each(function(){var d=e(this).attr("name");d=d.replace(/\[(\d+)\]/,"["+t+"]"),e(this).attr("name",d).attr("id",d)})})})},type:function(){e(document.body).on("change","#_edd_product_type",function(t){var d=e("#edd_products"),n=e("#edd_download_files"),a=e("#edd_download_limit_wrap");"bundle"===e(this).val()?(d.show(),n.hide(),a.hide()):(d.hide(),n.show(),a.show())})},prices:function(){e(document.body).on("change","#edd_variable_pricing",function(t){var d=e(this).is(":checked"),n=e("#edd_regular_price_field"),a=e("#edd_variable_price_fields, .edd_repeatable_table .pricing"),o=e(".edd-bundled-product-row, .edd-repeatable-row-standard-fields");d?(n.hide(),a.show(),o.addClass("has-variable-pricing")):(n.show(),a.hide(),o.removeClass("has-variable-pricing"))})},files:function(){var t;window.formfield="",e(document.body).on("click",".edd_upload_file_button",function(d){d.preventDefault();var n=e(this);window.formfield=n.closest(".edd_repeatable_upload_wrapper"),t?t.open():((t=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:n.data("uploader-title"),button:{text:n.data("uploader-button-text")},multiple:"0"!==e(this).data("multiple")})).on("menu:render:default",function(e){e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set({})}),t.on("insert",function(){t.state().get("selection").each(function(t,d){var n="image"===(t=t.toJSON()).type&&e(".attachment-display-settings .size option:selected").val(),a=t.url,o=t.title.length>0?t.title:t.filename;if(n&&void 0!==t.sizes[n]&&(a=t.sizes[n].url),"image"===t.type&&(o=n&&void 0!==t.sizes[n]?o+"-"+t.sizes[n].width+"x"+t.sizes[n].height:o+"-"+t.width+"x"+t.height),0===d)window.formfield.find(".edd_repeatable_attachment_id_field").val(t.id),window.formfield.find(".edd_repeatable_thumbnail_size_field").val(n),window.formfield.find(".edd_repeatable_upload_field").val(a),window.formfield.find(".edd_repeatable_name_field").val(o);else{var r=window.formfield,s=i.clone_repeatable(r);s.find(".edd_repeatable_attachment_id_field").val(t.id),s.find(".edd_repeatable_thumbnail_size_field").val(n),s.find(".edd_repeatable_upload_field").val(a),s.find(".edd_repeatable_name_field").val(o),s.insertAfter(r)}})}),t.open())}),window.formfield=""},updatePrices:function(){e("#edd_price_fields").on("keyup",".edd_variable_prices_name",function(){var t=e(this).parents(".edd_repeatable_row").data("key"),d=e(this).val(),n=e(".edd_repeatable_condition_field option[value="+t+"]");n.length>0?n.text(d):e(".edd_repeatable_condition_field").append(e("<option></option>").attr("value",t).text(d))})}};e(document.body).on("click",".toggle-custom-price-option-section",function(t){t.preventDefault();var d=e(this),n=d.html()===edd_vars.show_advanced_settings;n?d.html(edd_vars.hide_advanced_settings):d.html(edd_vars.show_advanced_settings);var a=d.parents(".edd-repeatable-row-header");a.siblings(".edd-custom-price-option-sections-wrap").slideToggle(),e(":input:not(input[type=button],input[type=submit],button):visible:first",n?a.siblings(".edd-custom-price-option-sections-wrap"):a.siblings(".edd-repeatable-row-standard-fields")).focus()}),i.init();var r=e("input.edd_datepicker");r.length>0&&r.attr("autocomplete","off").datepicker({dateFormat:edd_vars.date_picker_format,beforeShow:function(){e("#ui-datepicker-div").removeClass("ui-datepicker").addClass("edd-datepicker")}});var s=e("ul.edd-sortable-list");s.length>0&&s.sortable({axis:"y",items:"li",cursor:"move",tolerance:"pointer",containment:"parent",distance:2,opacity:.7,scroll:!0,stop:function(){var t=e.map(e(this).children("li"),function(t){return e(t).data("key")});e(this).prev("input.edd-order").val(t)}}),{init:function(){this.enter_key(),this.add_note(),this.remove_note()},enter_key:function(){e(document.body).on("keydown","#edd-note",function(t){13===t.keyCode&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),e("#edd-add-note").click())})},add_note:function(){e("#edd-add-note").on("click",function(t){t.preventDefault();var d=e(this),n=e("#edd-note"),a=e(".edd-notes"),o=e(".edd-no-notes"),i=e(".edd-add-note .spinner"),r={action:"edd_add_note",nonce:e("#edd_note_nonce").val(),object_id:d.data("object-id"),object_type:d.data("object-type"),note:n.val()};if(r.note)d.prop("disabled",!0),i.css("visibility","visible"),e.ajax({type:"POST",data:r,url:ajaxurl,success:function(e){var t=wpAjax.parseAjaxResponse(e);t=t.responses[0],a.append(t.data),o.hide(),d.prop("disabled",!1),i.css("visibility","hidden"),n.val("")}}).fail(function(e){window.console&&window.console.log&&console.log(e),d.prop("disabled",!1),i.css("visibility","hidden")});else{var s=n.css("border-color");n.css("border-color","red"),setTimeout(function(){n.css("border-color",s)},342)}})},remove_note:function(){e(document.body).on("click",".edd-delete-note",function(t){t.preventDefault();var d=e(this),n=e(".edd-note"),a=d.parents(".edd-note"),o=e(".edd-no-notes"),i=e("#edd_note_nonce");if(confirm(edd_vars.delete_note)){var r={action:"edd_delete_note",nonce:i.val(),note_id:d.data("note-id")};return a.addClass("deleting"),e.ajax({type:"POST",data:r,url:ajaxurl,success:function(e){return"1"===e&&a.remove(),1===n.length&&o.show(),!1}}).fail(function(e){window.console&&window.console.log&&console.log(e),a.removeClass("deleting")}),!0}})}}.init(),{init:function(){this.edit_address(),this.remove_download(),this.add_download(),this.change_customer(),this.new_customer(),this.edit_price(),this.recalculate_total(),this.variable_prices_check(),this.resend_receipt(),this.copy_download_link()},edit_address:function(){e('select[name="edd-payment-address[0][country]"]').change(function(){var t=e(this),d={action:"edd_get_shop_states",country:t.val(),nonce:t.data("nonce"),field_name:"edd-payment-address[0][region]"};return e.post(ajaxurl,d,function(t){var d=e("#edd-order-address-state-wrap select, #edd-order-address-state-wrap input");e("#edd-order-address-state-wrap .chosen-container").remove(),"nostates"===t?d.replaceWith('<input type="text" name="edd-payment-address[0][region]" value="" class="edd-edit-toggles medium-text"/>'):(d.replaceWith(t),e("#edd-order-address-state-wrap select").chosen(n.a))}),!1})},remove_download:function(){e("#edd-order-items").on("click",".edd-order-remove-download",function(){if(1===e(document.body).find("#edd-order-items > .row:not(.header)").length)return alert(edd_vars.one_download_min),!1;if(confirm(edd_vars.delete_payment_download)){var t=e(this).data("key"),d=e('input[name="edd-payment-details-downloads['+t+'][id]"]').val(),n=e('input[name="edd-payment-details-downloads['+t+'][price_id]"]').val(),a=e('input[name="edd-payment-details-downloads['+t+'][quantity]"]').val(),o=e('input[name="edd-payment-details-downloads['+t+'][amount]"]').val(),i=e('input[name="edd-payment-details-downloads['+t+'][order_item_id]"]').val();if(e('input[name="edd-payment-details-downloads['+t+'][tax]"]'))var r=e('input[name="edd-payment-details-downloads['+t+'][tax]"]').val();if(e('input[name="edd-payment-details-downloads['+t+'][fees]"]'))r=e.parseJSON(e('input[name="edd-payment-details-downloads['+t+'][fees]"]').val());var s=e('input[name="edd-payment-removed"]').val();(s=e.parseJSON(s)).length<1&&(s={});var c=[{order_item_id:i,id:d,price_id:n,quantity:a,amount:o,cart_index:t}];s[t]=c,e('input[name="edd-payment-removed"]').val(JSON.stringify(s)),e(this).parent().parent().remove(),r&&r.length&&e.each(r,function(t,d){e('*li[data-fee-id="'+d+'"]').remove()}),e("#edd-payment-downloads-changed").val(1),e(".edd-order-payment-recalc-totals").show()}return!1})},change_customer:function(){e("#edd-customer-details").on("click",".edd-payment-change-customer, .edd-payment-change-customer-cancel",function(t){t.preventDefault();var d=e(this).hasClass("edd-payment-change-customer"),n=e(this).hasClass("edd-payment-change-customer-cancel");d?(e(".order-customer-info").hide(),e(".change-customer").show(),setTimeout(function(){e(".edd-payment-change-customer-input").css("width","300")},1)):n&&(e(".order-customer-info").show(),e(".change-customer").hide())})},new_customer:function(){e("#edd-customer-details").on("click",".edd-payment-new-customer, .edd-payment-new-customer-cancel",function(t){t.preventDefault();var d=e(this).hasClass("edd-payment-new-customer"),n=e(this).hasClass("edd-payment-new-customer-cancel");d?(e(".order-customer-info").hide(),e(".new-customer").show()):n&&(e(".order-customer-info").show(),e(".new-customer").hide());d=e("#edd-new-customer");e(".new-customer").is(":visible")?d.val(1):d.val(0)})},add_download:function(){e(".edd-edit-purchase-element").on("click","#edd-order-add-download",function(t){t.preventDefault();var d=e("#edd_order_download_select"),n=e("#edd-order-download-quantity"),a=e("#edd-order-download-price"),o=e("#edd-order-download-tax"),i=e(".edd_price_options_select option:selected"),r=d.val(),s=d.find(":selected").text(),c=n.val(),l=a.val(),u=o.val(),p=i.val(),f=i.text();if(r<1)return!1;if(l||(l=0),l=parseFloat(l),isNaN(l))return alert(edd_vars.numeric_item_price),!1;if(u=parseFloat(u),isNaN(u))return alert(edd_vars.numeric_item_tax),!1;if(isNaN(parseInt(c)))return alert(edd_vars.numeric_quantity),!1;f&&(s=s+" - "+f);var _=e("#edd-order-items div.row").length,m=e("#edd-order-items div.row:last").clone();m.find(".download span").html('<a href="post.php?post='+r+'&action=edit"></a>'),m.find(".download span a").text(s),m.find(".edd-payment-details-download-item-price").val(l.toFixed(edd_vars.currency_decimals)),m.find(".edd-payment-details-download-item-tax").val(u.toFixed(edd_vars.currency_decimals)),m.find("input.edd-payment-details-download-id").val(r),m.find("input.edd-payment-details-download-price-id").val(p);var v=l*c+u;v=v.toFixed(edd_vars.currency_decimals),m.find("span.edd-payment-details-download-amount").text(v),m.find("input.edd-payment-details-download-amount").val(v),m.find("input.edd-payment-details-download-quantity").val(c),m.find("input.edd-payment-details-download-has-log").val(0),m.find("input.edd-payment-details-download-order-item-id").val(0),m.find(".edd-copy-download-link-wrapper").remove(),m.find("input").each(function(){var t=e(this).attr("name");t=t.replace(/\[(\d+)\]/,"["+parseInt(_)+"]"),e(this).attr("name",t).attr("id",t)}),m.find("a.edd-order-remove-download").attr("data-key",parseInt(_)),e("#edd-payment-downloads-changed").val(1),e(m).insertAfter("#edd-order-items div.row:last"),e(".edd-order-payment-recalc-totals").show(),e(".edd-add-download-field").val("")})},edit_price:function(){e(document.body).on("change keyup",".edd-payment-item-input",function(){var t=e(this).parents("ul.edd-purchased-files-list-wrapper"),d=t.find("input.edd-payment-details-download-quantity").val().replace(edd_vars.thousands_separator,""),n=t.find("input.edd-payment-details-download-item-price").val().replace(edd_vars.thousands_separator,""),a=t.find("input.edd-payment-details-download-item-tax").val().replace(edd_vars.thousands_separator,"");if(e(".edd-order-payment-recalc-totals").show(),n=parseFloat(n),isNaN(n))return alert(edd_vars.numeric_item_price),!1;a=parseFloat(a),isNaN(a)&&(a=0),isNaN(parseInt(d))&&(d=1);var o=n*d+a;o=o.toFixed(edd_vars.currency_decimals),t.find("input.edd-payment-details-download-amount").val(o),t.find("span.edd-payment-details-download-amount").text(o)})},recalculate_total:function(){e("#edd-order-recalc-total").on("click",function(t){t.preventDefault();var d=0,n=0,a=e("#edd-order-items .row input.edd-payment-details-download-amount"),o=e("#edd-order-items .row input.edd-payment-details-download-item-tax");a.length&&a.each(function(){d+=parseFloat(e(this).val())}),o.length&&o.each(function(){n+=parseFloat(e(this).val())}),e(".edd-payment-fees").length&&e(".edd-payment-fees span.fee-amount").each(function(){d+=parseFloat(e(this).data("fee"))}),e("input[name=edd-payment-total]").val(d.toFixed(edd_vars.currency_decimals)),e("input[name=edd-payment-tax]").val(n.toFixed(edd_vars.currency_decimals))})},variable_prices_check:function(){e(".edd-edit-purchase-element").on("change","select#edd_order_download_select",function(){var t=e(this),d=t.val();if(parseInt(d)>0){var n={action:"edd_check_for_download_price_variations",download_id:d};e.ajax({type:"POST",data:n,url:ajaxurl,success:function(d){e(".edd_price_options_select").remove(),e(d).insertAfter(t.next())}}).fail(function(e){window.console&&window.console.log&&console.log(e)})}})},resend_receipt:function(){var t=e(".edd-order-resend-receipt-addresses");e(document.body).on("click","#edd-select-receipt-email",function(e){e.preventDefault(),t.slideDown()}),e(document.body).on("change",".edd-order-resend-receipt-email",function(){var t=e("#edd-select-receipt-email").prop("href")+"&email="+e(this).val();confirm(edd_vars.resend_receipt)&&(window.location=t)}),e(document.body).on("click","#edd-resend-receipt",function(e){return confirm(edd_vars.resend_receipt)})},copy_download_link:function(){e(document.body).on("click",".edd-copy-download-link",function(t){t.preventDefault();var d=e(this),n={action:"edd_get_file_download_link",payment_id:e('input[name="edd_payment_id"]').val(),download_id:d.data("download-id"),price_id:d.data("price-id")};e.ajax({type:"POST",data:n,url:ajaxurl,success:function(t){return e("#edd-download-link").dialog({width:400}).html('<textarea rows="10" cols="40" id="edd-download-link-textarea">'+t+"</textarea>"),e("#edd-download-link-textarea").focus().select(),!1}}).fail(function(e){window.console&&window.console.log&&console.log(e)})})}}.init();var c={init:function(){this.add_order_item(),this.add_adjustment(),this.override(),this.remove(),this.fetch_addresses(),this.select_address(),this.recalculate_total(),this.validate()},add_order_item:function(){var t=e(".edd-add-order-item-button");e("#edd-order-items").on("click","h3 .edd-metabox-title-action",function(t){t.preventDefault(),e("#edd-order-items").children(".edd-add-download-to-purchase").slideToggle()}),t.prop("disabled","disabled"),e(".edd-order-add-download-select").on("change",function(){t.removeAttr("disabled")}),t.on("click",function(t){t.preventDefault();var d=e(".edd-order-add-download-select"),n=e(".edd-add-download-to-purchase .spinner"),a={action:"edd_add_order_item",nonce:e("#edd_add_order_nonce").val(),country:e(".edd-order-address-country").val(),region:e(".edd-order-address-region").val(),download:d.val(),quantity:e(".edd-add-order-quantity").val()};n.css("visibility","visible"),e.post(ajaxurl,a,function(t){e(".orderitems .no-items").hide(),e(".orderitems tbody").append(t.html),c.update_totals(),c.reindex(),n.css("visibility","hidden"),e(".edd-override").removeAttr("disabled")},"json")})},add_adjustment:function(){e("#edd-order-adjustments").on("click","h3 .edd-metabox-title-action",function(t){t.preventDefault(),e("#edd-order-adjustments").children(".edd-add-adjustment-to-purchase").slideToggle()}),e(".edd-order-add-adjustment-select").on("change",function(){var t=e(this).val();e(".edd-add-adjustment-to-purchase li.fee, .edd-add-adjustment-to-purchase li.discount, .edd-add-adjustment-to-purchase li.fee, .edd-add-adjustment-to-purchase li.credit").hide(),e("."+t,".edd-add-adjustment-to-purchase").show()}),e(".edd-add-order-adjustment-button").on("click",function(t){t.preventDefault();var d={action:"edd_add_adjustment_to_order",nonce:e("#edd_add_order_nonce").val(),type:e(".edd-order-add-adjustment-select").val(),adjustment_data:{fee:e(".edd-order-add-fee-select").val(),discount:e(".edd-order-add-discount-select").val(),credit:{description:e(".edd-add-order-credit-description").val(),amount:e(".edd-add-order-credit-amount").val()}}},n=e(".edd-add-adjustment-to-purchase .spinner");n.css("visibility","visible"),e.post(ajaxurl,d,function(t){e(".orderadjustments .no-items").hide(),e(".orderadjustments tbody").append(t.html),c.update_totals(),c.reindex(),n.css("visibility","hidden")},"json")})},override:function(){e(".edd-override").on("click",function(){e(this).prop("disabled","disabled"),e(this).attr("data-override","true"),e(document.body).on("click",".orderitems tr td .value",c.switchToInput),e("<input>").attr({type:"hidden",name:"edd_add_order_override",value:"true"}).appendTo("#edd-add-order-form")})},switchToInput:function(){var t=e("<input>",{val:e(this).text(),type:"text"});e(this).replaceWith(t),t.on("blur",c.switchToSpan),t.select()},switchToSpan:function(){var t=e("<span>",{text:parseFloat(e(this).val()).toLocaleString(edd_vars.currency,{style:"decimal",currency:edd_vars.currency,minimumFractionDigits:edd_vars.currency_decimals,maximumFractionDigits:edd_vars.currency_decimals})}),d=e(this).parent().data("type"),n=e(this).parents("tr").find(".download-"+d);"quantity"===d&&t.text(parseInt(e(this).val())),n.val(t.text()),t.addClass("value"),e(this).replaceWith(t),c.update_totals(),t.on("click",c.switchToInput)},remove:function(){e(document.body).on("click",".orderitems .remove-item, .orderadjustments .remove-item",function(t){t.preventDefault();var d=e(this),n=d.parents("tbody");return d.parents("tr").remove(),1===e("tr",n).length&&e(".no-items",n).show(),c.update_totals(),c.reindex(),!1})},fetch_addresses:function(){e(".edd-payment-change-customer-input").on("change",function(){var t={action:"edd_customer_addresses",customer_id:e(this).val(),nonce:e("#edd_add_order_nonce").val()};return e.post(ajaxurl,t,function(t){o.customer_address_ajax_result=t,t.html?(e(".customer-address-select-wrap").html(t.html).show(),e(".customer-address-select-wrap select").chosen(n.a)):e(".customer-address-select-wrap").html("").hide()},"json"),!1})},select_address:function(){e(document.body).on("change",".customer-address-select-wrap .add-order-customer-address-select",function(){var t=e(this).val(),d=e("#edd-add-order-form select#edd_order_address_country"),n=o.customer_address_ajax_result.addresses[t];e('#edd-add-order-form input[name="edd_order_address[address]"]').val(n.address),e('#edd-add-order-form input[name="edd_order_address[address2]"]').val(n.address2),e('#edd-add-order-form input[name="edd_order_address[city]"]').val(n.city),d.val(n.country).trigger("chosen:updated"),e('#edd-add-order-form input[name="edd_order_address[address_id]"]').val(t);var a={action:"edd_get_shop_states",country:d.val(),nonce:e(".add-order-customer-address-select").data("nonce"),field_name:"edd_order_address_region"};return e.post(ajaxurl,a,function(t){e("select#edd_order_address_region").find("option:gt(0)").remove(),"nostates"!==t&&e(t).find("option:gt(0)").appendTo("select#edd_order_address_region"),e("select#edd_order_address_region").trigger("chosen:updated"),e("select#edd_order_address_region").val(n.region).trigger("chosen:updated")}),!1}),e(".edd-order-address-country").on("change",function(){var t=e(this),d={action:"edd_get_shop_states",country:t.val(),nonce:t.data("nonce"),field_name:"edd-order-address-country"};return e.post(ajaxurl,d,function(t){e("select.edd-order-address-region").find("option:gt(0)").remove(),"nostates"!==t&&e(t).find("option:gt(0)").appendTo("select.edd-order-address-region"),e("select.edd-order-address-region").trigger("chosen:updated")}).done(function(e){c.recalculate_taxes()}),!1}),e(".edd-order-address-region").on("change",function(){c.recalculate_taxes()})},reindex:function(){var t=0;e(".orderitems tbody tr:not(.no-items), .orderadjustments tbody tr:not(.no-items)").each(function(){e(this).attr("data-key",t),e(this).find("input").each(function(){var d=e(this).attr("name");d&&(d=d.replace(/\[(\d+)\]/,"["+parseInt(t)+"]"),e(this).attr("name",d))}),t++})},recalculate_taxes:function(){e("#publishing-action .spinner").css("visibility","visible");var t={action:"edd_add_order_recalculate_taxes",country:e(".edd-order-address-country").val(),region:e(".edd-order-address-region").val(),nonce:e("#edd_add_order_nonce").val()};e.post(ajaxurl,t,function(t){if(""!==t.tax_rate){var d=parseFloat(t.tax_rate);e(".orderitems tbody tr:not(.no-items)").each(function(){var n=parseFloat(e(".amount .value",this).text())*parseFloat(e(".quantity .value",this).text()),a=0;if(t.prices_include_tax){var o=parseFloat(n/(1+d));a=parseFloat(n-o)}else a=n*d;var i=edd_vars.currency,r=edd_vars.currency_decimals,s=n+a;e(".tax .value",this).text(a.toLocaleString(i,{style:"decimal",currency:i,minimumFractionDigits:r,maximumFractionDigits:r})),e(".total .value",this).text(s.toLocaleString(i,{style:"decimal",currency:i,minimumFractionDigits:r,maximumFractionDigits:r}))})}},"json").done(function(){e("#publishing-action .spinner").css("visibility","hidden"),c.update_totals()})},recalculate_total:function(){e("#edd-add-order").on("click","#edd-order-recalc-total",function(){c.update_totals()})},update_totals:function(){var t=0,d=0,n=0,a=0;e(".orderitems tbody tr:not(.no-items)").each(function(){var n,o=e(this),i=1,r=0;n=parseFloat(o.find(".amount .value").text()),o.find(".quantity").length&&(i=parseFloat(o.find(".quantity .value").text())),t+=n*i,o.find(".tax").length&&(r=parseFloat(o.find(".tax .value").text()),isNaN(r)||edd_vars.taxes_included||(n+=r,d+=r)),a+=n*i}),e(".orderadjustments tbody tr:not(.no-items)").each(function(){var t=e(this),o=0;switch(t.data("adjustment")){case"credit":o=parseFloat(t.find("input.credit-amount",t).val()),n+=o,a-=o;break;case"discount":o=parseFloat(t.find("input.discount-amount",t).val()),"percent"===t.find("input.discount-type").val()?e(".orderitems tbody tr:not(.no-items)").each(function(){var t=e(this).find(".amount .value").text(),i=1;e(this).find(".quantity").length&&(i=parseFloat(e(this).find(".quantity").text()));var r=parseFloat((t*=i)/100*o);if(e(this).find(".tax").length){var s=parseFloat(e(this).find(".tax .value").text()),c=parseFloat(s/100*o);d-=c,a-=c}n+=r,a-=r}):(n+=o,a-=o)}}),isNaN(a)&&(a=0),isNaN(t)&&(t=0),isNaN(d)&&(d=0),isNaN(n)&&(n=0),e(" .edd-order-subtotal .value").html(t.toFixed(edd_vars.currency_decimals)),e(" .edd-order-taxes .value").html(d.toFixed(edd_vars.currency_decimals)),e(" .edd-order-discounts .value").html(n.toFixed(edd_vars.currency_decimals)),e(" .edd-order-total .value ").html(a.toFixed(edd_vars.currency_decimals))},validate:function(){e("#edd-add-order-form").on("submit",function(){if(e("#publishing-action .spinner").css("visibility","visible"),e(".orderitems tr.no-items").is(":visible")?e("#edd-add-order-no-items-error").slideDown():e("#edd-add-order-no-items-error").slideUp(),e(".order-customer-info").is(":visible")?e("#edd-add-order-customer-error").slideDown():e("#edd-add-order-customer-error").slideUp(),e(".notice").is(":visible"))return e("#publishing-action .spinner").css("visibility","hidden"),!1})}};c.init(),{init:function(){this.product_requirements()},product_requirements:function(){e("#edd-products").change(function(){var t=e("#edd-discount-product-conditions");e(this).val()?t.show():t.hide()})}}.init(),{init:function(){this.meta_boxes(),this.date_options(),this.customers_export(),this.filters()},meta_boxes:function(){e(".edd-reports-wrapper .postbox .handlediv").remove(),e(".edd-reports-wrapper .postbox").removeClass("closed"),setTimeout(function(){e(".edd-reports-wrapper .postbox .hndle").unbind("click.postboxes")},1)},date_options:function(){e("select.edd-graphs-date-options").on("change",function(t){var d=e(this),n=d.parent().siblings(".edd-date-range-options");"other"===d.val()?n.removeClass("screen-reader-text"):n.addClass("screen-reader-text")})},customers_export:function(){e("#edd_customer_export_download").change(function(){var t=e(this),d=e("option:selected",t).val(),n=e("#edd_customer_export_option");if("0"===t.val()?n.show():n.hide(),0!==parseInt(d)){var a={action:"edd_check_for_download_price_variations",download_id:d,all_prices:!0},o=e(".edd_price_options_select");e.post(ajaxurl,a,function(t){o.remove(),e("#edd_customer_export_download_chosen").after(t)})}else o.remove()})},filters:function(){e(".edd_countries_filter").on("change",function(){var t=e(this),d={action:"edd_get_shop_states",country:t.val(),nonce:t.data("nonce"),field_name:"edd_countries_filter"};return e.post(ajaxurl,d,function(t){e("select.edd_regions_filter").find("option:gt(0)").remove(),"nostates"!==t&&e(t).find("option:gt(0)").appendTo("select.edd_regions_filter"),e("select.edd_regions_filter").trigger("chosen:updated")}),!1})}}.init(),{init:function(){this.general(),this.emails(),this.misc()},general:function(){var t=e(".edd-color-picker");if(t.length&&t.wpColorPicker(),"undefined"==typeof wp||"1"!==edd_vars.new_media_ui){var d=e(".edd_settings_upload_button");d.length>0&&(window.formfield="",e(document.body).on("click",d,function(t){t.preventDefault(),window.formfield=e(this).parent().prev(),window.tbframe_interval=setInterval(function(){jQuery("#TB_iframeContent").contents().find(".savesend .button").val(edd_vars.use_this_file).end().find("#insert-gallery, .wp-post-thumbnail").hide()},2e3),tb_show(edd_vars.add_new_download,"media-upload.php?TB_iframe=true")}),window.edd_send_to_editor=window.send_to_editor,window.send_to_editor=function(t){window.formfield?(imgurl=e("a","<div>"+t+"</div>").attr("href"),window.formfield.val(imgurl),window.clearInterval(window.tbframe_interval),tb_remove()):window.edd_send_to_editor(t),window.send_to_editor=window.edd_send_to_editor,window.formfield="",window.imagefield=!1})}else{var n;window.formfield="",e(document.body).on("click",".edd_settings_upload_button",function(t){t.preventDefault();var d=e(this);window.formfield=e(this).parent().prev(),n?n.open():((n=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",title:d.data("uploader_title"),button:{text:d.data("uploader_button_text")},multiple:!1})).on("menu:render:default",function(e){e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.set({})}),n.on("insert",function(){n.state().get("selection").each(function(e,t){e=e.toJSON(),window.formfield.val(e.url)})}),n.open())}),window.formfield=""}},emails:function(){var t=e("#email-preview-wrap");if(t.length){var d=e("#email-preview");t.colorbox({inline:!0,href:d,width:"80%",height:"auto"})}},misc:function(){var t=e('select[name="edd_settings[download_method]"]'),d=t.parent().parent().next();"direct"===t.val()&&(d.css("opacity","0.4"),d.find("input").prop("checked",!1).prop("disabled",!0)),t.on("change",function(){"direct"===e(this).val()?(d.css("opacity","0.4"),d.find("input").prop("checked",!1).prop("disabled",!0)):(d.find("input").prop("disabled",!1),d.css("opacity","1"))})}}.init(),e(".download_page_edd-payment-history table.orders .row-actions .delete a, a.edd-delete-payment").on("click",function(){return!!confirm(edd_vars.delete_payment)}),e(".download_page_edd-payment-history table.orderitems .row-actions .delete a").on("click",function(){return!!confirm(edd_vars.delete_order_item)}),e(".download_page_edd-payment-history table.orderadjustments .row-actions .delete a").on("click",function(){return!!confirm(edd_vars.delete_order_adjustment)}),e("body").on("click","#the-list .editinline",function(){var t=e(this).closest("tr").attr("id");t=t.replace("post-","");var d=e("#post-"+t).find(".column-price .downloadprice-"+t).val();d!==e("#post-"+t+".column-price .downloadprice-"+t).val()?e(".regprice","#edd-download-data").val(d).attr("disabled",!1):e(".regprice","#edd-download-data").val(edd_vars.quick_edit_warning).attr("disabled","disabled")}),e(document.body).on("click","#bulk_edit",function(){var t=e("#bulk-edit"),d=new Array;t.find("#bulk-titles").children().each(function(){d.push(e(this).attr("id").replace(/^(ttle)/i,""))});var n=e('#edd-download-data input[name="_edd_regprice"]').val(),a={action:"edd_save_bulk_edit",edd_bulk_nonce:d,post_ids:d,price:n};e.post(ajaxurl,a)}),e(document.body).on("keyup",".edd-select-chosen .chosen-search input, .edd-select-chosen .search-field input",function(d){var n=e(this),a=n.val(),o=n.closest(".edd-select-chosen"),i=o.prev(),r=i.data("search-type"),s=o.hasClass("no-bundles"),c=o.hasClass("variations"),l=d.which,u="edd_download_search";o.attr("id").replace("_chosen",""),void 0!==r&&"no_ajax"!==r&&(u="edd_"+r+"_search",a.length<=3&&"edd_download_search"===u||16===l||13===l||91===l||17===l||37===l||38===l||39===l||40===l?o.children(".spinner").remove():(o.children(".spinner").length||o.append('<span class="spinner is-active"></span>'),clearTimeout(t),t=setTimeout(function(){e.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{s:a,action:u,no_bundles:s,variations:c},beforeSend:function(){i.closest("ul.chosen-results").empty()},success:function(t){e("option:not(:selected)",i).remove(),e.each(t,function(t,d){e('option[value="'+d.id+'"]',i).length||i.prepend('<option value="'+d.id+'">'+d.name+"</option>")});var d=n.val();i.trigger("chosen:updated"),n.val(d)}}).fail(function(e){window.console&&window.console.log&&console.log(e)}).done(function(e){o.children(".spinner").remove()})},342)))}),e("#post").on("click",".edd-thickbox",function(){e(".edd-select-chosen","#choose-download").css("width","100%")}),{init:function(){this.revoke_api_key(),this.regenerate_api_key(),this.create_api_key(),this.recount_stats()},revoke_api_key:function(){e(document.body).on("click",".edd-revoke-api-key",function(e){return confirm(edd_vars.revoke_api_key)})},regenerate_api_key:function(){e(document.body).on("click",".edd-regenerate-api-key",function(e){return confirm(edd_vars.regenerate_api_key)})},create_api_key:function(){e(document.body).on("submit","#api-key-generate-form",function(t){var d=e('input[type="text"][name="user_id"]');d.css("border-color","#ddd");var n=d.val();if(n.length<1||0===n)return d.css("border-color","#ff0000"),!1})},recount_stats:function(){e(document.body).on("change","#recount-stats-type",function(){var t=e("#edd-tools-recount-form"),d=e("option:selected",this).data("type"),n=e("#recount-stats-submit"),a=e("#tools-product-dropdown");if(t.find(".notice-wrap").remove(),n.removeClass("button-disabled").attr("disabled",!1),a.hide(),e(".edd-recount-stats-descriptions span").hide(),"recount-download"===d)a.show(),a.find(".edd-select-chosen").css("width","auto");else if("reset-stats"===d){t.append('<div class="notice-wrap"></div>'),t.find(".notice-wrap").html('<div class="notice notice-warning"><p><input type="checkbox" id="confirm-reset" name="confirm_reset_store" value="1" /> <label for="confirm-reset">'+edd_vars.reset_stats_warn+"</label></p></div>"),e("#recount-stats-submit").addClass("button-disabled").attr("disabled","disabled")}else a.hide(),a.val(0);e("#"+d).show()}),e(document.body).on("change","#confirm-reset",function(){e(this).is(":checked")?e("#recount-stats-submit").removeClass("button-disabled").removeAttr("disabled"):e("#recount-stats-submit").addClass("button-disabled").attr("disabled","disabled")}),e("#edd-tools-recount-form").submit(function(t){var d=e("#recount-stats-type").val(),n=e(this),a=e("option:selected",this).data("type");if("reset-stats"===a){if(e("#confirm-reset").is(":checked"))return!0;i=!0}n.find(".notice-wrap").remove(),n.append('<div class="notice-wrap"></div>');var o=n.find(".notice-wrap"),i=!1;(null!==d&&0!==d||(o.html('<div class="updated error"><p>'+edd_vars.batch_export_no_class+"</p></div>"),i=!0),"recount-download"===a)&&(0===e('select[name="download_id"]').val()&&(o.html('<div class="updated error"><p>'+edd_vars.batch_export_no_reqs+"</p></div>"),i=!0));if(i)return n.find(".button-disabled").removeClass("button-disabled"),!1})}}.init(),{init:function(){this.submit()},submit:function(){var t=this;e(document.body).on("submit",".edd-export-form",function(d){d.preventDefault();var n=e(this),a=n.find('input[type="submit"]').first();if(!a.hasClass("button-disabled")&&!a.is(":disabled")){var o=n.serialize();a.addClass("button-disabled"),n.find(".notice-wrap").remove(),n.append('<div class="notice-wrap"><span class="spinner is-active"></span><div class="edd-progress"><div></div></div></div>'),t.process_step(1,o,t)}})},process_step:function(t,d,n){e.ajax({type:"POST",url:ajaxurl,data:{form:d,action:"edd_do_ajax_export",step:t},dataType:"json",success:function(t){if("done"===t.step||t.error||t.success){var a=e(".edd-export-form").find(".edd-progress").parent().parent(),o=a.find(".notice-wrap");if(a.find(".button-disabled").removeClass("button-disabled"),t.error){var i=t.message;o.html('<div class="updated error"><p>'+i+"</p></div>")}else if(t.success){var r=t.message;o.html('<div id="edd-batch-success" class="updated notice"><p>'+r+"</p></div>")}else o.remove(),window.location=t.url}else e(".edd-progress div").animate({width:t.percentage+"%"},50,function(){}),n.process_step(parseInt(t.step),d,n)}}).fail(function(e){window.console&&window.console.log&&console.log(e)})}}.init();var l={init:function(){this.submit()},submit:function(){e(".edd-import-form").ajaxForm({beforeSubmit:this.before_submit,success:this.success,complete:this.complete,dataType:"json",error:this.error})},before_submit:function(t,d,n){if(d.find(".notice-wrap").remove(),d.append('<div class="notice-wrap"><span class="spinner is-active"></span><div class="edd-progress"><div></div></div></div>'),!(window.File&&window.FileReader&&window.FileList&&window.Blob)){var a=e(".edd-import-form").find(".edd-progress").parent().parent(),o=a.find(".notice-wrap");return a.find(".button-disabled").removeClass("button-disabled"),o.html('<div class="update error"><p>'+edd_vars.unsupported_browser+"</p></div>"),!1}},success:function(e,t,d,n){},complete:function(t){var d=e(this),n=jQuery.parseJSON(t.responseText);if(n.success){var a=e(".edd-import-form .notice-wrap").parent();a.find(".edd-import-file-wrap,.notice-wrap").remove(),a.find(".edd-import-options").slideDown();var o=a.find("select.edd-import-csv-column"),i=(o.parents("tr").first(),""),r=n.data.columns.sort(function(e,t){return e<t?-1:e>t?1:0});e.each(r,function(e,t){i+='<option value="'+t+'">'+t+"</option>"}),o.append(i),o.on("change",function(){var t=e(this).val();t&&!1!==n.data.first_row[t]?e(this).parent().next().html(n.data.first_row[t]):e(this).parent().next().html("")}),e.each(o,function(){e(this).val(e(this).attr("data-field")).change()}),e(document.body).on("click",".edd-import-proceed",function(e){e.preventDefault(),a.append('<div class="notice-wrap"><span class="spinner is-active"></span><div class="edd-progress"><div></div></div></div>'),n.data.mapping=a.serialize(),l.process_step(1,n.data,d)})}else l.error(t)},error:function(t){var d=jQuery.parseJSON(t.responseText),n=e(".edd-import-form").find(".edd-progress").parent().parent(),a=n.find(".notice-wrap");n.find(".button-disabled").removeClass("button-disabled"),d.data.error?a.html('<div class="update error"><p>'+d.data.error+"</p></div>"):a.remove()},process_step:function(t,d,n){e.ajax({type:"POST",url:ajaxurl,data:{form:d.form,nonce:d.nonce,class:d.class,upload:d.upload,mapping:d.mapping,action:"edd_do_ajax_import",step:t},dataType:"json",success:function(t){if("done"===t.data.step||t.data.error){var a=e(".edd-import-form").find(".edd-progress").parent().parent(),o=a.find(".notice-wrap");a.find(".button-disabled").removeClass("button-disabled"),t.data.error?o.html('<div class="update error"><p>'+t.data.error+"</p></div>"):(a.find(".edd-import-options").hide(),e("html, body").animate({scrollTop:a.parent().offset().top},500),o.html('<div class="updated"><p>'+t.data.message+"</p></div>"))}else e(".edd-progress div").animate({width:t.data.percentage+"%"},50,function(){}),l.process_step(parseInt(t.data.step),d,n)}}).fail(function(e){window.console&&window.console.log&&console.log(e)})}};l.init();var u={vars:{customer_card_wrap_editable:e("#edit-customer-info .editable"),customer_card_wrap_edit_item:e("#edit-customer-info .edit-item"),user_id:e('input[name="customerinfo[user_id]"]'),state_input:e(':input[name="customerinfo[region]"]')},init:function(){this.edit_customer(),this.add_email(),this.user_search(),this.remove_user(),this.cancel_edit(),this.change_country(),this.delete_checked()},edit_customer:function(){e(document.body).on("click","#edit-customer",function(e){e.preventDefault(),u.vars.customer_card_wrap_editable.hide(),u.vars.customer_card_wrap_edit_item.show().css("display","block")})},add_email:function(){e(document.body).on("click","#add-customer-email",function(t){t.preventDefault();var d=e(this),n=d.parent().parent().parent().parent(),a={edd_action:"customer-add-email",customer_id:n.find('input[name="customer-id"]').val(),email:n.find('input[name="additional-email"]').val(),primary:n.find('input[name="make-additional-primary"]').is(":checked"),_wpnonce:n.find('input[name="add_email_nonce"]').val()};n.parent().find(".notice-container").remove(),n.find(".spinner").css("visibility","visible"),d.attr("disabled",!0),e.post(ajaxurl,a,function(e){setTimeout(function(){!0===e.success?window.location.href=e.redirect:(d.attr("disabled",!1),n.before('<div class="notice-container"><div class="notice notice-error inline"><p>'+e.message+"</p></div></div>"),n.find(".spinner").css("visibility","hidden"))},342)},"json")})},user_search:function(){e(document.body).on("click.eddSelectUser",".edd_user_search_results a",function(t){t.preventDefault();var d=e(this).data("userid");u.vars.user_id.val(d)})},remove_user:function(){e(document.body).on("click","#disconnect-customer",function(t){if(t.preventDefault(),confirm(edd_vars.disconnect_customer)){var d={edd_action:"disconnect-userid",customer_id:e('input[name="customerinfo[id]"]').val(),_wpnonce:e("#edit-customer-info #_wpnonce").val()};e.post(ajaxurl,d,function(e){window.location.href=window.location.href},"json")}})},cancel_edit:function(){e(document.body).on("click","#edd-edit-customer-cancel",function(t){t.preventDefault(),u.vars.customer_card_wrap_edit_item.hide(),u.vars.customer_card_wrap_editable.show(),e(".edd_user_search_results").html("")})},change_country:function(){e('select[name="customerinfo[country]"]').change(function(){var t=e(this),d={action:"edd_get_shop_states",country:t.val(),nonce:t.data("nonce"),field_name:"customerinfo[region]"};return e.post(ajaxurl,d,function(e){console.log(e),"nostates"===e?u.vars.state_input.replaceWith('<input type="text" name="'+d.field_name+'" value="" class="edd-edit-toggles medium-text"/>'):u.vars.state_input.replaceWith(e)}),!1})},delete_checked:function(){e("#edd-customer-delete-confirm").change(function(){var t=e("#edd-customer-delete-records"),d=e("#edd-delete-customer");e(this).prop("checked")?(t.attr("disabled",!1),d.attr("disabled",!1)):(t.attr("disabled",!0),t.prop("checked",!1),d.attr("disabled",!0))})}};u.init(),e(".edd-ajax-user-search").keyup(function(){var t=e(this).val(),d="";e(this).data("exclude")&&(d=e(this).data("exclude")),e(".edd_user_search_wrap").addClass("loading");var n={action:"edd_search_users",user_name:t,exclude:d};e.ajax({type:"POST",data:n,dataType:"json",url:ajaxurl,success:function(t){e(".edd_user_search_wrap").removeClass("loading"),e(".edd_user_search_results").removeClass("hidden"),e(".edd_user_search_results span").html(""),t.results&&e(t.results).appendTo(".edd_user_search_results span")}})}).blur(function(){d?d=!1:(e(this).removeClass("loading"),e(".edd_user_search_results").addClass("hidden"))}).focus(function(){e(this).keyup()}),e(document.body).on("click.eddSelectUser",".edd_user_search_results span a",function(t){t.preventDefault();var d=e(this).data("login");e(".edd-ajax-user-search").val(d),e(".edd_user_search_results").addClass("hidden"),e(".edd_user_search_results span").html("")}),e(document.body).on("click.eddCancelUserSearch",".edd_user_search_results a.edd-ajax-user-cancel",function(t){t.preventDefault(),e(".edd-ajax-user-search").val(""),e(".edd_user_search_results").addClass("hidden"),e(".edd_user_search_results span").html("")}),e("#edd_dashboard_sales").length&&e.ajax({type:"GET",data:{action:"edd_load_dashboard_widget"},url:ajaxurl,success:function(t){e("#edd_dashboard_sales .inside").html(t)}}),"undefined"!=typeof postboxes&&/edd-reports/.test(pagenow)&&postboxes.add_postbox_toggles(pagenow)});function a(e){e.tooltip({content:function(){return jQuery(this).prop("title")},tooltipClass:"edd-ui-tooltip",position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:{duration:200},show:{duration:200}})}}]);