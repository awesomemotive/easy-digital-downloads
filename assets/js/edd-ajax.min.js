var edd_scripts,is_wpidea_loaded;function getButtonText(e,t){return"button"===t?e.html():e.val()}function setButtonText(e,t,d){"button"!==t?e.val(d):e.html(d)}function edd_load_gateway(e){if(is_wpidea_loaded){jQuery(".edd-cart-ajax").show(),jQuery("#edd_purchase_form_wrap").html('<img style="display:block; margin: 10px auto 0;"  src="'+edd_scripts.ajax_loader+'"/>');var t={edd_payment_mode:e,"payment-mode":e};t[wpidea.nonce_name]=wpidea.nonce_value,jQuery("[class^='additional_gateway_info']").slideUp(),jQuery(".additional_gateway_info_"+e).slideDown(),jQuery.ajax({type:"POST",data:t,dataType:"json",url:wpidea.urls.payment_load_gateway,xhrFields:{withCredentials:!0},success:function(t){jQuery("#edd_purchase_form_wrap").html(t.form),jQuery(".edd-no-js").hide(),jQuery("body").trigger("edd_gateway_loaded",[e])},error:function(e,t,d){console.log("Error: "+e.responseJSON.error_message)}})}else console.log("WP Idea not loaded!")}jQuery(document).ready((function(e){is_wpidea_loaded="undefined"!=typeof wpidea,e(".edd-no-js").hide(),e("a.edd-add-to-cart").addClass("edd-has-js");const t=document.getElementById("edd_purchase_form");if(t&&t.addEventListener("keydown",(function(e){"Enter"===e.key&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()})),e("body").on("click.eddRemoveFromCart",".edd-remove-from-cart",(function(t){var d=e(this),a=d.data("cart-item"),i=d.data("action"),o=d.data("download-id"),r={action:i,cart_item:a};return e.ajax({type:"POST",data:r,dataType:"json",url:edd_scripts.ajaxurl,xhrFields:{withCredentials:!0},success:function(t){if(t.removed){if(parseInt(edd_scripts.position_in_cart,10)===parseInt(a,10))return window.location=window.location,!1;e(".edd-cart").find("[data-cart-item='"+a+"']").parent().remove();var d=0;e(".edd-cart").find("[data-cart-item]").each((function(){e(this).attr("data-cart-item",d),d+=1})),e("[id^=edd_purchase_"+o+"]").length&&(e("[id^=edd_purchase_"+o+"] .edd_go_to_checkout").hide(),e("[id^=edd_purchase_"+o+"] a.edd-add-to-cart").show().removeAttr("data-edd-loading"),"1"==edd_scripts.quantities_enabled&&e("[id^=edd_purchase_"+o+"] .edd_download_quantity_wrapper").show()),e("span.edd-cart-quantity").text(t.cart_quantity),e("body").trigger("edd_quantity_updated",[t.cart_quantity]),edd_scripts.taxes_enabled&&(e(".cart_item.edd_subtotal span").html(t.subtotal),e(".cart_item.edd_cart_tax span").html(t.tax)),e(".cart_item.edd_total span").html(t.total),0==t.cart_quantity&&(e(".cart_item.edd_subtotal,.edd-cart-number-of-items,.cart_item.edd_checkout,.cart_item.edd_cart_tax,.cart_item.edd_total").hide(),e(".edd-cart").append('<li class="cart_item empty">'+edd_scripts.empty_cart_message+"</li>")),e("body").trigger("edd_cart_item_removed",[t])}}}).fail((function(e){window.console&&window.console.log&&console.log(e)})).done((function(e){})),!1})),e("body").on("click.eddAddToCart",".edd-add-to-cart",(function(t){if(t.preventDefault(),is_wpidea_loaded){var d=e(this),a=d.closest("form");d.prop("disabled",!0);var i=d.find(".edd-loading"),o=d.closest("div"),r=i.width(),n=i.height();d.attr("data-edd-loading",""),i.css({"margin-left":r/-2,"margin-top":n/-2});a=d.parents("form").last();var s=d.data("download-id"),c=d.data("variable-price"),_=d.data("price-mode"),l=[],u=!0;if("yes"==c)if(a.find(".edd_price_option_"+s).is("input:hidden"))l[0]=e(".edd_price_option_"+s,a).val(),a.find(".edd-submit").data("price")&&a.find(".edd-submit").data("price")>0&&(u=!1);else{if(!a.find(".edd_price_option_"+s+":checked",a).length)return d.removeAttr("data-edd-loading"),void alert(edd_scripts.select_option);a.find(".edd_price_option_"+s+":checked",a).each((function(t){if(l[t]=e(this).val(),!0===u){var d=e(this).data("price");d&&d>0&&(u=!1)}}))}else l[0]=s,d.data("price")&&d.data("price")>0&&(u=!1);if(u&&a.find(".edd_action_input").val("add_to_cart"),"straight_to_gateway"==a.find(".edd_action_input").val())return a.submit(),!0;var p={action:d.data("action"),download_id:s,price_ids:l,post_data:e(a).serialize()};return p[wpidea.nonce_name]=wpidea.nonce_value,e.ajax({type:"POST",data:p,dataType:"json",url:wpidea.urls.payment_add_to_cart,xhrFields:{withCredentials:!0},success:function(t){if("1"==edd_scripts.redirect_to_checkout&&"1"==a.find("#edd_redirect_to_checkout").val())window.location=edd_scripts.checkout_page;else{"1"===edd_scripts.taxes_enabled&&(e(".cart_item.edd_subtotal").show(),e(".cart_item.edd_cart_tax").show()),e(".cart_item.edd_total").show(),e(".cart_item.edd_checkout").show(),e(".cart_item.empty").length?(e(t.cart_item).insertBefore(".edd-cart-meta:first"),e(".cart_item.empty").hide()):e(t.cart_item).insertBefore(".edd-cart-meta:first"),"1"===edd_scripts.taxes_enabled&&(e(".edd-cart-meta.edd_subtotal span").html(t.subtotal),e(".edd-cart-meta.edd_cart_tax span").html(t.tax)),e(".edd-cart-meta.edd_total span").html(t.total);e(".edd-cart-item-title",t.cart_item).length;if(e("span.edd-cart-quantity").each((function(){e(this).text(t.cart_quantity),e("body").trigger("edd_quantity_updated",[t.cart_quantity])})),"none"==e(".edd-cart-number-of-items").css("display")&&e(".edd-cart-number-of-items").show("slow"),"no"!=c&&"multi"==_||(e("a.edd-add-to-cart",o).toggle(),e(".edd_go_to_checkout",o).css("display","inline-block")),"multi"==_&&d.removeAttr("data-edd-loading"),e(".edd_download_purchase_form").length&&("no"==c||!a.find(".edd_price_option_"+s).is("input:hidden"))){var i=e('.edd_download_purchase_form *[data-download-id="'+s+'"]').parents("form");e("a.edd-add-to-cart",i).hide(),"multi"!=_&&i.find(".edd_download_quantity_wrapper").slideUp(),e(".edd_go_to_checkout",i).show().removeAttr("data-edd-loading")}"incart"!=t&&(e(".edd-cart-added-alert",o).fadeIn(),setTimeout((function(){e(".edd-cart-added-alert",o).fadeOut()}),3e3)),d.prop("disabled",!1),e("body").trigger("edd_cart_item_added",[t])}},error:function(e,t,d){console.log("Error: "+e.responseJSON.error_message)}}).fail((function(e){window.console&&window.console.log&&console.log(e)})).done((function(e){})),!1}console.log("WP Idea not loaded!")})),e("#edd_checkout_form_wrap").on("click",".edd_checkout_register_login",(function(){var t={action:e(this).data("action")};return e(".edd-cart-ajax").show(),e.post(edd_scripts.ajaxurl,t,(function(t){e("#edd_checkout_login_register").html(edd_scripts.loading),e("#edd_checkout_login_register").html(t),e(".edd-cart-ajax").hide()})),!1})),e(document).on("click","#edd_purchase_form #edd_login_fields input[type=submit]",(function(t){t.preventDefault();var d=e(this).val();e(this).val(edd_global_vars.purchase_loading),e(this).after('<span class="edd-cart-ajax"><i class="edd-icon-spinner edd-icon-spin"></i></span>');var a={action:"edd_process_checkout_login",edd_ajax:1,edd_user_login:e("#edd_login_fields #edd_user_login").val(),edd_user_pass:e("#edd_login_fields #edd_user_pass").val()};e.post(edd_global_vars.ajaxurl,a,(function(t){"success"==e.trim(t)?(e(".edd_errors").remove(),window.location=edd_scripts.checkout_page):(e("#edd_login_fields input[type=submit]").val(d),e(".edd-cart-ajax").remove(),e(".edd_errors").remove(),e("#edd-user-login-submit").before(t))}))})),e("select#edd-gateway, input.edd-gateway").change((function(t){var d=e("#edd-gateway option:selected, input.edd-gateway:checked").val();return"0"==d||edd_load_gateway(d),!1})),"1"==edd_scripts.is_checkout){var d=!1,a=!1;e("select#edd-gateway, input.edd-gateway").length&&(d=e("meta[name='edd-chosen-gateway']").attr("content"),a=!0),d||(d=edd_scripts.default_gateway),a?setTimeout((function(){edd_load_gateway(d)}),20):e("body").trigger("edd_gateway_loaded",[d])}e(document).on("click","#edd_purchase_form #edd_purchase_submit input[type=submit], #edd_purchase_form #edd_purchase_submit button[type=submit]:not(#edd-payu-button-pay-for-all):not(#edd-payu-button-pay-for-recurring)",(function(t){if(!is_wpidea_loaded)return void console.log("WP Idea not loaded!");var d=document.getElementById("edd_purchase_form");if("function"==typeof d.checkValidity&&!1===d.checkValidity())return;t.preventDefault();let a=e(this),i=a.is("button")?"button":"input";var o=getButtonText(a,i);const r="#edd_purchase_form #edd_purchase_submit input[type=submit], #edd_purchase_form #edd_purchase_submit button[type=submit]";setButtonText(a,i,edd_global_vars.purchase_loading),e(r).prop("disabled",!0),a.after('<span class="edd-cart-ajax"><i class="edd-icon-spinner edd-icon-spin"></i></span>');var n=e("#edd_purchase_form").serialize();n+="&edd_ajax=true",n+="&"+wpidea.nonce_name+"="+wpidea.nonce_value,e.post(wpidea.urls.payment_process_checkout,n,(function(t){if("success"==e.trim(t)){e(".edd_errors").remove(),e(".edd-error").hide(),function(){let t=a.attr("name"),i=a.val();t&&i&&""!==i.trim()&&e("<input>").attr({type:"hidden",name:t,value:i}).appendTo(e(d))}();const t=new CustomEvent("wpi_checkout_before_form_submit",{bubbles:!0,cancelable:!0,detail:{form:this}});if(document.dispatchEvent(t),t.defaultPrevented)return;e(d).submit()}else{let d="button"===i;if(e(".edd-cart-ajax").remove(),e(".edd_errors").remove(),e(".edd-error").hide(),e("#edd_final_total_wrap").before(t),d)return a.html(o),void e(r).prop("disabled",!1);e("#edd-purchase-button").val(o),e(r).prop("disabled",!1)}}))}))}));