var edd_scripts;jQuery(document).ready(function(a){a(".edd-no-js").hide();a("body").on("click.eddRemoveFromCart",".edd-remove-from-cart",function(c){var f=a(this),b=f.data("cart-item"),e=f.data("action"),g=f.data("download-id"),d={action:e,cart_item:b,nonce:edd_scripts.ajax_nonce};a.post(edd_scripts.ajaxurl,d,function(h){if(h=="removed"){if(parseInt(edd_scripts.position_in_cart,10)===parseInt(b,10)){window.location=window.location;return false}f.parent().remove();if(a("#edd_purchase_"+g).length){a("#edd_purchase_"+g+" .edd_go_to_checkout").hide();a("#edd_purchase_"+g+" .edd-add-to-cart").show()}a("span.edd-cart-quantity").each(function(){var i=parseInt(a(this).text(),10)-1;a(this).text(i)});if(!a(".edd-cart-item").length){a(".cart_item.edd_checkout").hide();a(".edd-cart").append('<li class="cart_item empty">'+edd_scripts.empty_cart_message+"</li>")}else{}}});return false});a("body").on("click.eddAddToCart",".edd-add-to-cart",function(i){i.preventDefault();var j=a(this);var c=j.closest("div");a(".edd-cart-ajax",c).show();var d=j.parents("form").last();var b=j.data("download-id");var l=j.data("variable-price");var h=j.data("price-mode");var k=[];if(l=="yes"){a(".edd_price_option_"+b+":checked",d).each(function(e){k[e]=a(this).val()})}else{k[0]=b}var f=j.data("action"),g={action:f,download_id:b,price_ids:k,nonce:edd_scripts.ajax_nonce,post_data:a(d).serialize()};a.post(edd_scripts.ajaxurl,g,function(e){if(edd_scripts.redirect_to_checkout=="1"){window.location=edd_scripts.checkout_page}else{if(a(".cart_item.empty").length){a(e).insertBefore(".cart_item.edd_checkout");a(".cart_item.edd_checkout").show();a(".cart_item.empty").remove()}else{a(e).insertBefore(".cart_item.edd_checkout")}a("span.edd-cart-quantity").each(function(){var m=parseInt(a(this).text(),10)+1;a(this).text(m)});a(".edd-cart-ajax",c).hide();if(l=="no"||h!="multi"){a(".edd_go_to_checkout, .edd-add-to-cart",c).toggle()}if(e!="incart"){a(".edd-cart-added-alert",c).fadeIn();setTimeout(function(){a(".edd-cart-added-alert",c).fadeOut()},3000)}}});return false});a("#edd_checkout_form_wrap").on("click",".edd_checkout_register_login",function(){var d=a(this),c=d.data("action"),b={action:c,nonce:edd_scripts.ajax_nonce};a(".edd-cart-ajax").show();a.post(edd_scripts.ajaxurl,b,function(e){a("#edd_checkout_login_register").html(edd_scripts.loading);a("#edd_checkout_login_register").html(e);a(".edd-cart-ajax").hide()});return false});a("select#edd-gateway, input.edd-gateway").change(function(c){var b=a("#edd-gateway option:selected, input.edd-gateway:checked").val();if(b=="0"){return false}edd_load_gateway(b);return false});if(edd_scripts.is_checkout=="1"&&a("select#edd-gateway, input.edd-gateway").length){setTimeout(function(){edd_load_gateway(edd_scripts.default_gateway)},200)}a(document).on("click","#edd_purchase_form input[type=submit]",function(c){c.preventDefault();var b=a(this).val();a(this).val(edd_global_vars.purchase_loading);a(this).after('<img src="'+edd_scripts.ajax_loader+'" class="edd-cart-ajax" />');a.post(edd_global_vars.ajaxurl,a("#edd_purchase_form").serialize()+"&action=edd_process_checkout&edd_ajax=true",function(d){if(a.trim(d)=="success"){a(".edd_errors").remove();a("#edd_purchase_form").submit()}else{a("#edd_purchase_form input[type=submit]").val(b);a(".edd-cart-ajax").remove();a(".edd_errors").remove();a("#edd_purchase_submit").before(d)}})})});function edd_load_gateway(a){jQuery(".edd-cart-ajax").show();jQuery("#edd_purchase_form_wrap").html('<img src="'+edd_scripts.ajax_loader+'"/>');jQuery.post(edd_scripts.ajaxurl+"?payment-mode="+a,{action:"edd_load_gateway",edd_payment_mode:a},function(b){jQuery("#edd_purchase_form_wrap").html(b)})};