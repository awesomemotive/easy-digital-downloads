var edd_scripts;jQuery(document).ready(function(a){a(".edd-no-js").hide();a("body").on("click.eddRemoveFromCart",".edd-remove-from-cart",function(c){var f=a(this),d=f.data("cart-item"),e=f.data("action"),b=f.data("download-id"),g={action:e,cart_item:d,nonce:edd_scripts.ajax_nonce};a.post(edd_scripts.ajaxurl,g,function(h){if(h=="removed"){if(parseInt(edd_scripts.position_in_cart,10)===parseInt(d,10)){window.location=window.location;return false}f.parent().remove();if(a("#edd_purchase_"+b).length){a("#edd_purchase_"+b+" .edd_go_to_checkout").hide();a("#edd_purchase_"+b+" .edd-add-to-cart").show()}a("span.edd-cart-quantity").each(function(){var i=parseInt(a(this).text(),10)-1;a(this).text(i)});g={action:"edd_get_subtotal",nonce:edd_scripts.ajax_nonce};a.post(edd_scripts.ajaxurl,g,function(i){a(".cart_item.edd_subtotal span").html(i)});if(!a(".edd-cart-item").length){a(".cart_item.edd_subtotal").hide();a(".edd-cart-number-of-items").hide();a(".cart_item.edd_checkout").hide();a(".edd-cart").append('<li class="cart_item empty">'+edd_scripts.empty_cart_message+"</li>")}else{}}});return false});a("body").on("click.eddAddToCart",".edd-add-to-cart",function(d){d.preventDefault();var g=a(this);var l=g.closest("div");a(".edd-cart-ajax",l).show();var k=g.parents("form").last();var j=g.data("download-id");var f=g.data("variable-price");var c=g.data("price-mode");var i=[];if(f=="yes"){if(!a(".edd_price_option_"+j+":checked",k).length){alert(edd_scripts.select_option);a(".edd-cart-ajax",l).hide();return}a(".edd_price_option_"+j+":checked",k).each(function(e){i[e]=a(this).val()})}else{i[0]=j}var b=g.data("action"),h={action:b,download_id:j,price_ids:i,nonce:edd_scripts.ajax_nonce,post_data:a(k).serialize()};a.post(edd_scripts.ajaxurl,h,function(e){if(edd_scripts.redirect_to_checkout=="1"){window.location=edd_scripts.checkout_page}else{if(a(".cart_item.empty").length){a(e).insertBefore(".cart_item.edd_subtotal");a(".cart_item.edd_checkout").show();a(".cart_item.edd_subtotal").show();a(".cart_item.empty").remove()}else{a(e).insertBefore(".cart_item.edd_subtotal")}a(".cart_item.edd_subtotal span").html(a(".temp-subtotal").text());a(".temp-subtotal").remove();a("span.edd-cart-quantity").each(function(){var m=parseInt(a(this).text(),10)+1;a(this).text(m)});if(a(".edd-cart-number-of-items").css("display")=="none"){a(".edd-cart-number-of-items").show("slow")}a(".edd-cart-ajax",l).hide();if(f=="no"||c!="multi"){a(".edd_go_to_checkout, .edd-add-to-cart",l).toggle()}if(e!="incart"){a(".edd-cart-added-alert",l).fadeIn();setTimeout(function(){a(".edd-cart-added-alert",l).fadeOut()},3000)}}});return false});a("#edd_checkout_form_wrap").on("click",".edd_checkout_register_login",function(){var b=a(this),c=b.data("action"),d={action:c,nonce:edd_scripts.ajax_nonce};a(".edd-cart-ajax").show();a.post(edd_scripts.ajaxurl,d,function(e){a("#edd_checkout_login_register").html(edd_scripts.loading);a("#edd_checkout_login_register").html(e);a(".edd-cart-ajax").hide()});return false});a("select#edd-gateway, input.edd-gateway").change(function(b){var c=a("#edd-gateway option:selected, input.edd-gateway:checked").val();if(c=="0"){return false}edd_load_gateway(c);return false});if(edd_scripts.is_checkout=="1"&&a("select#edd-gateway, input.edd-gateway").length){setTimeout(function(){edd_load_gateway(edd_scripts.default_gateway)},200)}a(document).on("click","#edd_purchase_form input[type=submit]",function(b){b.preventDefault();var c=a(this).val();a(this).val(edd_global_vars.purchase_loading);a(this).after('<img src="'+edd_scripts.ajax_loader+'" class="edd-cart-ajax" />');a.post(edd_global_vars.ajaxurl,a("#edd_purchase_form").serialize()+"&action=edd_process_checkout&edd_ajax=true",function(d){if(a.trim(d)=="success"){a(".edd_errors").remove();a("#edd_purchase_form").submit()}else{a("#edd_purchase_form input[type=submit]").val(c);a(".edd-cart-ajax").remove();a(".edd_errors").remove();a("#edd_purchase_submit").before(d)}})})});function edd_load_gateway(a){jQuery(".edd-cart-ajax").show();jQuery("#edd_purchase_form_wrap").html('<img src="'+edd_scripts.ajax_loader+'"/>');jQuery.post(edd_scripts.ajaxurl+"?payment-mode="+a,{action:"edd_load_gateway",edd_payment_mode:a},function(b){jQuery("#edd_purchase_form_wrap").html(b)})};
