!function(e){var a={};function t(d){if(a[d])return a[d].exports;var n=a[d]={i:d,l:!1,exports:{}};return e[d].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=e,t.c=a,t.d=function(e,a,d){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:d})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var d=Object.create(null);if(t.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)t.d(d,n,function(a){return e[a]}.bind(null,n));return d},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=65)}({0:function(e,a){e.exports=jQuery},65:function(e,a,t){"use strict";t.r(a);t(66)},66:function(e,a,t){(function(e,a){var t={inProgress:!1,init:function(){e(".edd-v3-migration-confirmation").on("change",(function(a){var t=e(this).closest(".edd-v3-migration").find("button");a.target.checked?t.removeClass("disabled").prop("disabled",!1):t.addClass("disabled").prop("disabled",!0)})),e(".edd-v3-migration").on("submit",(function(a){if(a.preventDefault(),!t.inProgress){t.inProgress=!0;var d=e(this),n=d.find('input[name="upgrade_key"]'),r=!1;if(n.length&&n.val()&&(r=n.val()),d.find("button").removeClass("button-primary").addClass("button-secondary disabled updating-message").prop("disabled",!0),d.find("input").prop("disabled",!0),"edd-v3-migration"===d.attr("id")){e("#edd-migration-progress").removeClass("edd-hidden");var o=e("#edd-migration-progress li:not(.edd-upgrade-complete)");o.length&&t.markUpgradeInProgress(o.data("upgrade"))}t.processStep(r,1,d.find('input[name="_wpnonce"]').val())}}))},processStep:function(a,d,n){var r={action:"edd_process_v3_upgrade",_ajax_nonce:n,upgrade_key:a,step:d};e.ajax({type:"POST",data:r,url:ajaxurl,success:function(e){if(e.data.upgrade_completed){if(t.markUpgradeComplete(e.data.upgrade_processed),"v30_legacy_data_removed"===e.data.upgrade_processed)return void t.legacyDataRemovalComplete()}else e.data.percentage&&t.updateUpgradePercentage(e.data.upgrade_processed,e.data.percentage);e.data.next_upgrade&&"v30_legacy_data_removed"===e.data.next_upgrade?(t.inProgress=!1,t.showLegacyDataRemoval()):e.data.next_upgrade?(e.data.next_upgrade!==e.data.upgrade_processed&&t.markUpgradeInProgress(e.data.next_upgrade),t.processStep(e.data.next_upgrade,e.data.next_step,e.data.nonce)):(t.inProgress=!1,t.stopAllSpinners())}}).fail((function(e){}))},markUpgradeInProgress:function(a){var t=e("#edd-v3-migration-"+a);if(t.length){var d=t.find(".dashicons");d.length&&(d.removeClass("dashicons-ellipsis").addClass("dashicons-update"),t.find(".edd-migration-percentage").removeClass("edd-hidden"))}},updateUpgradePercentage:function(a,t){var d=e("#edd-v3-migration-"+a);d.length&&d.find(".edd-migration-percentage-value").text(t)},markUpgradeComplete:function(a){var t=e("#edd-v3-migration-"+a);if(t.length){t.addClass("edd-upgrade-complete");var d=t.find(".dashicons");d.length&&(d.removeClass("dashicons-ellipsis").addClass("dashicons-yes"),t.find(".edd-migration-percentage-value").text(100))}},showLegacyDataRemoval:function(){e("#edd-v3-migration-button").removeClass("updating-message"),e("#edd-v3-migration-complete").removeClass("edd-hidden");var a=e("#edd-v3-remove-legacy-data");a.length&&a.removeClass("edd-hidden")},legacyDataRemovalComplete:function(){var a=e("#edd-v3-remove-legacy-data");a.length&&(a.find("form").addClass("edd-hidden"),a.find("#edd-v3-legacy-data-removal-complete").removeClass("edd-hidden"))},stopAllSpinners:function(){}};a(document).ready((function(e){t.init()}))}).call(this,t(0),t(0))}});
//# sourceMappingURL=edd-admin-upgrades.js.map