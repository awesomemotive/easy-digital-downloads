(()=>{"use strict";var n={1669:n=>{n.exports=jQuery}},e={};function t(o){var i=e[o];if(void 0!==i)return i.exports;var a=e[o]={exports:{}};return n[o](a,a.exports,t),a.exports}var o=t(1669),i=t(1669);const a=function(n){n.tooltip({content:function(){return o(this).prop("title")},tooltipClass:"edd-ui-tooltip",position:{my:"bottom",at:"top-10",collision:"flipfit"},hide:{duration:200},show:{duration:200}})};i(document).ready((function(n){a(n(".edd-help-tip"))}));var d=t(1669),r=t(1669),s={vars:{nonce:""},init:function(){s.vars.nonce=d("#_wpnonce").val(),this.init_step_buttons(),this.init_upload_buttons(),this.start_onboarding();let n=s.get_step_class(d(".edd-onboarding_current-step").val());n&&s[n].init()},loading_state:function(n){d(".edd-onboarding__loading-status").empty(),d(".edd-onboarding__loading").toggle(n),d(".edd-onboarding").toggleClass("edd-onboarding__loading-in-progress",n)},init_step_buttons:function(){d(document.body).on("click",".edd-onboarding__button-back",(function(n){n.preventDefault(),s.load_step(d(".edd-onboarding_current-previous-step").val())})),d(document.body).on("click",".edd-onboarding__button-skip-step",(function(n){n.preventDefault(),s.next_step(!0)})),d(document.body).on("click",".edd-onboarding__button-save-step",(function(n){n.preventDefault();let e=s.get_step_class(d(".edd-onboarding_current-step").val());e&&s[e].save().then((function(){s.next_step()}))})),d(document.body).on("click",".edd-onboarding__dismiss",(function(n){s.onboarding_skipped(!0,n.target)}))},init_upload_buttons:function(){let n;window.form_upload_field=!1,d(document.body).on("click",".edd_settings_upload_button",(function(e){e.preventDefault();const t=d(this);window.form_upload_field=d(t.data("input")),n||(n=wp.media.frames.file_frame=wp.media({title:t.data("uploader_title"),library:{type:"image"},button:{text:t.data("uploader_button_text")},multiple:!1}),n.on("menu:render:default",(function(n){n.unset("library-separator"),n.unset("gallery"),n.unset("featured-image"),n.unset("embed"),n.unset("playlist"),n.unset("video-playlist"),n.set({})})),n.on("select",(function(){n.state().get("selection").each((function(n,e){n=n.toJSON(),window.form_upload_field.val(n.url),window.form_upload_field.data("attachment-id-field")&&d(window.form_upload_field.data("attachment-id-field")).val(n.id)}))}))),n.open()}))},start_onboarding:function(){d(document.body).on("click",".edd-onboarding__welcome-screen-get-started",(function(n){n.preventDefault(),s.loading_state(!0);var e={action:"edd_onboarding_started",page:"edd-onboarding-wizard",_wpnonce:s.vars.nonce};d.post(ajaxurl,e,(function(){d(".edd-onboarding__welcome-screen").hide(),d(".edd-onboarding__steps, .edd-onboarding__after-welcome-screen, .edd-onboarding__close-and-exit").show(),s.loading_state(!1)}))}))},onboarding_completed:function(n){s.loading_state(!0);var e={action:"edd_onboarding_completed",page:"edd-onboarding-wizard",_wpnonce:s.vars.nonce};return d.post(ajaxurl,e,(function(){n&&(window.location=d("#edd-onboarding__exit").val())}))},onboarding_skipped:function(n,e){e.classList.contains("edd-promo-notice-dismiss")||s.loading_state(!0);var t={action:"edd_onboarding_skipped",page:"edd-onboarding-wizard",_wpnonce:s.vars.nonce};return d.post(ajaxurl,t,(function(){n&&(window.location=d("#edd-onboarding__exit").val())}))},load_step:function(n){s.loading_state(!0),d.ajax({type:"GET",dataType:"html",url:ajaxurl,data:{action:"edd_onboarding_load_step",page:"edd-onboarding-wizard",current_step:n,_wpnonce:s.vars.nonce},success:function(e){d(".edd-onboarding__current-step").html(e);let t=s.get_step_class(n);t&&s[t].init(),setTimeout((function(){d("html, body").animate({scrollTop:d(".edd-onboarding__wrapper").offset().top-45},800)}),150);let o=new URLSearchParams(window.location.search);o.set("current_step",n),history.replaceState(null,null,"?"+o.toString()),a(d(".edd-help-tip")),document.dispatchEvent(new Event("DOMContentLoaded"))}}).fail((function(n){window.console&&window.console.log&&console.log(n)})).done((function(n){s.loading_state(!1)}))},next_step:function(n=!1){let e=d(".edd-onboarding_current-next-step").val();if(""===e){if(!n)return!1;s.onboarding_completed(!0)}s.load_step(e)},get_step_class:function(n){let e="EDD_Onboarding_"+n.split("_").map((n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())).join("_");return void 0!==s[e]&&e},EDD_Onboarding_Business_Info:{init:function(){},save:function(){return d.ajax({type:"POST",url:d(".edd-settings-form").attr("action"),data:d(".edd-settings-form").serialize(),beforeSend:function(){s.loading_state(!0)},success:function(n){}}).fail((function(n){window.console&&window.console.log&&console.log(n)}))}},EDD_Onboarding_Payment_Methods:{init:function(){let n=d("#edds-stripe-connect-account"),e=d("#edds-stripe-disconnect-reconnect");n&&d.ajax({type:"POST",url:ajaxurl,data:{action:"edds_stripe_connect_account_info",accountId:n.data("account-id"),nonce:n.data("nonce"),onboardingWizard:!0},success:function(t){n.removeClass("loading"),e.removeClass("loading"),t.success?(n.html(t.data.message),n.addClass(`notice-${t.data.status}`),t.data.actions&&e.html(t.data.actions)):(n.html(t.data.message),n.addClass("notice-error"))}}).fail((function(n){}))},save:function(){return Promise.resolve()}},EDD_Onboarding_Configure_Emails:{vars:{wp_editor:!1},init:function(){s.EDD_Onboarding_Configure_Emails.vars.wp_editor&&wp.editor.remove("edd_settings_purchase_receipt"),wp.editor.initialize("edd_settings_purchase_receipt",{tinymce:{wpautop:!0,plugins:"charmap colorpicker compat3x directionality fullscreen hr image lists media paste tabfocus textcolor wordpress wpautoresize wpdialogs wpeditimage wpemoji wpgallery wplink wptextpattern wpview",toolbar1:"bold italic underline strikethrough | bullist numlist | blockquote hr wp_more | alignleft aligncenter alignright | link unlink | fullscreen | wp_adv",toolbar2:"formatselect alignjustify forecolor | pastetext removeformat charmap | outdent indent | undo redo | wp_help"},quicktags:!0,mediaButtons:!0}),d("#edd-onboarding__insert-marker-button a").clone().appendTo(".wp-media-buttons"),s.EDD_Onboarding_Configure_Emails.vars.wp_editor=!0},save:function(){let n="edd_settings_purchase_receipt",e=d("#"+n).val();tinymce.get(n)&&(e=wp.editor.getContent(n));let t={action:"edd_onboarding_save_email",content:e,email_logo:d("#email_logo").val(),from_name:d("#from_name").val(),from_email:d("#from_email").val(),nonce:s.vars.nonce};return d.ajax({type:"POST",url:ajaxurl,data:t,beforeSend:function(){s.loading_state(!0)},success:function(n){}}).fail((function(n){window.console&&window.console.log&&console.log(n)}))}},EDD_Onboarding_Tools:{init:function(){this.get_selected_plugins(),d(document.body).on("change",".edd-onboarding__plugin-install",(function(){s.EDD_Onboarding_Tools.get_selected_plugins()}))},get_selected_plugins:function(){let n=[];d(".edd-onboarding__selected-plugins").show(),d(".edd-onboarding__plugin-install:checked:not(:disabled)").each((function(){d(this).data("plugin-name")&&d(this).data("action").length>0&&n.push(d(this).data("plugin-name"))})),d(".edd-onboarding__selected-plugins-text").html(n.join(", ")),0===n.length&&d(".edd-onboarding__selected-plugins").hide()},save:async function(){s.loading_state(!0),await d.post(ajaxurl,{action:"edd_onboarding_telemetry_settings",page:"edd-onboarding-wizard",telemetry_toggle:d("#edd-onboarding__telemery-toggle").is(":checked"),auto_register:d("#auto-register").is(":checked"),_wpnonce:s.vars.nonce},(function(){}));let n=[],e=[];d(".edd-onboarding__plugin-install:checked:not(:disabled)").each((function(){d(this).data("plugin-name")&&d(this).data("action").length>0&&n.push({plugin_name:d(this).data("plugin-name"),plugin_file:d(this).data("plugin-file"),plugin_url:d(this).val(),action:d(this).data("action")})}));for(let t in n)await new Promise(((o,i)=>{let a="",r="",s="";switch(n[t].action){case"activate":r="edd_activate_extension",s=EDDExtensionManager.activating,a=n[t].plugin_file;break;case"install":r="edd_install_extension",s=EDDExtensionManager.installing,a=n[t].plugin_url}d(".edd-onboarding__loading-status").html(s+" "+n[t].plugin_name+"...");let l={action:r,nonce:EDDExtensionManager.extension_manager_nonce,plugin:a,type:"plugin"};d.post(ajaxurl,l).done((function(i){i.success||e.push(n[t].plugin_name),setTimeout((function(){o()}),1500)}))}));return 0===e.length?0===n.length?Promise.resolve():new Promise(((n,e)=>{s.loading_state(!1),d(".edd-onboarding").toggleClass("edd-onboarding__loading-in-progress",!0),d(".edd-onboarding__install-success-wrapper").show(),setTimeout((()=>{d(".edd-onboarding__install-success-wrapper").hide(),d(".edd-onboarding").toggleClass("edd-onboarding__loading-in-progress",!1),n()}),3200)})):(d(".edd-onboarding__failed-plugins-text").html(e.join(", ")),d(".edd-onboarding__steps-indicator, .edd-onboarding__single-step-title, .edd-onboarding__single-step-subtitle, .edd-onboarding__single-step-footer, .edd-onboarding__install-plugins").slideUp(),d(".edd-onboarding__install-failed").slideDown(),s.loading_state(!1),Promise.reject())}},EDD_Onboarding_Products:{init:function(){s.EDD_Onboarding_Products.init_variable_pricing_toggle(),s.EDD_Onboarding_Products.init_files_toggle(),d("#edd_download_files").show()},init_variable_pricing_toggle:function(){d(document.body).on("click",".edd-onboarding__pricing-option-pill button",(function(n){n.preventDefault();let e=d(this).data("variable-pricing");d("#edd_variable_pricing").prop("checked",e),d("#edd_variable_pricing").trigger("change")})),d(document.body).on("change","#edd_variable_pricing",(function(n){n.preventDefault();let e=this.checked;d(".edd-onboarding__pricing-option-pill .active").removeClass("active"),d('.edd-onboarding__pricing-option-pill button[data-variable-pricing="'+e+'"]').addClass("active"),d(".edd-onboarding__product-single-price").show(),d(".edd-onboarding__product-variable-price").hide(),e&&(d(".edd-onboarding__product-variable-price").show(),d(".edd-onboarding__product-single-price").hide()),d(".edd-onboarding__product-files-wrapper").show()}))},init_files_toggle:function(){d(document.body).on("change","#_edd_upload_files",(function(n){n.preventDefault(),d(".edd-onboarding__product-files-row").toggle(this.checked)}))},save:function(){let n=d(".edd-onboarding__create-product-form");if(!n[0].reportValidity())return Promise.reject();let e=Object.fromEntries(new FormData(n[0]));return d.ajax({type:"POST",url:ajaxurl,data:{action:"edd_onboarding_create_product",page:"edd-onboarding-wizard",_wpnonce:s.vars.nonce,...e},beforeSend:function(){s.loading_state(!0)},success:function(n){n.success&&(d(".edd-onboarding__edit-my-product").attr("href",decodeURI(n.redirect_url.replace(/&amp;/g,"&"))),d(".edd-onboarding__single-step-inner").addClass("equal"),d(".edd-onboarding__create-product-form, .edd-onboarding__single-step-title, .edd-onboarding__single-step-subtitle, .edd-onboarding__single-step-footer, .edd-onboarding__close-and-exit").hide(),d(".edd-onboarding__product-created").show(),s.onboarding_completed(!1)),s.loading_state(!1)}}).fail((function(n){window.console&&window.console.log&&console.log(n)}))}}};r(document).ready((function(n){s.init()}))})();