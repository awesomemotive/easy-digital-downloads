function eddPayPalOnboardingCallback(authCode,shareId){var connectButton=document.getElementById("edd-paypal-commerce-connect"),errorContainer=document.getElementById("edd-paypal-commerce-errors");jQuery.post(ajaxurl,{action:"edd_paypal_commerce_get_access_token",auth_code:authCode,share_id:shareId,_ajax_nonce:connectButton.getAttribute("data-nonce")},function(response){return connectButton.classList.remove("updating-message"),response.success?(connectButton.classList.add("updated-message"),void window.location.reload()):(connectButton.disabled=!1,errorContainer.innerHTML="<p>"+response.data+"</p>",void errorContainer.classList.add("notice notice-error"))})}jQuery(document).ready(function($){function eddPayPalGetAccountStatus(){var accountInfoEl=document.getElementById("edd-paypal-commerce-connect-wrap");accountInfoEl&&$.post(ajaxurl,{action:"edd_paypal_commerce_get_account_info",_ajax_nonce:accountInfoEl.getAttribute("data-nonce")},function(newClass){var newHtml="<p>"+eddPayPalConnectVars.defaultError+"</p>";newClass.success?(newHtml=newClass.data.account_status,newClass.data.actions&&newClass.data.actions.length&&(newHtml+='<p class="edd-paypal-connect-actions">'+newClass.data.actions.join(" ")+"</p>")):newClass.data&&newClass.data.message&&(newHtml=newClass.data.message),accountInfoEl.innerHTML=newHtml,accountInfoEl.classList.remove("notice-success","notice-warning","notice-error");newClass=newClass.success&&newClass.data.status?"notice-"+newClass.data.status:"notice-error";accountInfoEl.classList.add(newClass)})}$("#edd-paypal-commerce-connect").on("click",function(e){e.preventDefault();var errorContainer=$("#edd-paypal-commerce-errors");errorContainer.empty().removeClass("notice notice-error");var button=document.getElementById("edd-paypal-commerce-connect");button.classList.add("updating-message"),button.disabled=!0,$.post(ajaxurl,{action:"edd_paypal_commerce_connect",_ajax_nonce:$(this).data("nonce")},function(response){if(!response.success)return console.log("Connection failure",response.data),button.classList.remove("updating-message"),button.disabled=!1,void errorContainer.html("<p>"+response.data+"</p>").addClass("notice notice-error");var paypalLinkEl=document.getElementById("edd-paypal-commerce-link");paypalLinkEl.href=response.data.signupLink+"&displayMode=minibrowser",paypalLinkEl.click()})}),eddPayPalGetAccountStatus(),$(document).on("click",".edd-paypal-connect-action",function(errorWrap){errorWrap.preventDefault();var button=$(this);button.prop("disabled",!0),button.addClass("updating-message");errorWrap=$("#edd-paypal-commerce-connect-wrap").find(".edd-paypal-actions-error-wrap");errorWrap.length&&errorWrap.remove(),$.post(ajaxurl,{action:button.data("action"),_ajax_nonce:button.data("nonce")},function(response){button.prop("disabled",!1),button.removeClass("updating-message"),response.success?(button.addClass("updated-message"),eddPayPalGetAccountStatus()):button.parent().after('<p class="edd-paypal-actions-error-wrap">'+response.data+"</p>")})})});