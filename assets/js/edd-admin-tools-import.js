(()=>{var e={311:e=>{"use strict";e.exports=jQuery}},t={};function r(o){var d=t[o];if(void 0!==d)return d.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}(()=>{var e=r(311),t=r(311),o={init:function(){this.submit()},submit:function(){const t=this;e(".edd-import-form").ajaxForm({beforeSubmit:t.before_submit,success:t.success,complete:t.complete,dataType:"json",error:t.error})},before_submit:function(t,r,o){if(r.find(".notice-wrap").remove(),r.append('<div class="notice-wrap"><div class="edd-progress"><div></div></div></div>'),!(window.File&&window.FileReader&&window.FileList&&window.Blob)){const t=e(".edd-import-form").find(".edd-progress").parent().parent(),r=t.find(".notice-wrap");return t.find(".button:disabled").attr("disabled",!1),r.html('<div class="update error"><p>'+edd_vars.unsupported_browser+"</p></div>"),!1}},success:function(e,t,r,o){},complete:function(r){const d=e(this),i=t.parseJSON(r.responseText);if(i.success){const t=e(".edd-import-form .notice-wrap").parent();t.find(".edd-import-file-wrap,.notice-wrap").remove(),t.find(".edd-import-options").slideDown();let r=t.find("select.edd-import-csv-column"),n=(r.parents("tr").first(),""),s=i.data.columns.sort((function(e,t){return e<t?-1:e>t?1:0}));e.each(s,(function(e,t){n+='<option value="'+t+'">'+t+"</option>"})),r.append(n),r.on("change",(function(){const t=e(this).val();t&&!1!==i.data.first_row[t]?e(this).parent().next().html(i.data.first_row[t]):e(this).parent().next().html("")})),e.each(r,(function(){e(this).val(e(this).attr("data-field")).change()})),e(document.body).on("click",".edd-import-proceed",(function(e){e.preventDefault(),t.find(".edd-import-proceed.button-primary").addClass("updating-message"),t.append('<div class="notice-wrap"><div class="edd-progress"><div></div></div></div>'),i.data.mapping=t.serialize(),o.process_step(1,i.data,d)}))}else o.error(r)},error:function(r){const o=t.parseJSON(r.responseText),d=e(".edd-import-form").find(".edd-progress").parent().parent(),i=d.find(".notice-wrap");d.find(".button:disabled").attr("disabled",!1),o.data.error?i.html('<div class="update error"><p>'+o.data.error+"</p></div>"):i.remove()},process_step:function(t,r,d){e.ajax({type:"POST",url:ajaxurl,data:{form:r.form,nonce:r.nonce,class:r.class,upload:r.upload,mapping:r.mapping,action:"edd_do_ajax_import",step:t},dataType:"json",success:function(t){if("done"===t.data.step||t.data.error){const r=e(".edd-import-form").find(".edd-progress").parent().parent(),o=r.find(".notice-wrap");r.find(".button:disabled").attr("disabled",!1),t.data.error?o.html('<div class="update error"><p>'+t.data.error+"</p></div>"):(r.find(".edd-import-options").hide(),e("html, body").animate({scrollTop:r.parent().offset().top},500),o.html('<div class="updated"><p>'+t.data.message+"</p></div>"))}else e(".edd-progress div").animate({width:t.data.percentage+"%"},50,(function(){})),o.process_step(parseInt(t.data.step),r,d)}}).fail((function(e){window.console&&window.console.log&&console.log(e)}))}};t(document).ready((function(e){o.init()}))})()})();