{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/js/admin/settings/email-tags/index.js","webpack:///./assets/js/admin/settings/email-tags/utils.js"],"names":["setupEmailTags","insertButtons","document","querySelectorAll","_","each","node","addEventListener","tb_remove","window","send_to_editor","dataset","to_insert","filterEmailTags","filterInput","querySelector","tagItems","event","searchTerm","target","value","foundTags","searchItems","eddEmailTagsInserter","items","found","findWhere","tag","style","display","mediaButton","tb_position","normalizedSearchTerm","normalizeTerm","matchSearch","string","indexOf","filter","item","title","some","keywords","term","toLowerCase","trim"],"mappings":"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","file":"assets/js/edd-admin-email-tags.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./assets/js/admin/settings/email-tags/index.js\");\n","/* global eddEmailTagsInserter, tb_remove, tb_position, send_to_editor, _, window, document */\n\n/**\n * Internal dependencies.\n */\nimport { searchItems } from './utils.js';\n\n/**\n * Make tags clickable and send them to the email content (wp_editor()).\n */\nfunction setupEmailTags() {\n\t// Find all of the buttons.\n\tconst insertButtons = document.querySelectorAll( '.edd-email-tags-list-button' );\n\n\t/**\n\t * Listen for clicks on tag buttons.\n\t *\n\t * @param {object} node Button node.\n\t */\n\t_.each( insertButtons, function( node ) {\n\t\t/**\n\t\t * Listen for clicks on tag buttons.\n\t\t */\n\t\tnode.addEventListener( 'click', function() {\n\t\t\t// Close Thickbox.\n\t\t\ttb_remove();\n\n\t\t\twindow.send_to_editor( node.dataset.to_insert );\n\t\t} );\n\t} );\n}\n\n/**\n * Filter tags.\n */\nfunction filterEmailTags() {\n\tconst filterInput = document.querySelector( '.edd-email-tags-filter-search' );\n\tconst tagItems = document.querySelectorAll( '.edd-email-tags-list-item' );\n\n\tfilterInput.addEventListener( 'keyup', function( event ) {\n\t\tconst searchTerm = event.target.value;\n\t\tconst foundTags = searchItems( eddEmailTagsInserter.items, searchTerm );\n\n\t\t_.each( tagItems, function( node ) {\n\t\t\tconst found = _.findWhere( foundTags, { tag: node.dataset.tag } );\n\n\t\t\tnode.style.display = ! found ? 'none' : 'block';\n\t\t} );\n\t} );\n}\n\n/**\n * DOM ready.\n */\ndocument.addEventListener( 'DOMContentLoaded', function() {\n\t// Resize Thickbox when media button is clicked.\n\tconst mediaButton = document.querySelector( '.edd-email-tags-inserter' );\n\tmediaButton.addEventListener( 'click', tb_position );\n\n\t// Clickable tags.\n\tsetupEmailTags();\n\n\t// Filterable tags.\n\tfilterEmailTags();\n} );\n","/* global _ */\n\n/**\n * Filters an item list given a search term.\n *\n * @param {Array} items        Item list\n * @param {string} searchTerm  Search term.\n *\n * @return {Array}             Filtered item list.\n */\nexport const searchItems = function( items, searchTerm ) {\n\tconst normalizedSearchTerm = normalizeTerm( searchTerm );\n\n\tconst matchSearch = function( string ) {\n\t\treturn normalizeTerm( string ).indexOf( normalizedSearchTerm ) !== -1;\n\t};\n\n\treturn _.filter( items, function( item ) {\n\t\treturn matchSearch( item.title ) || _.some( item.keywords, matchSearch );\n\t} );\n};\n\n/**\n * Converts the search term into a normalized term.\n *\n * @param {string} term The search term to normalize.\n *\n * @return {string} The normalized search term.\n */\nexport const normalizeTerm = function( term ) {\n\t// Lowercase.\n\t//  Input: \"MEDIA\"\n\tterm = term.toLowerCase();\n\n\t// Strip leading and trailing whitespace.\n\t//  Input: \" media \"\n\tterm = term.trim();\n\n\treturn term;\n};\n"],"sourceRoot":""}
