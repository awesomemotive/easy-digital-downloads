(function(){var b,a=[].indexOf||function(e){for(var d=0,c=this.length;d<c;d++){if(d in this&&this[d]===e){return d}}return -1};b=jQuery;b.fn.validateCreditCard=function(j){var c,e,g,i,d,h,f;c=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}];e=function(m){var l,n,k;for(n=0,k=c.length;n<k;n++){l=c[n];if(m.match(l.pattern)){return l}}return null};i=function(m){var r,q,l,p,k,o;l=0;o=m.split("").reverse();for(q=p=0,k=o.length;p<k;q=++p){r=o[q];r=+r;if(q%2){r*=2;if(r<10){l+=r}else{l+=r-9}}else{l+=r}}return l%10===0};g=function(l,k){var m;return m=l.length,a.call(k.valid_length,m)>=0};f=function(n){var k,m,l;k=e(n);l=false;m=false;if(k!=null){l=i(n);m=g(n,k)}return j({card_type:k,luhn_valid:l,length_valid:m})};h=function(){var k;k=d(b(this).val());return f(k)};d=function(k){return k.replace(/[ -]/g,"")};this.bind("input",function(){b(this).unbind("keyup");return h.call(this)});this.bind("keyup",function(){return h.call(this)});if(this.length!==0){h.call(this)}return this}}).call(this);