!function(e){var t={};function a(d){if(t[d])return t[d].exports;var n=t[d]={i:d,l:!1,exports:{}};return e[d].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,d){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:d})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(d,n,function(t){return e[t]}.bind(null,n));return d},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=346)}({1:function(e,t){e.exports=jQuery},11:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return d}));var d=function(t){e(t)}}).call(this,a(1))},32:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return o}));var d=function(e){var t,a=e;switch(e){case"amex":a="americanexpress",t=32;break;default:t=50}return"\n    <svg\n      width=".concat(t,"\n      height=",32,'\n      class="payment-icon icon-').concat(a,'"\n      role="img"\n    >\n      <use\n        href="#icon-').concat(a,'"\n        xlink:href="#icon-').concat(a,'">\n      </use>\n    </svg>')},n=0;function o(t){if("1"==edd_global_vars.taxes_enabled){var a=document.getElementById("edd_checkout_cart").getElementsByClassName("edd_cart_tax");if(a.length>0&&!a[0].querySelector(".edd-recalculate-taxes-loading")){a=a[0];for(var d=document.createElement("span"),o=a.getElementsByClassName("edd_cart_tax_amount"),r=0;r<o.length;r++)o[r].remove();d.classList.add("edd-loading-ajax","edd-recalculate-taxes-loading","edd-loading"),a.appendChild(d)}var c=e("#edd_cc_address"),l=c.find("#billing_country").val(),i=c.find("#card_address").val(),s=c.find("#card_address_2").val(),u=c.find("#card_city").val(),_=c.find("#card_state").val();t||(t=_);var f={action:"edd_recalculate_taxes",card_address:i,card_address_2:s,card_city:u,card_zip:c.find("#card_zip").val(),state:t,billing_country:l,nonce:e("#edd-checkout-address-fields-nonce").val(),current_page:edd_global_vars.current_page},p=++n;return e.ajax({type:"POST",data:f,dataType:"json",url:edd_global_vars.ajaxurl,xhrFields:{withCredentials:!0},success:function(t){if(p===n){t.html&&e("#edd_checkout_cart_form").replaceWith(t.html),e(".edd_cart_amount").html(t.total);var a=new Object;a.postdata=f,a.response=t,e("body").trigger("edd_taxes_recalculated",[a])}e(".edd-recalculate-taxes-loading").remove()}}).fail((function(t){window.console&&window.console.log&&(console.log(t),p===n&&e("body").trigger("edd_taxes_recalculated",[tax_data]))}))}}}).call(this,a(1))},346:function(e,t,a){"use strict";a.r(t),a(347);var d=a(32);window.recalculate_taxes=d.b,window.EDD_Checkout=function(e){var t,a,n;function o(a){a.preventDefault();var o=e("#edd-discount").val(),r=e("#edd-discount-loader"),c=e("#edd_cc_address .edd-input, #edd_cc_address .edd-select").filter("[required]");if(""==o||o==edd_global_vars.enter_discount)return!1;var l={action:"edd_apply_discount",code:o,form:e("#edd_purchase_form").serialize(),current_page:edd_global_vars.current_page};return e("#edd-discount-error-wrap").html("").hide(),r.show(),e.ajax({type:"POST",data:l,dataType:"json",url:edd_global_vars.ajaxurl,xhrFields:{withCredentials:!0},success:function(a){a?"valid"==a.msg?(e(".edd_cart_discount").html(a.html),e(".edd_cart_discount_row").show(),e(".edd_cart_amount").each((function(){e(this).text(a.total).data("subtotal",a.subtotal_raw).attr("data-subtotal",a.subtotal_raw).data("total",a.total_plain).attr("data-total",a.total_plain)})),e("#edd-discount",n).val(""),Object(d.b)(),"0.00"==a.total_plain?(e("#edd_cc_fields,#edd_cc_address,#edd_payment_mode_select").slideUp(),c.prop("required",!1),e('input[name="edd-gateway"]').val("manual")):(c.prop("required",!0),e("#edd_cc_fields,#edd_cc_address").slideDown()),e("#edd-purchase-button").val(a.complete_purchase),t.trigger("edd_discount_applied",[a])):(e("#edd-discount-error-wrap").html('<span class="edd_error">'+a.msg+"</span>"),e("#edd-discount-error-wrap").show(),t.trigger("edd_discount_invalid",[a])):(window.console&&window.console.log&&console.log(a),t.trigger("edd_discount_failed",[a])),r.hide()}}).fail((function(e){window.console&&window.console.log&&console.log(e)})),!1}function r(a){var n={action:"edd_remove_discount",code:e(this).data("code"),current_page:edd_global_vars.current_page};return e.ajax({type:"POST",data:n,dataType:"json",url:edd_global_vars.ajaxurl,xhrFields:{withCredentials:!0},success:function(a){var n="0"+edd_global_vars.decimal_separator+"00";e(".edd_cart_amount").each((function(){edd_global_vars.currency_sign+n!=e(this).text()&&n+edd_global_vars.currency_sign!=e(this).text()||window.location.reload(),e(this).text(a.total).data("subtotal",a.subtotal_raw).attr("data-subtotal",a.subtotal_raw).data("total",a.total_plain).attr("data-total",a.total_plain)})),e(".edd_cart_discount").html(a.html),a.discounts&&0===a.discounts.length&&e(".edd_cart_discount_row").hide(),Object(d.b)(),e("#edd_cc_fields,#edd_cc_address").slideDown(),e("#edd-purchase-button").val(a.complete_purchase),t.trigger("edd_discount_removed",[a])}}).fail((function(e){window.console&&window.console.log&&console.log(e)})),!1}function c(a){var d=e(this),n=d.val(),o=d.data("key"),r=d.closest(".edd_cart_item").data("download-id"),c=d.parent().find('input[name="edd-cart-download-'+o+'-options"]').val(),l=e("#edd_cc_address"),i={action:"edd_update_quantity",quantity:n,download_id:r,options:c,billing_country:l.find("#billing_country").val(),card_state:l.find("#card_state").val(),current_page:edd_global_vars.current_page};return e.ajax({type:"POST",data:i,dataType:"json",url:edd_global_vars.ajaxurl,xhrFields:{withCredentials:!0},success:function(a){e(".edd_cart_subtotal_amount").each((function(){e(this).text(a.subtotal)})),e(".edd_cart_tax_amount").each((function(){e(this).text(a.taxes).data("tax",a.taxes_raw).attr("data-tax",a.taxes_raw)})),e(".edd_cart_discount").html(a.discounts),e(".edd_cart_amount").each((function(){e(this).text(a.total).data("subtotal",a.subtotal_raw).attr("data-subtotal",a.subtotal_raw).data("total",a.total_raw).attr("data-total",a.total_raw),t.trigger("edd_quantity_updated",[a])})),e("#edd-purchase-button").val(a.complete_purchase)}}).fail((function(e){window.console&&window.console.log&&console.log(e)})),!1}return{init:function(){t=e(document.body),a=e("#edd_purchase_form"),e(".edd_cart_amount").text(),n=e("#edd_checkout_form_wrap"),t.on("edd_gateway_loaded",(function(e){var t,d,n,o;d=(t=a).find(".card-number"),n=t.find(".card-cvc"),o=t.find(".card-expiry"),d.length&&"function"==typeof d.payment&&(d.payment("formatCardNumber"),n.payment("formatCardCVC"),o.payment("formatCardExpiry"))})),t.on("keyup change",".edd-do-validate .card-number",(function(){var t,a;t=e(this),(a=t).validateCreditCard((function(t){var n=e(".card-type");null==t.card_type?(n.removeClass().addClass("off card-type"),a.removeClass("valid"),a.addClass("error")):(n.removeClass("off"),n.html(Object(d.a)(t.card_type.name)),n.addClass(t.card_type.name),t.length_valid&&t.luhn_valid?(a.addClass("valid"),a.removeClass("error")):(a.removeClass("valid"),a.addClass("error")))}))})),t.on("blur change",".card-name",(function(){var t=e(this);t.validateCreditCard((function(a){null!=a.card_type?(t.removeClass("valid").addClass("error"),e("#edd-purchase-button").attr("disabled","disabled")):(t.removeClass("error").addClass("valid"),e("#edd-purchase-button").removeAttr("disabled"))}))})),t.on("submit","#edd_payment_mode",(function(){if(0==e("#edd-gateway option:selected").val())return alert(edd_global_vars.no_gateway),!1})),t.on("click","#edd_payment_mode_select input",(function(){e("#edd_payment_mode_select label.edd-gateway-option-selected").removeClass("edd-gateway-option-selected"),e("#edd_payment_mode_select input:checked").parent().addClass("edd-gateway-option-selected")})),n.on("click",".edd-apply-discount",o),n.on("keypress","#edd-discount",(function(e){if("13"==e.keyCode)return!1})),n.on("keyup","#edd-discount",(function(e){"13"==e.keyCode&&n.find(".edd-apply-discount").trigger("click")})),t.on("click",".edd_discount_remove",r),t.on("click",".edd_discount_link",(function(t){t.preventDefault(),e(".edd_discount_link").parent().hide(),e("#edd-discount-code-wrap").show().find("#edd-discount").focus()})),t.find("#edd-discount-code-wrap").hide(),t.find("#edd_show_discount").show(),t.on("change",".edd-item-quantity",c),t.on("click",".edd-amazon-logout #Logout",(function(e){e.preventDefault(),amazon.Login.logout(),window.location=edd_amazon.checkoutUri}))},recalculate_taxes:d.b}}(window.jQuery),window.jQuery(document).ready(EDD_Checkout.init)},347:function(e,t,a){"use strict";(function(e){var t=a(11);Object(t.a)((function(){e(document.body).on("click",".edd_terms_links",(function(t){t.preventDefault();var a=e(this).parent();a.prev(".edd-terms").slideToggle(),a.find(".edd_terms_links").toggle()}))}))}).call(this,a(1))}});