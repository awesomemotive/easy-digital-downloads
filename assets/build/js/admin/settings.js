(()=>{var e={1099:(e,t,d)=>{var n=d(1669);n(document).ready((function(e){if("undefined"==typeof eddPayPalConnectVars)return;let t=document.getElementById("edd-paypal-commerce-errors");if(t&&t.length){for(;t.firstChild;)t.removeChild(t.firstChild);t.classList.remove("notice notice-error")}if(eddPayPalConnectVars.isConnected){let t=document.getElementById("edd-paypal-commerce-reconnect");t&&t.addEventListener("click",(function(d){d.preventDefault();let n=e("#edd-paypal-commerce-errors");n.empty().removeClass("notice notice-error"),t.classList.add("updating-message"),t.disabled=!0,e.post(ajaxurl,{action:"edd_paypal_commerce_reconnect",_ajax_nonce:t.dataset.nonce}).done((function(){})).fail((function(e){console.log("Reconnect failure",e.data),t.classList.remove("updating-message"),t.disabled=!1,n.html("<p>"+e.data+"</p>").addClass("notice notice-error")}))})),function t(){let d=document.getElementById("edd-paypal-commerce-connect-wrap");d&&e.post(ajaxurl,{action:"edd_paypal_commerce_get_account_info",_ajax_nonce:d.getAttribute("data-nonce")},(function(n){let a="<p>"+eddPayPalConnectVars.defaultError+"</p>";n.success?(a=n.data.account_status,n.data.actions&&n.data.actions.length&&(a+='<p class="edd-paypal-connect-actions">'+n.data.actions.join(" ")+"</p>"),n.data.disconnect_links&&n.data.disconnect_links.length&&(document.getElementById("edd-paypal-disconnect").innerHTML=n.data.disconnect_links.join(" "))):n.data&&n.data.message&&(a=n.data.message),d.innerHTML=a,d.classList.remove("notice-success","notice-warning","notice-error","loading");var s=n.success&&n.data.status?"notice-"+n.data.status:"notice-error";d.classList.add(s);let o=document.getElementById("edd-paypal-commerce-get-help");"success"===n.data.status?(o.classList.add("edd-hidden"),o.classList.remove("button","button-secondary")):(o.classList.remove("edd-hidden"),o.classList.add("button","button-secondary")),function(){let d=document.querySelectorAll(".edd-paypal-connect-action");d&&d.length&&d.forEach((function(d){d.addEventListener("click",(function(d){d.preventDefault();let n=d.target;n.disabled=!0,n.classList.add("updating-message");let a=document.getElementById("edd-paypal-commerce-connect-wrap");a&&a.length&&a.remove(),e.post(ajaxurl,{action:n.dataset.action,_ajax_nonce:n.dataset.nonce}).done((function(){t()})).fail((function(e){console.log("Failure",e.data),n.disabled=!1,n.classList.remove("updating-message"),a.html("<p>"+e.data+"</p>").addClass("edd-paypal-actions-error-wrap")}))}))}))}()}))}()}else{if(document.getElementById("edd-paypal-commerce-link")){let e=document.createElement("script");e.id="edd-paypal-commerce-onboarding",e.src="https://www.paypal.com/webapps/merchantboarding/js/lib/lightbox/partner.js",document.body.appendChild(e),setTimeout((()=>{"undefined"!==window.PAYPAL.apps.Signup&&window.PAYPAL.apps.Signup.render()}),1e3)}window.eddPayPalOnboardingCallback=function(e,t){let d=document.getElementById("edd-paypal-commerce-link"),a=document.getElementById("edd-paypal-commerce-errors");n.post(ajaxurl,{action:"edd_paypal_commerce_get_access_token",auth_code:e,share_id:t,_ajax_nonce:d.dataset.nonce}).done((function(){d.classList.add("disabled","updating-message"),d.disabled=!0})).fail((function(e){a.innerHTML="<p>"+e.data+"</p>",a.classList.add("notice","notice-error");let t=document.getElementById("edd-paypal-commerce-get-help");t.classList.remove("edd-hidden"),t.classList.add("button","button-secondary")}))}}}))},1302:(e,t,d)=>{"use strict";d.d(t,{B:()=>a});var n=d(1669);const a=()=>{var e={action:"edd_recapture_remote_install",nonce:document.getElementById("edd-recapture-connect-nonce").value};n.post(ajaxurl,e,(function(e){!e.success&&e.data&&confirm(e.data.error)?location.reload():window.location.href="https://recapture.io/register"}))}},1669:e=>{"use strict";e.exports=jQuery}},t={};function d(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,d),s.exports}d.d=(e,t)=>{for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=d(1302);function t(e,t,d=!1){const n=d?!t:t;document.querySelectorAll(".edd-requires__"+e+":not(.edd-requires__"+e+"-disabled)").forEach((function(e){e.classList.remove("edd-hidden--required"),e.classList.toggle("edd-hidden",!n),e.classList.contains("edd-hidden")&&e.classList.add("edd-hidden--required")})),document.querySelectorAll(".edd-requires__"+e+"-disabled").forEach((function(e){e.classList.remove("edd-hidden--required"),e.classList.toggle("edd-hidden",n),e.classList.contains("edd-hidden")&&e.classList.add("edd-hidden--required")}))}function n(e,t){document.querySelectorAll('[class*="edd-requires__'+e+'-"]').forEach((function(d){const n=d.className.match(new RegExp("edd-requires__"+e+"-([\\w-]+)"));if(n){const e=n[1],a=t===e;d.classList.remove("edd-hidden--required"),d.classList.toggle("edd-hidden",!a),d.classList.contains("edd-hidden")&&d.classList.add("edd-hidden--required")}})),document.querySelectorAll(".edd-requires__"+e+':not([class*="edd-requires__'+e+'-"])').forEach((function(e){const d=""!==t&&null!==t&&"none"!==t;e.classList.remove("edd-hidden--required"),e.classList.toggle("edd-hidden",!d),e.classList.contains("edd-hidden")&&e.classList.add("edd-hidden--required")}))}d(1099),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("[data-edd-requirement]").forEach((function(e){const d=e.getAttribute("data-edd-requirement");if(d)if("SELECT"===e.tagName)n(d,e.value);else if("checkbox"===e.type){const n=e.hasAttribute("data-edd-requirement-inverse");t(d,e.checked,n)}})),document.addEventListener("change",(function(e){const d=e.target;if(!d.hasAttribute("data-edd-requirement"))return;const a=d.getAttribute("data-edd-requirement");if(a)if("SELECT"===d.tagName)n(a,d.value);else if("checkbox"===d.type){const e=d.hasAttribute("data-edd-requirement-inverse");t(a,d.checked,e)}})),document.addEventListener("eddSettingToggled",(function(e){e.detail?.setting&&t(e.detail.setting,e.detail.value)}))}));var a=d(1669),s=d(1669);const o={init:function(){this.general(),this.misc(),this.gateways(),this.emails(),this.checkout()},general:function(){const e=a(".edd-color-picker");var t;e.length&&e.wpColorPicker(),window.formfield="",a(document.body).on("click",".edd_settings_upload_button",(function(e){e.preventDefault();const d=a(this);window.formfield=a(d.data("input")),t||((t=wp.media.frames.file_frame=wp.media({title:d.data("uploader_title"),library:{type:"image"},button:{text:d.data("uploader_button_text")},multiple:!1})).on("menu:render:default",(function(e){e.unset("library-separator"),e.unset("gallery"),e.unset("featured-image"),e.unset("embed"),e.unset("playlist"),e.unset("video-playlist"),e.set({})})),t.on("select",(function(){t.state().get("selection").each((function(e,t){e=e.toJSON(),window.formfield.val(e.url)}))}))),t.open()})),window.formfield=""},misc:function(){const e=a('select[name="edd_settings[download_method]"]'),t=e.parent().parent().next(),d=a('input[name="edd_settings[allow_tracking]"]');"direct"===e.val()&&(t.css("opacity","0.4"),t.find("input").prop("checked",!1).prop("disabled",!0)),e.on("change",(function(){"direct"===a(this).val()?(t.css("opacity","0.4"),t.find("input").prop("checked",!1).prop("disabled",!0)):(t.find("input").prop("disabled",!1),t.css("opacity","1"))})),d.on("change",(function(){a(".allow_tracking.edd-heart").toggleClass("edd-hidden")}))},gateways:function(){a('#edd-payment-gateways input[type="checkbox"]').on("change",(function(){const e=a(this).data("gateway-key"),t=a("#edd_settings\\[default_gateway\\]"),d=t.find('option[value="'+e+'"]');d.prop("disabled",(function(e,t){return!t})),d.prop("selected")&&d.prop("selected",!1),t.trigger("chosen:updated")})),this.emptyCartBehavior()},emptyCartBehavior:function(){const e=a("#edd_settings\\[empty_cart_behavior\\]");function t(){const t=e.val(),d=a("#edd_settings_empty_cart_message").closest("tr"),n=a("#edd_settings\\[empty_cart_redirect_page\\]").closest("tr"),s=a("#edd_settings\\[empty_cart_redirect_url\\]").closest("tr");d.addClass("edd-hidden"),n.addClass("edd-hidden"),s.addClass("edd-hidden"),"message"===t?d.removeClass("edd-hidden"):"redirect_page"===t?n.removeClass("edd-hidden"):"redirect_url"===t&&s.removeClass("edd-hidden")}e.length&&("undefined"!=typeof edd_vars&&void 0!==edd_vars.is_pro?edd_vars.is_pro?(t(),e.on("change",t)):(t(),e.on("change",(function(){const e=a(this).val();"redirect_page"===e||"redirect_url"===e?(a(this).val("message"),t(),"undefined"!=typeof edd_promo_admin&&edd_promo_admin.show_notice("empty-cart-behavior")):t()}))):(t(),e.on("change",t)))},emails:function(){a("#edd-recapture-connect").on("click",(function(t){t.preventDefault(),a(this).html(edd_vars.wait+' <span class="edd-loading"></span>'),document.body.style.cursor="wait",(0,e.B)()}));const t=a('select[name="edd_settings[email_summary_recipient]"]'),d=t.val(),n=a('textarea[name="edd_settings[email_summary_custom_recipients]"]').parents("tr"),s=a("#edd-send-test-summary-save-changes-notice"),o=a("#edd-send-test-summary"),i=a("#edd-send-test-summary-notice");t.on("change",(function(){n.toggleClass("hidden"),o.removeClass("hidden updated-message"),i.empty(),s.empty(),d!==t.val()&&(o.addClass("hidden"),s.html('<div class="notice notice-info"><p>'+edd_vars.test_email_save_changes+"</p></div>"))})),o.on("click",(function(e){e.preventDefault(),a.ajax({type:"GET",dataType:"json",url:ajaxurl,data:{action:"edd_send_test_email_summary"},beforeSend:function(){i.empty(),o.addClass("updating-message").prop("disabled",!0)},success:function(e){"error"==e.status?i.html('<div class="updated '+e.status+'"><p>'+e.message+"</p></div>"):(o.addClass("updated-message"),setTimeout((function(){o.removeClass("updated-message")}),3e3))}}).fail((function(e){window.console&&window.console.log&&console.log(e)})).done((function(e){o.removeClass("updating-message").prop("disabled",!1)}))}))},checkout:function(){const e=document.getElementById("edd_settings[logged_in_only]"),t=document.getElementById("edd_settings[show_register_form]");if(!e||!t)return;const d=()=>{t.querySelectorAll("option").forEach((d=>{d.disabled="auto"===e.value&&["registration","both"].includes(d.value),d.disabled&&d.value===t.value&&(t.value="none")}))};d(),e.addEventListener("change",d)}};s(document).ready((function(e){o.init()}))})()})();